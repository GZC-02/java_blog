<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.14">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>集合体系结构 | Java</title><meta name="description" content="编码见闻录">
    <link rel="preload" href="/java_blog/assets/style-BtcQQSZj.css" as="style"><link rel="stylesheet" href="/java_blog/assets/style-BtcQQSZj.css">
    <link rel="modulepreload" href="/java_blog/assets/app-CUeFR5CM.js"><link rel="modulepreload" href="/java_blog/assets/base08.html-KuPad3Wp.js">
    <link rel="prefetch" href="/java_blog/assets/timeline.html-DqMJCcGG.js" as="script"><link rel="prefetch" href="/java_blog/assets/posts.html-DMAn0wg6.js" as="script"><link rel="prefetch" href="/java_blog/assets/friendship-link.html-BUOe7KnJ.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-DswOyTAY.js" as="script"><link rel="prefetch" href="/java_blog/assets/2.html-BrsoVW7_.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-C20A6Al_.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-n65vw9l7.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-j4xzxXVx.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-AnjDnkZu.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-CrH6Mx2f.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-B6MrIMPk.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-CfB2Gyrg.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-C95B1VRZ.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-Bvfj1ieH.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-DrNwhDgk.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-CUV_4al3.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-D139rqQG.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-BJeOKJqF.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-BBGC7X3M.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-Cj2WY1vr.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-xc-gK1s2.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-BMYH1vDw.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-D1DUubSf.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-DhVpaFrn.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-B1fpPyw2.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-DGdGLHuV.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-Du_xIyTc.js" as="script"><link rel="prefetch" href="/java_blog/assets/1.html-DjT2r96m.js" as="script"><link rel="prefetch" href="/java_blog/assets/2.html-B-TNoX4M.js" as="script"><link rel="prefetch" href="/java_blog/assets/index.html-D8W_ctz_.js" as="script"><link rel="prefetch" href="/java_blog/assets/api.html-DlRTMNXb.js" as="script"><link rel="prefetch" href="/java_blog/assets/home.html-CtljHrte.js" as="script"><link rel="prefetch" href="/java_blog/assets/plugin.html-XR7K_YjP.js" as="script"><link rel="prefetch" href="/java_blog/assets/theme.html-59qJJ3y-.js" as="script"><link rel="prefetch" href="/java_blog/assets/map.html-BTeGExmW.js" as="script"><link rel="prefetch" href="/java_blog/assets/tools.html-BiA6J-eb.js" as="script"><link rel="prefetch" href="/java_blog/assets/base09.html-C3j29M8o.js" as="script"><link rel="prefetch" href="/java_blog/assets/base01.html-Co2T9Z3O.js" as="script"><link rel="prefetch" href="/java_blog/assets/base02.html-B1K9VT2L.js" as="script"><link rel="prefetch" href="/java_blog/assets/base03.html-pgU2EpZM.js" as="script"><link rel="prefetch" href="/java_blog/assets/base04.html-BfFsuB7f.js" as="script"><link rel="prefetch" href="/java_blog/assets/base05.html-iiV4oY0Z.js" as="script"><link rel="prefetch" href="/java_blog/assets/base06.html-DovoTWzR.js" as="script"><link rel="prefetch" href="/java_blog/assets/base07.html-Bn6bjH4b.js" as="script"><link rel="prefetch" href="/java_blog/assets/base08.html-TIrkp8gM.js" as="script"><link rel="prefetch" href="/java_blog/assets/base11.html-ayZxJnkm.js" as="script"><link rel="prefetch" href="/java_blog/assets/404.html-By-iQU2o.js" as="script"><link rel="prefetch" href="/java_blog/assets/Valine.min-Dm4Ijz6H.js" as="script"><link rel="prefetch" href="/java_blog/assets/giscus-aTimukGI-CKTvSCx2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container show-series show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/java_blog/icon.svg" alt="Java"><a href="/java_blog/" class="site-name can-hide">Java</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/java_blog/" class="link router-link-active" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="导航"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->导航<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="导航"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->导航<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/java_blog/blogs/docs/guide/tools" class="link" aria-label="工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M23.981 24.433A3.955 3.955 0 0 0 26 25a4.005 4.005 0 0 0 4-4a3.943 3.943 0 0 0-.15-1.023l-2.436 2.437a2 2 0 1 1-2.828-2.828l2.437-2.437A3.95 3.95 0 0 0 26 17a4.005 4.005 0 0 0-4 4a3.954 3.954 0 0 0 .567 2.02L17 28.585L18.414 30z" fill="currentColor"></path><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h8v-2H6V6h4v2h2V6h8v2h2V6h4v8h2V6a2 2 0 0 0-2-2z" fill-rule="evenodd" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->工具<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/java_blog/blogs/docs/guide/map" class="link" aria-label="知识体系"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16 24l-6.09-8.6A8.14 8.14 0 0 1 16 2a8.08 8.08 0 0 1 8 8.13a8.2 8.2 0 0 1-1.8 5.13zm0-20a6.07 6.07 0 0 0-6 6.13a6.19 6.19 0 0 0 1.49 4L16 20.52L20.63 14A6.24 6.24 0 0 0 22 10.13A6.07 6.07 0 0 0 16 4z" fill="currentColor"></path><circle cx="16" cy="9" r="2" fill="currentColor"></circle><path d="M28 12h-2v2h2v14H4V14h2v-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V14a2 2 0 0 0-2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->知识体系<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title--active dropdown-link__title" type="button" aria-label="Java"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M25.7 9.3l-7-7c-.2-.2-.4-.3-.7-.3H8c-1.1 0-2 .9-2 2v24c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-.3-.1-.5-.3-.7zM18 4.4l5.6 5.6H18V4.4zM24 28H8V4h8v6c0 1.1.9 2 2 2h6v16z" fill="currentColor"></path><path d="M10 22h12v2H10z" fill="currentColor"></path><path d="M10 16h12v2H10z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Java<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="Java"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M25.7 9.3l-7-7c-.2-.2-.4-.3-.7-.3H8c-1.1 0-2 .9-2 2v24c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-.3-.1-.5-.3-.7zM18 4.4l5.6 5.6H18V4.4zM24 28H8V4h8v6c0 1.1.9 2 2 2h6v16z" fill="currentColor"></path><path d="M10 22h12v2H10z" fill="currentColor"></path><path d="M10 16h12v2H10z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Java<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->基础<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/base/base01" class="link" aria-label="基础"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->基础<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/base/base02" class="link" aria-label="注释_关键字_字面量_变量_数据类型_标识符_输入输出_运算符"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->注释_关键字_字面量_变量_数据类型_标识符_输入输出_运算符<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/base/base03" class="link" aria-label="流程控制_数组_字符串"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->流程控制_数组_字符串<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/base/base04" class="link" aria-label="集合_包装类_方法_四种引用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->集合_包装类_方法_四种引用<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/base/base05" class="link" aria-label="面向对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->面向对象<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/base/base06" class="link" aria-label="泛型|函数编程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->泛型|函数编程<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/base/base07" class="link" aria-label="异常|注解"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->异常|注解<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->集合体系<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/collections/base08" class="link router-link-active" aria-label="集合体系结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->集合体系结构<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->集合体系<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/java_blog/blogs/docs/Java/IO/base09" class="link" aria-label="JavaIO"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->JavaIO<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><a class="link" href="https://github.com/GZC-02/java_blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->GitHub<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><header class="sub-navbar-container not-open"><span class="nav-item"><div class="toggle-series-button" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div> Series </span></header><!----><!----><div class="theme-main" style=""><aside class="series-container"><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading series-level-1"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:16px;"><!--[-->基础<!--]--></span></span><span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/java_blog/blogs/docs/Java/base/base01" class="link series-item series-item" aria-label="基础"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->基础<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/java_blog/blogs/docs/Java/base/base02" class="link series-item series-item" aria-label="注释_关键字_字面量_变量_数据类型_标识符_输入输出_运算符"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->注释_关键字_字面量_变量_数据类型_标识符_输入输出_运算符<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/java_blog/blogs/docs/Java/base/base03" class="link series-item series-item" aria-label="流程控制_数组_字符串"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->流程控制_数组_字符串<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/java_blog/blogs/docs/Java/base/base04" class="link series-item series-item" aria-label="集合_包装类_方法_四种引用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->集合_包装类_方法_四种引用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/java_blog/blogs/docs/Java/base/base05" class="link series-item series-item" aria-label="面向对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->面向对象<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/java_blog/blogs/docs/Java/base/base06" class="link series-item series-item" aria-label="泛型|函数编程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->泛型|函数编程<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/java_blog/blogs/docs/Java/base/base07" class="link series-item series-item" aria-label="异常|注解"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->异常|注解<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading series-level-1 active"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:16px;"><!--[-->集合体系<!--]--></span></span><span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/java_blog/blogs/docs/Java/collections/base08" class="link router-link-active series-item series-item" aria-label="集合体系结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->集合体系结构<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading series-level-1"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:16px;"><!--[-->集合体系<!--]--></span></span><span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/java_blog/blogs/docs/Java/IO/base09" class="link series-item series-item" aria-label="JavaIO"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->JavaIO<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">集合体系结构</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->gzc<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2024/09/28<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/java_blog/categories/Java/1.html" class="">Java</a><!--]--><!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/java_blog/tags/jihetixijiegou/1.html" class="">集合体系结构</a><!--]--><!--]--></span></span><!----></div><div class="theme-reco-md-content"><div><h2 id="集合体系结构" tabindex="-1"><a class="header-anchor" href="#集合体系结构"><span>集合体系结构</span></a></h2><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726665524007-aea7bc67-01cf-43c8-878f-a3c56cd1e147.png"><p><strong>java 集合框架分为两大支线</strong></p><!----><ul><li><!---->**<!---->**<!---->**<!---->**<!---->**<!---->**<!----></li><li><!---->**<!---->**<!---->**<!---->**<!---->**<!---->**<!----></li><li><!----><!----><!----><!----><!----><!----><!----></li></ul><!----><h2 id="list" tabindex="-1"><a class="header-anchor" href="#list"><span>List</span></a></h2><!----><h3 id="arraylist" tabindex="-1"><a class="header-anchor" href="#arraylist"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个集合</span>
<span class="line">ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span>
<span class="line">// 添加元素</span>
<span class="line">list.add(&quot;王二&quot;);</span>
<span class="line">list.add(&quot;沉默&quot;);</span>
<span class="line">list.add(&quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历集合 for 循环</span>
<span class="line">for (int i = 0; i &lt; list.size(); i++) {</span>
<span class="line">    String s = list.get(i);</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line">// 遍历集合 for each</span>
<span class="line">for (String s : list) {</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">list.remove(1);</span>
<span class="line">// 遍历集合</span>
<span class="line">for (String s : list) {</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 修改元素</span>
<span class="line">list.set(1, &quot;王二狗&quot;);</span>
<span class="line">// 遍历集合</span>
<span class="line">for (String s : list) {</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><ul><li><!---->**<!---->**<!----></li><li><!---->**<!---->**<!---->**<!---->**<!----></li><li><!----></li></ul><!----><!----><h3 id="linkedlist" tabindex="-1"><a class="header-anchor" href="#linkedlist"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个集合</span>
<span class="line">LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();</span>
<span class="line">// 添加元素</span>
<span class="line">list.add(&quot;王二&quot;);</span>
<span class="line">list.add(&quot;沉默&quot;);</span>
<span class="line">list.add(&quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历集合 for 循环</span>
<span class="line">for (int i = 0; i &lt; list.size(); i++) {</span>
<span class="line">    String s = list.get(i);</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line">// 遍历集合 for each</span>
<span class="line">for (String s : list) {</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">list.remove(1);</span>
<span class="line">// 遍历集合</span>
<span class="line">for (String s : list) {</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 修改元素</span>
<span class="line">list.set(1, &quot;王二狗&quot;);</span>
<span class="line">// 遍历集合</span>
<span class="line">for (String s : list) {</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><ul><li><!---->**<!---->**<!---->**<!---->**<!---->**<!---->**<!----></li><li><!---->**<!---->**<!----></li><li><!---->**<!---->**<!----></li></ul><h3 id="vector-和-stack" tabindex="-1"><a class="header-anchor" href="#vector-和-stack"><span><!----></span></a></h3><!---->**<!---->**<!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public synchronized boolean add(E e) {</span>
<span class="line">    elementData[elementCount++] = e;</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->[<!---->](https://javabetter.cn/string/builder-buffer.html)<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726665868134-6a53698b-5b79-4b8d-96c1-0d97c124f6a1.png"><!---->**<!---->**<!---->**<!---->**<!----><!----><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token class-name">E</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">E</span> obj<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    obj <span class="token operator">=</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">removeElementAt</span><span class="token punctuation">(</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> obj<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">EmptyStackException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token function">elementAt</span><span class="token punctuation">(</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h4 id="" tabindex="-1"><a class="header-anchor" href="#"><span></span></a></h4><h2 id="set" tabindex="-1"><a class="header-anchor" href="#set"><span>Set</span></a></h2><!----><h3 id="hashset" tabindex="-1"><a class="header-anchor" href="#hashset"><span><!----></span></a></h3><!---->**<!---->**<!---->**<!---->**<!----><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Dummy value to associate with an Object in the backing Map</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token constant">PRESENT</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token constant">PRESENT</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">==</span><span class="token constant">PRESENT</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个新的HashSet</span>
<span class="line">HashSet&lt;String&gt; set = new HashSet&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素</span>
<span class="line">set.add(&quot;沉默&quot;);</span>
<span class="line">set.add(&quot;王二&quot;);</span>
<span class="line">set.add(&quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 输出HashSet的元素个数</span>
<span class="line">System.out.println(&quot;HashSet size: &quot; + set.size()); // output: 3</span>
<span class="line"></span>
<span class="line">// 判断元素是否存在于HashSet中</span>
<span class="line">boolean containsWanger = set.contains(&quot;王二&quot;);</span>
<span class="line">System.out.println(&quot;Does set contain &#39;王二&#39;? &quot; + containsWanger); // output: true</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">boolean removeWanger = set.remove(&quot;王二&quot;);</span>
<span class="line">System.out.println(&quot;Removed &#39;王二&#39;? &quot; + removeWanger); // output: true</span>
<span class="line"></span>
<span class="line">// 修改元素，需要先删除后添加</span>
<span class="line">boolean removeChenmo = set.remove(&quot;沉默&quot;);</span>
<span class="line">boolean addBuChenmo = set.add(&quot;不沉默&quot;);</span>
<span class="line">System.out.println(&quot;Modified set? &quot; + (removeChenmo &amp;&amp; addBuChenmo)); // output: true</span>
<span class="line"></span>
<span class="line">// 输出修改后的HashSet</span>
<span class="line">System.out.println(&quot;HashSet after modification: &quot; + set); // output: [陈清扬, 不沉默]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 HashSet 对象</span>
<span class="line">HashSet&lt;String&gt; set = new HashSet&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素</span>
<span class="line">set.add(&quot;沉默&quot;);</span>
<span class="line">set.add(&quot;王二&quot;);</span>
<span class="line">set.add(&quot;陈清扬&quot;);</span>
<span class="line">set.add(&quot;沉默&quot;);</span>
<span class="line"></span>
<span class="line">// 输出 HashSet 的元素个数</span>
<span class="line">System.out.println(&quot;HashSet size: &quot; + set.size()); // output: 3</span>
<span class="line"></span>
<span class="line">// 遍历 HashSet</span>
<span class="line">for (String s : set) {</span>
<span class="line">    System.out.println(s);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->[<!---->](https://javabetter.cn/collection/hashmap.html)<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!---->[<!---->](https://paicoding.com/column/7/15)<!----><h3 id="linkedhashset" tabindex="-1"><a class="header-anchor" href="#linkedhashset"><span><!----></span></a></h3><!----><!---->[<!---->](https://javabetter.cn/collection/linkedhashmap.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public LinkedHashSet() {</span>
<span class="line">    super(16, .75f, true);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://javabetter.cn/oo/this-super.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">HashSet(int initialCapacity, float loadFactor, boolean dummy) {</span>
<span class="line">    map = new LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->[<!---->](https://javabetter.cn/collection/linkedhashmap.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">LinkedHashSet&lt;String&gt; set = new LinkedHashSet&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素</span>
<span class="line">set.add(&quot;沉默&quot;);</span>
<span class="line">set.add(&quot;王二&quot;);</span>
<span class="line">set.add(&quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">set.remove(&quot;王二&quot;);</span>
<span class="line"></span>
<span class="line">// 修改元素</span>
<span class="line">set.remove(&quot;沉默&quot;);</span>
<span class="line">set.add(&quot;沉默的力量&quot;);</span>
<span class="line"></span>
<span class="line">// 查找元素</span>
<span class="line">boolean hasChenQingYang = set.contains(&quot;陈清扬&quot;);</span>
<span class="line">System.out.println(&quot;set包含陈清扬吗？&quot; + hasChenQingYang);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><h3 id="treeset" tabindex="-1"><a class="header-anchor" href="#treeset"><span><!----></span></a></h3><!----><!---->[<!---->](https://javabetter.cn/collection/treemap.html)<!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 TreeSet 对象</span>
<span class="line">TreeSet&lt;String&gt; set = new TreeSet&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素</span>
<span class="line">set.add(&quot;沉默&quot;);</span>
<span class="line">set.add(&quot;王二&quot;);</span>
<span class="line">set.add(&quot;陈清扬&quot;);</span>
<span class="line">System.out.println(set); // 输出 [沉默, 王二, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">set.remove(&quot;王二&quot;);</span>
<span class="line">System.out.println(set); // 输出 [沉默, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 修改元素：TreeSet 中的元素不支持直接修改，需要先删除再添加</span>
<span class="line">set.remove(&quot;陈清扬&quot;);</span>
<span class="line">set.add(&quot;陈青阳&quot;);</span>
<span class="line">System.out.println(set); // 输出 [沉默, 陈青阳]</span>
<span class="line"></span>
<span class="line">// 查找元素</span>
<span class="line">System.out.println(set.contains(&quot;沉默&quot;)); // 输出 true</span>
<span class="line">System.out.println(set.contains(&quot;王二&quot;)); // 输出 false</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><!----><!----><h2 id="queue" tabindex="-1"><a class="header-anchor" href="#queue"><span><!----></span></a></h2><!----><h3 id="arraydeque" tabindex="-1"><a class="header-anchor" href="#arraydeque"><span><!----></span></a></h3><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726665926214-a23b14a7-d80e-4581-af43-aca1189a9896.png"><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个ArrayDeque</span>
<span class="line">ArrayDeque&lt;String&gt; deque = new ArrayDeque&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素</span>
<span class="line">deque.add(&quot;沉默&quot;);</span>
<span class="line">deque.add(&quot;王二&quot;);</span>
<span class="line">deque.add(&quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">deque.remove(&quot;王二&quot;);</span>
<span class="line"></span>
<span class="line">// 修改元素</span>
<span class="line">deque.remove(&quot;沉默&quot;);</span>
<span class="line">deque.add(&quot;沉默的力量&quot;);</span>
<span class="line"></span>
<span class="line">// 查找元素</span>
<span class="line">boolean hasChenQingYang = deque.contains(&quot;陈清扬&quot;);</span>
<span class="line">System.out.println(&quot;deque包含陈清扬吗？&quot; + hasChenQingYang);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="linkedlist-1" tabindex="-1"><a class="header-anchor" href="#linkedlist-1"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class LinkedList&lt;E&gt;</span>
<span class="line">    extends AbstractSequentialList&lt;E&gt;</span>
<span class="line">    implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</span>
<span class="line">{}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li><li><!----></li><li><!----></li></ul><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 LinkedList 对象</span>
<span class="line">LinkedList&lt;String&gt; queue = new LinkedList&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素</span>
<span class="line">queue.offer(&quot;沉默&quot;);</span>
<span class="line">queue.offer(&quot;王二&quot;);</span>
<span class="line">queue.offer(&quot;陈清扬&quot;);</span>
<span class="line">System.out.println(queue); // 输出 [沉默, 王二, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">queue.poll();</span>
<span class="line">System.out.println(queue); // 输出 [王二, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 修改元素：LinkedList 中的元素不支持直接修改，需要先删除再添加</span>
<span class="line">String first = queue.poll();</span>
<span class="line">queue.offer(&quot;王大二&quot;);</span>
<span class="line">System.out.println(queue); // 输出 [陈清扬, 王大二]</span>
<span class="line"></span>
<span class="line">// 查找元素：LinkedList 中的元素可以使用 get() 方法进行查找</span>
<span class="line">System.out.println(queue.get(0)); // 输出 陈清扬</span>
<span class="line">System.out.println(queue.contains(&quot;沉默&quot;)); // 输出 false</span>
<span class="line"></span>
<span class="line">// 查找元素：使用迭代器的方式查找陈清扬</span>
<span class="line">// 使用迭代器依次遍历元素并查找</span>
<span class="line">Iterator&lt;String&gt; iterator = queue.iterator();</span>
<span class="line">while (iterator.hasNext()) {</span>
<span class="line">    String element = iterator.next();</span>
<span class="line">    if (element.equals(&quot;陈清扬&quot;)) {</span>
<span class="line">        System.out.println(&quot;找到了：&quot; + element);</span>
<span class="line">        break;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h3 id="priorityqueue" tabindex="-1"><a class="header-anchor" href="#priorityqueue"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 PriorityQueue 对象</span>
<span class="line">PriorityQueue&lt;String&gt; queue = new PriorityQueue&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素</span>
<span class="line">queue.offer(&quot;沉默&quot;);</span>
<span class="line">queue.offer(&quot;王二&quot;);</span>
<span class="line">queue.offer(&quot;陈清扬&quot;);</span>
<span class="line">System.out.println(queue); // 输出 [沉默, 王二, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">queue.poll();</span>
<span class="line">System.out.println(queue); // 输出 [王二, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 修改元素：PriorityQueue 不支持直接修改元素，需要先删除再添加</span>
<span class="line">String first = queue.poll();</span>
<span class="line">queue.offer(&quot;张三&quot;);</span>
<span class="line">System.out.println(queue); // 输出 [张三, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 查找元素：PriorityQueue 不支持随机访问元素，只能访问队首元素</span>
<span class="line">System.out.println(queue.peek()); // 输出 张三</span>
<span class="line">System.out.println(queue.contains(&quot;陈清扬&quot;)); // 输出 true</span>
<span class="line"></span>
<span class="line">// 通过 for 循环的方式查找陈清扬</span>
<span class="line">for (String element : queue) {</span>
<span class="line">    if (element.equals(&quot;陈清扬&quot;)) {</span>
<span class="line">        System.out.println(&quot;找到了：&quot; + element);</span>
<span class="line">        break;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->[<!---->](https://javabetter.cn/basic-extra-meal/comparable-omparator.html)<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">import java.util.Comparator;</span>
<span class="line">import java.util.PriorityQueue;</span>
<span class="line"></span>
<span class="line">class Student {</span>
<span class="line">    private String name;</span>
<span class="line">    private int chineseScore;</span>
<span class="line">    private int mathScore;</span>
<span class="line"></span>
<span class="line">    public Student(String name, int chineseScore, int mathScore) {</span>
<span class="line">        this.name = name;</span>
<span class="line">        this.chineseScore = chineseScore;</span>
<span class="line">        this.mathScore = mathScore;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    public String getName() {</span>
<span class="line">        return name;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    public int getChineseScore() {</span>
<span class="line">        return chineseScore;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    public int getMathScore() {</span>
<span class="line">        return mathScore;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    @Override</span>
<span class="line">    public String toString() {</span>
<span class="line">        return &quot;Student{&quot; +</span>
<span class="line">                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +</span>
<span class="line">                &quot;, 总成绩=&quot; + (chineseScore + mathScore) +</span>
<span class="line">                &#39;}&#39;;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">class StudentComparator implements Comparator&lt;Student&gt; {</span>
<span class="line">    @Override</span>
<span class="line">    public int compare(Student s1, Student s2) {</span>
<span class="line">        // 比较总成绩</span>
<span class="line">        return Integer.compare(s2.getChineseScore() + s2.getMathScore(),</span>
<span class="line">                s1.getChineseScore() + s1.getMathScore());</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">public class PriorityQueueComparatorExample {</span>
<span class="line"></span>
<span class="line">    public static void main(String[] args) {</span>
<span class="line">        // 创建一个按照总成绩排序的优先级队列</span>
<span class="line">        PriorityQueue&lt;Student&gt; queue = new PriorityQueue&lt;&gt;(new StudentComparator());</span>
<span class="line"></span>
<span class="line">        // 添加元素</span>
<span class="line">        queue.offer(new Student(&quot;王二&quot;, 80, 90));</span>
<span class="line">        System.out.println(queue);</span>
<span class="line">        queue.offer(new Student(&quot;陈清扬&quot;, 95, 95));</span>
<span class="line">        System.out.println(queue);</span>
<span class="line">        queue.offer(new Student(&quot;小驼铃&quot;, 90, 95));</span>
<span class="line">        System.out.println(queue);</span>
<span class="line">        queue.offer(new Student(&quot;沉默&quot;, 90, 80));</span>
<span class="line">        while (!queue.isEmpty()) {</span>
<span class="line">            System.out.print(queue.poll() + &quot; &quot;);</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">[Student{name=&#39;王二&#39;, 总成绩=170}]</span>
<span class="line">[Student{name=&#39;陈清扬&#39;, 总成绩=190}, Student{name=&#39;王二&#39;, 总成绩=170}]</span>
<span class="line">[Student{name=&#39;陈清扬&#39;, 总成绩=190}, Student{name=&#39;王二&#39;, 总成绩=170}, Student{name=&#39;小驼铃&#39;, 总成绩=185}]</span>
<span class="line">Student{name=&#39;陈清扬&#39;, 总成绩=190} Student{name=&#39;小驼铃&#39;, 总成绩=185} Student{name=&#39;沉默&#39;, 总成绩=170} Student{name=&#39;王二&#39;, 总成绩=170}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->[<!---->](https://javabetter.cn/collection/PriorityQueue.html)<!----><h2 id="map" tabindex="-1"><a class="header-anchor" href="#map"><span><!----></span></a></h2><!----><h3 id="hashmap" tabindex="-1"><a class="header-anchor" href="#hashmap"><span><!----></span></a></h3><!---->[<!---->](https://javabetter.cn/collection/hashmap.html)<!----><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 HashMap 对象</span>
<span class="line">HashMap&lt;String, String&gt; hashMap = new HashMap&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加键值对</span>
<span class="line">hashMap.put(&quot;沉默&quot;, &quot;cenzhong&quot;);</span>
<span class="line">hashMap.put(&quot;王二&quot;, &quot;wanger&quot;);</span>
<span class="line">hashMap.put(&quot;陈清扬&quot;, &quot;chenqingyang&quot;);</span>
<span class="line"></span>
<span class="line">// 获取指定键的值</span>
<span class="line">String value1 = hashMap.get(&quot;沉默&quot;);</span>
<span class="line">System.out.println(&quot;沉默对应的值为：&quot; + value1);</span>
<span class="line"></span>
<span class="line">// 修改键对应的值</span>
<span class="line">hashMap.put(&quot;沉默&quot;, &quot;chenmo&quot;);</span>
<span class="line">String value2 = hashMap.get(&quot;沉默&quot;);</span>
<span class="line">System.out.println(&quot;修改后沉默对应的值为：&quot; + value2);</span>
<span class="line"></span>
<span class="line">// 删除指定键的键值对</span>
<span class="line">hashMap.remove(&quot;王二&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历 HashMap</span>
<span class="line">for (String key : hashMap.keySet()) {</span>
<span class="line">    String value = hashMap.get(key);</span>
<span class="line">    System.out.println(key + &quot; 对应的值为：&quot; + value);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="linkedhashmap" tabindex="-1"><a class="header-anchor" href="#linkedhashmap"><span><!----></span></a></h3><!----><!---->[<!---->](https://javabetter.cn/collection/linkedhashmap.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 LinkedHashMap，插入的键值对为 沉默 王二 陈清扬</span>
<span class="line">LinkedHashMap&lt;String, String&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();</span>
<span class="line">linkedHashMap.put(&quot;沉默&quot;, &quot;cenzhong&quot;);</span>
<span class="line">linkedHashMap.put(&quot;王二&quot;, &quot;wanger&quot;);</span>
<span class="line">linkedHashMap.put(&quot;陈清扬&quot;, &quot;chenqingyang&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历 LinkedHashMap</span>
<span class="line">for (String key : linkedHashMap.keySet()) {</span>
<span class="line">    String value = linkedHashMap.get(key);</span>
<span class="line">    System.out.println(key + &quot; 对应的值为：&quot; + value);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">沉默 对应的值为：cenzhong</span>
<span class="line">王二 对应的值为：wanger</span>
<span class="line">陈清扬 对应的值为：chenqingyang</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个HashMap，插入的键值对为 沉默 王二 陈清扬</span>
<span class="line">HashMap&lt;String, String&gt; hashMap = new HashMap&lt;&gt;();</span>
<span class="line">hashMap.put(&quot;沉默&quot;, &quot;cenzhong&quot;);</span>
<span class="line">hashMap.put(&quot;王二&quot;, &quot;wanger&quot;);</span>
<span class="line">hashMap.put(&quot;陈清扬&quot;, &quot;chenqingyang&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历 HashMap</span>
<span class="line">for (String key : hashMap.keySet()) {</span>
<span class="line">    String value = hashMap.get(key);</span>
<span class="line">    System.out.println(key + &quot; 对应的值为：&quot; + value);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">沉默 对应的值为：cenzhong</span>
<span class="line">陈清扬 对应的值为：chenqingyang</span>
<span class="line">王二 对应的值为：wanger</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h3 id="treemap" tabindex="-1"><a class="header-anchor" href="#treemap"><span><!----></span></a></h3><p><a href="https://javabetter.cn/collection/treemap.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 TreeMap 对象</span>
<span class="line">Map&lt;String, String&gt; treeMap = new TreeMap&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 向 TreeMap 中添加键值对</span>
<span class="line">treeMap.put(&quot;沉默&quot;, &quot;cenzhong&quot;);</span>
<span class="line">treeMap.put(&quot;王二&quot;, &quot;wanger&quot;);</span>
<span class="line">treeMap.put(&quot;陈清扬&quot;, &quot;chenqingyang&quot;);</span>
<span class="line"></span>
<span class="line">// 查找键值对</span>
<span class="line">String name = &quot;沉默&quot;;</span>
<span class="line">if (treeMap.containsKey(name)) {</span>
<span class="line">    System.out.println(&quot;找到了 &quot; + name + &quot;: &quot; + treeMap.get(name));</span>
<span class="line">} else {</span>
<span class="line">    System.out.println(&quot;没有找到 &quot; + name);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 修改键值对</span>
<span class="line">name = &quot;王二&quot;;</span>
<span class="line">if (treeMap.containsKey(name)) {</span>
<span class="line">    System.out.println(&quot;修改前的 &quot; + name + &quot;: &quot; + treeMap.get(name));</span>
<span class="line">    treeMap.put(name, &quot;newWanger&quot;);</span>
<span class="line">    System.out.println(&quot;修改后的 &quot; + name + &quot;: &quot; + treeMap.get(name));</span>
<span class="line">} else {</span>
<span class="line">    System.out.println(&quot;没有找到 &quot; + name);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 删除键值对</span>
<span class="line">name = &quot;陈清扬&quot;;</span>
<span class="line">if (treeMap.containsKey(name)) {</span>
<span class="line">    System.out.println(&quot;删除前的 &quot; + name + &quot;: &quot; + treeMap.get(name));</span>
<span class="line">    treeMap.remove(name);</span>
<span class="line">    System.out.println(&quot;删除后的 &quot; + name + &quot;: &quot; + treeMap.get(name));</span>
<span class="line">} else {</span>
<span class="line">    System.out.println(&quot;没有找到 &quot; + name);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 遍历 TreeMap</span>
<span class="line">for (Map.Entry&lt;String, String&gt; entry : treeMap.entrySet()) {</span>
<span class="line">    System.out.println(entry.getKey() + &quot;: &quot; + entry.getValue());</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 TreeMap 对象</span>
<span class="line">Map&lt;String, String&gt; treeMap = new TreeMap&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 向 TreeMap 中添加键值对</span>
<span class="line">treeMap.put(&quot;c&quot;, &quot;cat&quot;);</span>
<span class="line">treeMap.put(&quot;a&quot;, &quot;apple&quot;);</span>
<span class="line">treeMap.put(&quot;b&quot;, &quot;banana&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历 TreeMap</span>
<span class="line">for (Map.Entry&lt;String, String&gt; entry : treeMap.entrySet()) {</span>
<span class="line">    System.out.println(entry.getKey() + &quot;: &quot; + entry.getValue());</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">a: apple</span>
<span class="line">b: banana</span>
<span class="line">c: cat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h2 id="arraylist-详解-附源码" tabindex="-1"><a class="header-anchor" href="#arraylist-详解-附源码"><span>ArrayList 详解（附源码）</span></a></h2><h3 id="创建-arraylist" tabindex="-1"><a class="header-anchor" href="#创建-arraylist"><span>创建 ArrayList</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!---->**<!---->**`**<!---->**`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public ArrayList() {</span>
<span class="line">    this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->**<!---->**<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; alist = new ArrayList&lt;&gt;(20);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><h3 id="向-arraylist-中添加元素" tabindex="-1"><a class="header-anchor" href="#向-arraylist-中添加元素"><span>向 ArrayList 中添加元素</span></a></h3><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">alist.add(&quot;沉默王二&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">堆栈过程图示：</span>
<span class="line">add(element)</span>
<span class="line">└── if (size == elementData.length) // 判断是否需要扩容</span>
<span class="line">    ├── grow(minCapacity) // 扩容</span>
<span class="line">    │   └── newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1) // 计算新的数组容量</span>
<span class="line">    │   └── Arrays.copyOf(elementData, newCapacity) // 创建新的数组</span>
<span class="line">    ├── elementData[size++] = element; // 添加新元素</span>
<span class="line">    └── return true; // 添加成功</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 将指定元素添加到 ArrayList 的末尾</span>
<span class="line"> * @param e 要添加的元素</span>
<span class="line"> * @return 添加成功返回 true</span>
<span class="line"> */</span>
<span class="line">public boolean add(E e) {</span>
<span class="line">    ensureCapacityInternal(size + 1);  // 确保 ArrayList 能够容纳新的元素</span>
<span class="line">    elementData[size++] = e; // 在 ArrayList 的末尾添加指定元素</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 确保 ArrayList 能够容纳指定容量的元素</span>
<span class="line"> * @param minCapacity 指定容量的最小值</span>
<span class="line"> */</span>
<span class="line">private void ensureCapacityInternal(int minCapacity) {</span>
<span class="line">    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) { // 如果 elementData 还是默认的空数组</span>
<span class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); // 使用 DEFAULT_CAPACITY 和指定容量的最小值中的较大值</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    ensureExplicitCapacity(minCapacity); // 确保容量能够容纳指定容量的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----><!---->`<!---->`</li><li><!----><!---->`<!---->`</li></ul><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private static final int DEFAULT_CAPACITY = 10;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 检查并确保集合容量足够，如果需要则增加集合容量。</span>
<span class="line"> *</span>
<span class="line"> * @param minCapacity 所需最小容量</span>
<span class="line"> */</span>
<span class="line">private void ensureExplicitCapacity(int minCapacity) {</span>
<span class="line">    // 检查是否超出了数组范围，确保不会溢出</span>
<span class="line">    if (minCapacity - elementData.length &gt; 0)</span>
<span class="line">        // 如果需要增加容量，则调用 grow 方法</span>
<span class="line">        grow(minCapacity);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li></ul><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 扩容 ArrayList 的方法，确保能够容纳指定容量的元素</span>
<span class="line"> * @param minCapacity 指定容量的最小值</span>
<span class="line"> */</span>
<span class="line">private void grow(int minCapacity) {</span>
<span class="line">    // 检查是否会导致溢出，oldCapacity 为当前数组长度</span>
<span class="line">    int oldCapacity = elementData.length;</span>
<span class="line">    int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); // 扩容至原来的1.5倍</span>
<span class="line">    if (newCapacity - minCapacity &lt; 0) // 如果还是小于指定容量的最小值</span>
<span class="line">        newCapacity = minCapacity; // 直接扩容至指定容量的最小值</span>
<span class="line">    if (newCapacity - MAX_ARRAY_SIZE &gt; 0) // 如果超出了数组的最大长度</span>
<span class="line">        newCapacity = hugeCapacity(minCapacity); // 扩容至数组的最大长度</span>
<span class="line">    // 将当前数组复制到一个新数组中，长度为 newCapacity</span>
<span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li></ul><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public boolean add(E e) {</span>
<span class="line">    ensureCapacityInternal(size + 1);</span>
<span class="line">    elementData[size++] = e;</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><ul><li><!----></li><li><!----></li></ul><!----><!----><!---->`<!---->`<!----><p><strong><!----></strong><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">alist.add(&quot;沉默王二&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">堆栈过程图示：</span>
<span class="line">add(element)</span>
<span class="line">└── if (size == elementData.length) // 判断是否需要扩容</span>
<span class="line">    ├── grow(minCapacity) // 扩容</span>
<span class="line">    │   └── newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1) // 计算新的数组容量</span>
<span class="line">    │   └── Arrays.copyOf(elementData, newCapacity) // 创建新的数组</span>
<span class="line">    ├── elementData[size++] = element; // 添加新元素</span>
<span class="line">    └── return true; // 添加成功</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 将指定元素添加到 ArrayList 的末尾</span>
<span class="line"> * @param e 要添加的元素</span>
<span class="line"> * @return 添加成功返回 true</span>
<span class="line"> */</span>
<span class="line">public boolean add(E e) {</span>
<span class="line">    ensureCapacityInternal(size + 1);  // 确保 ArrayList 能够容纳新的元素</span>
<span class="line">    elementData[size++] = e; // 在 ArrayList 的末尾添加指定元素</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 确保 ArrayList 能够容纳指定容量的元素</span>
<span class="line"> * @param minCapacity 指定容量的最小值</span>
<span class="line"> */</span>
<span class="line">private void ensureCapacityInternal(int minCapacity) {</span>
<span class="line">    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) { // 如果 elementData 还是默认的空数组</span>
<span class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); // 使用 DEFAULT_CAPACITY 和指定容量的最小值中的较大值</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    ensureExplicitCapacity(minCapacity); // 确保容量能够容纳指定容量的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----><!---->`<!---->`</li><li><!----><!---->`<!---->`</li></ul><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private static final int DEFAULT_CAPACITY = 10;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 检查并确保集合容量足够，如果需要则增加集合容量。</span>
<span class="line"> *</span>
<span class="line"> * @param minCapacity 所需最小容量</span>
<span class="line"> */</span>
<span class="line">private void ensureExplicitCapacity(int minCapacity) {</span>
<span class="line">    // 检查是否超出了数组范围，确保不会溢出</span>
<span class="line">    if (minCapacity - elementData.length &gt; 0)</span>
<span class="line">        // 如果需要增加容量，则调用 grow 方法</span>
<span class="line">        grow(minCapacity);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li></ul><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 扩容 ArrayList 的方法，确保能够容纳指定容量的元素</span>
<span class="line"> * @param minCapacity 指定容量的最小值</span>
<span class="line"> */</span>
<span class="line">private void grow(int minCapacity) {</span>
<span class="line">    // 检查是否会导致溢出，oldCapacity 为当前数组长度</span>
<span class="line">    int oldCapacity = elementData.length;</span>
<span class="line">    int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); // 扩容至原来的1.5倍</span>
<span class="line">    if (newCapacity - minCapacity &lt; 0) // 如果还是小于指定容量的最小值</span>
<span class="line">        newCapacity = minCapacity; // 直接扩容至指定容量的最小值</span>
<span class="line">    if (newCapacity - MAX_ARRAY_SIZE &gt; 0) // 如果超出了数组的最大长度</span>
<span class="line">        newCapacity = hugeCapacity(minCapacity); // 扩容至数组的最大长度</span>
<span class="line">    // 将当前数组复制到一个新数组中，长度为 newCapacity</span>
<span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li></ul><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public boolean add(E e) {</span>
<span class="line">    ensureCapacityInternal(size + 1);</span>
<span class="line">    elementData[size++] = e;</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><ul><li><!----></li><li><!----></li></ul><!----><!----><!---->`<!---->`<!----><!----><!----><h3 id="右移操作符" tabindex="-1"><a class="header-anchor" href="#右移操作符"><span>右移操作符</span></a></h3><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!---->**<!---->**<!----><!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><!----><!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!---->**<!---->**<!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!---->`<!---->`<!----><!----><!----><!----><!----><!---->`<!---->`<!----><!----><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726666819842-54c35d16-2cc6-478a-88f3-ccf179250c66.png"><h3 id="向指定-arraylist-位置添加元素" tabindex="-1"><a class="header-anchor" href="#向指定-arraylist-位置添加元素"><span>向指定 ArrayList 位置添加元素</span></a></h3><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">alist.add(0, &quot;沉默王三&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;add(int index, E element)&lt;/font&gt;</code><!----><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 在指定位置插入一个元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index   要插入元素的位置</span>
<span class="line"> * @param element 要插入的元素</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引超出范围，则抛出此异常</span>
<span class="line"> */</span>
<span class="line">public void add(int index, E element) {</span>
<span class="line">    rangeCheckForAdd(index); // 检查索引是否越界</span>
<span class="line"></span>
<span class="line">    ensureCapacityInternal(size + 1);  // 确保容量足够，如果需要扩容就扩容</span>
<span class="line">    System.arraycopy(elementData, index, elementData, index + 1,</span>
<span class="line">            size - index); // 将 index 及其后面的元素向后移动一位</span>
<span class="line">    elementData[index] = element; // 将元素插入到指定位置</span>
<span class="line">    size++; // 元素个数加一</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;add(int index, E element)&lt;/font&gt;</code><!----><a href="https://javabetter.cn/oo/native-method.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----><code>**&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;System.arraycopy()&lt;/font&gt;**</code><!----><strong><!----></strong><!----></p><!----><!---->**<!---->**<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">System.arraycopy(Object src, int srcPos, Object dest, int destPos, int length);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">System.arraycopy(elementData, index, elementData, index + 1, size - index);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><!----></li><li><!----></li><li><!----></li><li><!----></li><li><!----></li></ul><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726666870523-dce8f2fe-4588-4b8e-b839-0b022811f465.png"><h3 id="更新-arraylist-中的元素" tabindex="-1"><a class="header-anchor" href="#更新-arraylist-中的元素"><span><!----></span></a></h3><!---->**<!---->**<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">alist.set(0, &quot;沉默王四&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 用指定元素替换指定位置的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index   要替换的元素的索引</span>
<span class="line"> * @param element 要存储在指定位置的元素</span>
<span class="line"> * @return 先前在指定位置的元素</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引超出范围，则抛出此异常</span>
<span class="line"> */</span>
<span class="line">public E set(int index, E element) {</span>
<span class="line">    rangeCheck(index); // 检查索引是否越界</span>
<span class="line"></span>
<span class="line">    E oldValue = elementData(index); // 获取原来在指定位置上的元素</span>
<span class="line">    elementData[index] = element; // 将新元素替换到指定位置上</span>
<span class="line">    return oldValue; // 返回原来在指定位置上的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h3 id="删除-arraylist-中的元素" tabindex="-1"><a class="header-anchor" href="#删除-arraylist-中的元素"><span><!----></span></a></h3><!---->**<!---->**<!----><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove(int index)&lt;/font&gt;</code><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove(Object o)&lt;/font&gt;</code><!----><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">alist.remove(1);</span>
<span class="line">alist.remove(&quot;沉默王四&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 删除指定位置的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要删除的元素的索引</span>
<span class="line"> * @return 先前在指定位置的元素</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引超出范围，则抛出此异常</span>
<span class="line"> */</span>
<span class="line">public E remove(int index) {</span>
<span class="line">    rangeCheck(index); // 检查索引是否越界</span>
<span class="line"></span>
<span class="line">    E oldValue = elementData(index); // 获取要删除的元素</span>
<span class="line"></span>
<span class="line">    int numMoved = size - index - 1; // 计算需要移动的元素个数</span>
<span class="line">    if (numMoved &gt; 0) // 如果需要移动元素，就用 System.arraycopy 方法实现</span>
<span class="line">        System.arraycopy(elementData, index+1, elementData, index,</span>
<span class="line">                numMoved);</span>
<span class="line">    elementData[--size] = null; // 将数组末尾的元素置为 null，让 GC 回收该元素占用的空间</span>
<span class="line"></span>
<span class="line">    return oldValue; // 返回被删除的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 删除列表中第一次出现的指定元素（如果存在）。</span>
<span class="line"> *</span>
<span class="line"> * @param o 要删除的元素</span>
<span class="line"> * @return 如果列表包含指定元素，则返回 true；否则返回 false</span>
<span class="line"> */</span>
<span class="line">public boolean remove(Object o) {</span>
<span class="line">    if (o == null) { // 如果要删除的元素是 null</span>
<span class="line">        for (int index = 0; index &lt; size; index++) // 遍历列表</span>
<span class="line">            if (elementData[index] == null) { // 如果找到了 null 元素</span>
<span class="line">                fastRemove(index); // 调用 fastRemove 方法快速删除元素</span>
<span class="line">                return true; // 返回 true，表示成功删除元素</span>
<span class="line">            }</span>
<span class="line">    } else { // 如果要删除的元素不是 null</span>
<span class="line">        for (int index = 0; index &lt; size; index++) // 遍历列表</span>
<span class="line">            if (o.equals(elementData[index])) { // 如果找到了要删除的元素</span>
<span class="line">                fastRemove(index); // 调用 fastRemove 方法快速删除元素</span>
<span class="line">                return true; // 返回 true，表示成功删除元素</span>
<span class="line">            }</span>
<span class="line">    }</span>
<span class="line">    return false; // 如果找不到要删除的元素，则返回 false</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><ul><li><!----></li><li><!---->[<!---->](https://javabetter.cn/string/equals.html)</li></ul><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 快速删除指定位置的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要删除的元素的索引</span>
<span class="line"> */</span>
<span class="line">private void fastRemove(int index) {</span>
<span class="line">    int numMoved = size - index - 1; // 计算需要移动的元素个数</span>
<span class="line">    if (numMoved &gt; 0) // 如果需要移动元素，就用 System.arraycopy 方法实现</span>
<span class="line">        System.arraycopy(elementData, index+1, elementData, index,</span>
<span class="line">                numMoved);</span>
<span class="line">    elementData[--size] = null; // 将数组末尾的元素置为 null，让 GC 回收该元素占用的空间</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726666870509-bb5402aa-5283-4381-8067-e7e22307a2a2.png"><h3 id="查找-arraylist-中的元素" tabindex="-1"><a class="header-anchor" href="#查找-arraylist-中的元素"><span><!----></span></a></h3><!---->**<!---->**<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">alist.indexOf(&quot;沉默王二&quot;);</span>
<span class="line">alist.lastIndexOf(&quot;沉默王二&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 返回指定元素在列表中第一次出现的位置。</span>
<span class="line"> * 如果列表不包含该元素，则返回 -1。</span>
<span class="line"> *</span>
<span class="line"> * @param o 要查找的元素</span>
<span class="line"> * @return 指定元素在列表中第一次出现的位置；如果列表不包含该元素，则返回 -1</span>
<span class="line"> */</span>
<span class="line">public int indexOf(Object o) {</span>
<span class="line">    if (o == null) { // 如果要查找的元素是 null</span>
<span class="line">        for (int i = 0; i &lt; size; i++) // 遍历列表</span>
<span class="line">            if (elementData[i]==null) // 如果找到了 null 元素</span>
<span class="line">                return i; // 返回元素的索引</span>
<span class="line">    } else { // 如果要查找的元素不是 null</span>
<span class="line">        for (int i = 0; i &lt; size; i++) // 遍历列表</span>
<span class="line">            if (o.equals(elementData[i])) // 如果找到了要查找的元素</span>
<span class="line">                return i; // 返回元素的索引</span>
<span class="line">    }</span>
<span class="line">    return -1; // 如果找不到要查找的元素，则返回 -1</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;lastIndexOf()&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;indexOf()&lt;/font&gt;</code><!----><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 返回指定元素在列表中最后一次出现的位置。</span>
<span class="line"> * 如果列表不包含该元素，则返回 -1。</span>
<span class="line"> *</span>
<span class="line"> * @param o 要查找的元素</span>
<span class="line"> * @return 指定元素在列表中最后一次出现的位置；如果列表不包含该元素，则返回 -1</span>
<span class="line"> */</span>
<span class="line">public int lastIndexOf(Object o) {</span>
<span class="line">    if (o == null) { // 如果要查找的元素是 null</span>
<span class="line">        for (int i = size-1; i &gt;= 0; i--) // 从后往前遍历列表</span>
<span class="line">            if (elementData[i]==null) // 如果找到了 null 元素</span>
<span class="line">                return i; // 返回元素的索引</span>
<span class="line">    } else { // 如果要查找的元素不是 null</span>
<span class="line">        for (int i = size-1; i &gt;= 0; i--) // 从后往前遍历列表</span>
<span class="line">            if (o.equals(elementData[i])) // 如果找到了要查找的元素</span>
<span class="line">                return i; // 返回元素的索引</span>
<span class="line">    }</span>
<span class="line">    return -1; // 如果找不到要查找的元素，则返回 -1</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;contains()&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;indexOf()&lt;/font&gt;</code><!----><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public boolean contains(Object o) {</span>
<span class="line">    return indexOf(o) &gt;= 0;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二分查找法" tabindex="-1"><a class="header-anchor" href="#二分查找法"><span><!----></span></a></h3><!----><p><a href="https://javabetter.cn/common-tool/collections.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;sort()&lt;/font&gt;</code><!----><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; copy = new ArrayList&lt;&gt;(alist);</span>
<span class="line">copy.add(&quot;a&quot;);</span>
<span class="line">copy.add(&quot;c&quot;);</span>
<span class="line">copy.add(&quot;b&quot;);</span>
<span class="line">copy.add(&quot;d&quot;);</span>
<span class="line"></span>
<span class="line">Collections.sort(copy);</span>
<span class="line">System.out.println(copy);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">[a, b, c, d]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">int index = Collections.binarySearch(copy, &quot;b&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="arraylist增删改查时的时间复杂度" tabindex="-1"><a class="header-anchor" href="#arraylist增删改查时的时间复杂度"><span><!----></span></a></h3><!----><h4 id="查询" tabindex="-1"><a class="header-anchor" href="#查询"><span><!----></span></a></h4><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 返回列表中指定位置的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要返回的元素的索引</span>
<span class="line"> * @return 列表中指定位置的元素</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引超出范围（index &lt; 0 || index &gt;= size()）</span>
<span class="line"> */</span>
<span class="line">public E get(int index) {</span>
<span class="line">    rangeCheck(index); // 检查索引是否合法</span>
<span class="line">    return elementData(index); // 调用 elementData 方法获取元素</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">/**</span>
<span class="line"> * 返回列表中指定位置的元素。</span>
<span class="line"> * 此方法不进行边界检查，因此只应由内部方法和迭代器调用。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要返回的元素的索引</span>
<span class="line"> * @return 列表中指定位置的元素</span>
<span class="line"> */</span>
<span class="line">E elementData(int index) {</span>
<span class="line">    return (E) elementData[index]; // 返回指定索引位置上的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="插入" tabindex="-1"><a class="header-anchor" href="#插入"><span><!----></span></a></h4><!----><!---->`<!---->`<!----><!----><ul><li><!----></li><li><!----></li></ul><h4 id="删除" tabindex="-1"><a class="header-anchor" href="#删除"><span><!----></span></a></h4><!----><!---->`<!---->`<!----><!----><ul><li><!----></li><li><!----></li></ul><h4 id="修改" tabindex="-1"><a class="header-anchor" href="#修改"><span><!----></span></a></h4><!----><!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 用指定元素替换列表中指定位置的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要替换元素的索引</span>
<span class="line"> * @param element 要放入列表中的元素</span>
<span class="line"> * @return 原来在指定位置上的元素</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引超出范围（index &lt; 0 || index &gt;= size()）</span>
<span class="line"> */</span>
<span class="line">public E set(int index, E element) {</span>
<span class="line">    rangeCheck(index); // 检查索引是否合法</span>
<span class="line"></span>
<span class="line">    E oldValue = elementData(index); // 获取原来在指定位置上的元素</span>
<span class="line">    elementData[index] = element; // 将指定位置上的元素替换为新元素</span>
<span class="line">    return oldValue; // 返回原来在指定位置上的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span><!----></span></a></h3><!----><!----><!---->`<!---->`<!----><h2 id="linkedlist-2" tabindex="-1"><a class="header-anchor" href="#linkedlist-2"><span>LinkedList</span></a></h2><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668224511-9f2029f4-115c-4899-8b46-62415b8b6850.png"><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 链表中的节点类。</span>
<span class="line"> */</span>
<span class="line">private static class Node&lt;E&gt; {</span>
<span class="line">    E item; // 节点中存储的元素</span>
<span class="line">    Node&lt;E&gt; next; // 指向下一个节点的指针</span>
<span class="line">    Node&lt;E&gt; prev; // 指向上一个节点的指针</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 构造一个新的节点。</span>
<span class="line">     *</span>
<span class="line">     * @param prev 前一个节点</span>
<span class="line">     * @param element 节点中要存储的元素</span>
<span class="line">     * @param next 后一个节点</span>
<span class="line">     */</span>
<span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) {</span>
<span class="line">        this.item = element; // 存储元素</span>
<span class="line">        this.next = next; // 设置下一个节点</span>
<span class="line">        this.prev = prev; // 设置上一个节点</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668222484-7a90a738-a0be-4a1f-a7b3-39f71577d427.png"><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><p><a href="https://javabetter.cn/collection/linkedlist.html#_02%E3%80%81linkedlist%E7%9A%84%E6%8B%9B%E5%BC%8F" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">LinkedList&lt;String&gt; list = new LinkedList();</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><h3 id="招式一-增" tabindex="-1"><a class="header-anchor" href="#招式一-增"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">list.add(&quot;沉默王二&quot;);</span>
<span class="line">list.add(&quot;沉默王三&quot;);</span>
<span class="line">list.add(&quot;沉默王四&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 将指定的元素添加到列表的尾部。</span>
<span class="line"> *</span>
<span class="line"> * @param e 要添加到列表的元素</span>
<span class="line"> * @return 始终为 true（根据 Java 集合框架规范）</span>
<span class="line"> */</span>
<span class="line">public boolean add(E e) {</span>
<span class="line">    linkLast(e); // 在列表的尾部添加元素</span>
<span class="line">    return true; // 添加元素成功，返回 true</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 在列表的尾部添加指定的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param e 要添加到列表的元素</span>
<span class="line"> */</span>
<span class="line">void linkLast(E e) {</span>
<span class="line">    final Node&lt;E&gt; l = last; // 获取链表的最后一个节点</span>
<span class="line">    final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null); // 创建一个新的节点，并将其设置为链表的最后一个节点</span>
<span class="line">    last = newNode; // 将新的节点设置为链表的最后一个节点</span>
<span class="line">    if (l == null) // 如果链表为空，则将新节点设置为头节点</span>
<span class="line">        first = newNode;</span>
<span class="line">    else</span>
<span class="line">        l.next = newNode; // 否则将新节点链接到链表的尾部</span>
<span class="line">    size++; // 增加链表的元素个数</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668222260-67157bfe-f45b-4f54-b269-773bdd1aebcd.png"><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668222235-2a10dd90-41c3-4839-95e1-7ffb50b1ac98.png"><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668222528-68c9e200-837f-4f66-884a-65a5a7f48501.png"><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;addFirst()&lt;/font&gt;</code><!----><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;addLast()&lt;/font&gt;</code><!----><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 在列表的开头添加指定的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param e 要添加到列表的元素</span>
<span class="line"> */</span>
<span class="line">public void addFirst(E e) {</span>
<span class="line">    linkFirst(e); // 在列表的开头添加元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 在列表的开头添加指定的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param e 要添加到列表的元素</span>
<span class="line"> */</span>
<span class="line">private void linkFirst(E e) {</span>
<span class="line">    final Node&lt;E&gt; f = first; // 获取链表的第一个节点</span>
<span class="line">    final Node&lt;E&gt; newNode = new Node&lt;&gt;(null, e, f); // 创建一个新的节点，并将其设置为链表的第一个节点</span>
<span class="line">    first = newNode; // 将新的节点设置为链表的第一个节点</span>
<span class="line">    if (f == null) // 如果链表为空，则将新节点设置为尾节点</span>
<span class="line">        last = newNode;</span>
<span class="line">    else</span>
<span class="line">        f.prev = newNode; // 否则将新节点链接到链表的头部</span>
<span class="line">    size++; // 增加链表的元素个数</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 在列表的尾部添加指定的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param e 要添加到列表的元素</span>
<span class="line"> * @return 始终为 true（根据 Java 集合框架规范）</span>
<span class="line"> */</span>
<span class="line">public boolean addLast(E e) {</span>
<span class="line">    linkLast(e); // 在列表的尾部添加元素</span>
<span class="line">    return true; // 添加元素成功，返回 true</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="招式二-删" tabindex="-1"><a class="header-anchor" href="#招式二-删"><span><!----></span></a></h3><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove()&lt;/font&gt;</code><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove(int)&lt;/font&gt;</code><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove(Object)&lt;/font&gt;</code><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;removeFirst()&lt;/font&gt;</code><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;removeLast()&lt;/font&gt;</code><!----></li></ul><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove()&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;removeFirst()&lt;/font&gt;</code><!----></p><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove(int)&lt;/font&gt;</code><!----><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 删除指定位置上的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要删除的元素的索引</span>
<span class="line"> * @return 从列表中删除的元素</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引越界（index &amp;lt; 0 || index &amp;gt;= size()）</span>
<span class="line"> */</span>
<span class="line">public E remove(int index) {</span>
<span class="line">    checkElementIndex(index); // 检查索引是否越界</span>
<span class="line">    return unlink(node(index)); // 删除指定位置的节点，并返回节点的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 从链表中删除指定节点。</span>
<span class="line"> *</span>
<span class="line"> * @param x 要删除的节点</span>
<span class="line"> * @return 从链表中删除的节点的元素</span>
<span class="line"> */</span>
<span class="line">E unlink(Node&lt;E&gt; x) {</span>
<span class="line">    final E element = x.item; // 获取要删除节点的元素</span>
<span class="line">    final Node&lt;E&gt; next = x.next; // 获取要删除节点的下一个节点</span>
<span class="line">    final Node&lt;E&gt; prev = x.prev; // 获取要删除节点的上一个节点</span>
<span class="line"></span>
<span class="line">    if (prev == null) { // 如果要删除节点是第一个节点</span>
<span class="line">        first = next; // 将链表的头节点设置为要删除节点的下一个节点</span>
<span class="line">    } else {</span>
<span class="line">        prev.next = next; // 将要删除节点的上一个节点指向要删除节点的下一个节点</span>
<span class="line">        x.prev = null; // 将要删除节点的上一个节点设置为空</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    if (next == null) { // 如果要删除节点是最后一个节点</span>
<span class="line">        last = prev; // 将链表的尾节点设置为要删除节点的上一个节点</span>
<span class="line">    } else {</span>
<span class="line">        next.prev = prev; // 将要删除节点的下一个节点指向要删除节点的上一个节点</span>
<span class="line">        x.next = null; // 将要删除节点的下一个节点设置为空</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    x.item = null; // 将要删除节点的元素设置为空</span>
<span class="line">    size--; // 减少链表的元素个数</span>
<span class="line">    return element; // 返回被删除节点的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 从链表中删除指定元素。</span>
<span class="line"> *</span>
<span class="line"> * @param o 要从链表中删除的元素</span>
<span class="line"> * @return 如果链表包含指定元素，则返回 true；否则返回 false</span>
<span class="line"> */</span>
<span class="line">public boolean remove(Object o) {</span>
<span class="line">    if (o == null) { // 如果要删除的元素为 null</span>
<span class="line">        for (Node&lt;E&gt; x = first; x != null; x = x.next) { // 遍历链表</span>
<span class="line">            if (x.item == null) { // 如果节点的元素为 null</span>
<span class="line">                unlink(x); // 删除节点</span>
<span class="line">                return true; // 返回 true 表示删除成功</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    } else { // 如果要删除的元素不为 null</span>
<span class="line">        for (Node&lt;E&gt; x = first; x != null; x = x.next) { // 遍历链表</span>
<span class="line">            if (o.equals(x.item)) { // 如果节点的元素等于要删除的元素</span>
<span class="line">                unlink(x); // 删除节点</span>
<span class="line">                return true; // 返回 true 表示删除成功</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    return false; // 如果链表中不包含要删除的元素，则返回 false 表示删除失败</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 从链表中删除第一个元素并返回它。</span>
<span class="line"> * 如果链表为空，则抛出 NoSuchElementException 异常。</span>
<span class="line"> *</span>
<span class="line"> * @return 从链表中删除的第一个元素</span>
<span class="line"> * @throws NoSuchElementException 如果链表为空</span>
<span class="line"> */</span>
<span class="line">public E removeFirst() {</span>
<span class="line">    final Node&lt;E&gt; f = first; // 获取链表的第一个节点</span>
<span class="line">    if (f == null) // 如果链表为空</span>
<span class="line">        throw new NoSuchElementException(); // 抛出 NoSuchElementException 异常</span>
<span class="line">    return unlinkFirst(f); // 调用 unlinkFirst 方法删除第一个节点并返回它的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 删除链表中的第一个节点并返回它的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param f 要删除的第一个节点</span>
<span class="line"> * @return 被删除节点的元素</span>
<span class="line"> */</span>
<span class="line">private E unlinkFirst(Node&lt;E&gt; f) {</span>
<span class="line">    final E element = f.item; // 获取要删除的节点的元素</span>
<span class="line">    final Node&lt;E&gt; next = f.next; // 获取要删除的节点的下一个节点</span>
<span class="line">    f.item = null; // 将要删除的节点的元素设置为 null</span>
<span class="line">    f.next = null; // 将要删除的节点的下一个节点设置为 null</span>
<span class="line">    first = next; // 将链表的头节点设置为要删除的节点的下一个节点</span>
<span class="line">    if (next == null) // 如果链表只有一个节点</span>
<span class="line">        last = null; // 将链表的尾节点设置为 null</span>
<span class="line">    else</span>
<span class="line">        next.prev = null; // 将要删除节点的下一个节点的前驱设置为 null</span>
<span class="line">    size--; // 减少链表的大小</span>
<span class="line">    return element; // 返回被删除节点的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="招式三-改" tabindex="-1"><a class="header-anchor" href="#招式三-改"><span><!----></span></a></h3><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">list.set(0, &quot;沉默王五&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 将链表中指定位置的元素替换为指定元素，并返回原来的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要替换元素的位置（从 0 开始）</span>
<span class="line"> * @param element 要插入的元素</span>
<span class="line"> * @return 替换前的元素</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引超出范围（index &lt; 0 || index &gt;= size()）</span>
<span class="line"> */</span>
<span class="line">public E set(int index, E element) {</span>
<span class="line">    checkElementIndex(index); // 检查索引是否超出范围</span>
<span class="line">    Node&lt;E&gt; x = node(index); // 获取要替换的节点</span>
<span class="line">    E oldVal = x.item; // 获取要替换节点的元素</span>
<span class="line">    x.item = element; // 将要替换的节点的元素设置为指定元素</span>
<span class="line">    return oldVal; // 返回替换前的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 获取链表中指定位置的节点。</span>
<span class="line"> *</span>
<span class="line"> * @param index 节点的位置（从 0 开始）</span>
<span class="line"> * @return 指定位置的节点</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引超出范围（index &lt; 0 || index &gt;= size()）</span>
<span class="line"> */</span>
<span class="line">Node&lt;E&gt; node(int index) {</span>
<span class="line">    if (index &lt; (size &gt;&gt; 1)) { // 如果索引在链表的前半部分</span>
<span class="line">        Node&lt;E&gt; x = first;</span>
<span class="line">        for (int i = 0; i &lt; index; i++) // 从头节点开始向后遍历链表，直到找到指定位置的节点</span>
<span class="line">            x = x.next;</span>
<span class="line">        return x; // 返回指定位置的节点</span>
<span class="line">    } else { // 如果索引在链表的后半部分</span>
<span class="line">        Node&lt;E&gt; x = last;</span>
<span class="line">        for (int i = size - 1; i &gt; index; i--) // 从尾节点开始向前遍历链表，直到找到指定位置的节点</span>
<span class="line">            x = x.prev;</span>
<span class="line">        return x; // 返回指定位置的节点</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;size &gt;&gt; 1&lt;/font&gt;</code><!----></p><!----><!----><h3 id="招式四-查" tabindex="-1"><a class="header-anchor" href="#招式四-查"><span><!----></span></a></h3><!----><ul><li><!----></li><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 返回链表中首次出现指定元素的位置，如果不存在该元素则返回 -1。</span>
<span class="line"> *</span>
<span class="line"> * @param o 要查找的元素</span>
<span class="line"> * @return 首次出现指定元素的位置，如果不存在该元素则返回 -1</span>
<span class="line"> */</span>
<span class="line">public int indexOf(Object o) {</span>
<span class="line">    int index = 0; // 初始化索引为 0</span>
<span class="line">    if (o == null) { // 如果要查找的元素为 null</span>
<span class="line">        for (Node&lt;E&gt; x = first; x != null; x = x.next) { // 从头节点开始向后遍历链表</span>
<span class="line">            if (x.item == null) // 如果找到了要查找的元素</span>
<span class="line">                return index; // 返回该元素的索引</span>
<span class="line">            index++; // 索引加 1</span>
<span class="line">        }</span>
<span class="line">    } else { // 如果要查找的元素不为 null</span>
<span class="line">        for (Node&lt;E&gt; x = first; x != null; x = x.next) { // 从头节点开始向后遍历链表</span>
<span class="line">            if (o.equals(x.item)) // 如果找到了要查找的元素</span>
<span class="line">                return index; // 返回该元素的索引</span>
<span class="line">            index++; // 索引加 1</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    return -1; // 如果没有找到要查找的元素，则返回 -1</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E get(int index) {</span>
<span class="line">    checkElementIndex(index);</span>
<span class="line">    return node(index).item;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;getFirst()&lt;/font&gt;</code><!----><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;getLast()&lt;/font&gt;</code><!----><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;poll()&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;pollFirst()&lt;/font&gt;</code><!----><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;pollLast()&lt;/font&gt;</code><!----><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;peekFirst()&lt;/font&gt;</code><!----><!----></li></ul><h3 id="linkedlist-的挑战" tabindex="-1"><a class="header-anchor" href="#linkedlist-的挑战"><span><!----></span></a></h3><!----><!----><!----><!----><!----><p><a href="https://javabetter.cn/collection/list-war-2.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----></p><!----><!----><!---->**<!---->**<!----><!----><h3 id="linkedlist-的应用" tabindex="-1"><a class="header-anchor" href="#linkedlist-的应用"><span><!----></span></a></h3><!----><!---->[<!---->](https://paicoding.com/column/7/2)<!---->[<!---->](https://paicoding.com/column/7/19)<!----><!----><ul><li><a href="https://paicoding.com/column/7/2" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://paicoding.com/column/7/19" target="_blank" rel="noopener noreferrer">019.删除链表的倒数第 N 个节点——通过手绘图和 LinkedList 源码的讲解，你一定看得懂<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="栈-stack-详解" tabindex="-1"><a class="header-anchor" href="#栈-stack-详解"><span>栈 Stack 详解</span></a></h2><!---->[<!---->](https://javabetter.cn/collection/gailan.html)<!----><!----><h3 id="栈数据结构" tabindex="-1"><a class="header-anchor" href="#栈数据结构"><span><a href="https://javabetter.cn/collection/stack.html#%E6%A0%88%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668276848-4ae31312-aa7e-41a1-b43c-5e42dbf6b8c9.png"><!----><ul><li><!----></li><li><!----></li></ul><!---->**<!---->**<!----><!----><ul><li><!----></li><li><!----></li></ul><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668276853-0ee8feb3-5f70-4b27-b1dd-1564e5c4e784.png"><!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668276668-44410e7f-56bf-493e-976a-522ec66cea92.png"><!---->`<!---->`<!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><h3 id="自定义栈" tabindex="-1"><a class="header-anchor" href="#自定义栈"><span><a href="https://javabetter.cn/collection/stack.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%88" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;int arr[]&lt;/font&gt;</code><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;int top&lt;/font&gt;</code><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;int capacity&lt;/font&gt;</code><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">class Stack { </span>
<span class="line">     private int arr[]; </span>
<span class="line">     private int top; </span>
<span class="line">     private int capacity; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Stack(int size) { </span>
<span class="line">     arr = new int[size]; </span>
<span class="line">     capacity = size; </span>
<span class="line">     top = -1; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public void push(int x) { </span>
<span class="line">     if (isFull()) { </span>
<span class="line">         System.out.println(&quot;溢出\n程序终止\n&quot;); </span>
<span class="line">         System.exit(1); </span>
<span class="line">     } </span>
<span class="line">  </span>
<span class="line">     System.out.println(&quot;压入 &quot; + x); </span>
<span class="line">     arr[++top] = x; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public int pop() { </span>
<span class="line">     if (isEmpty()) { </span>
<span class="line">         System.out.println(&quot;栈是空的&quot;); </span>
<span class="line">         System.exit(1); </span>
<span class="line">     } </span>
<span class="line">     return arr[top--]; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public int size() { </span>
<span class="line">     return top + 1; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public Boolean isEmpty() { </span>
<span class="line">     return top == -1; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public Boolean isFull() { </span>
<span class="line">     return top == capacity - 1; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public void printStack() { </span>
<span class="line">     for (int i = 0; i &lt;= top; i++) { </span>
<span class="line">         System.out.println(arr[i]); </span>
<span class="line">     } </span>
<span class="line"> } </span>
<span class="line">  </span>
<span class="line"> public static void main(String[] args) { </span>
<span class="line">     Stack stack = new Stack(5); </span>
<span class="line">  </span>
<span class="line">     stack.push(1); </span>
<span class="line">     stack.push(2); </span>
<span class="line">     stack.push(3); </span>
<span class="line">     stack.push(4); </span>
<span class="line">  </span>
<span class="line">     stack.pop(); </span>
<span class="line">     System.out.println(&quot;\n弹出元素后&quot;); </span>
<span class="line">  </span>
<span class="line">     stack.printStack(); </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">压入 1 </span>
<span class="line">压入 2 </span>
<span class="line">压入 3 </span>
<span class="line">压入 4 </span>
<span class="line"></span>
<span class="line">弹出元素后 </span>
<span class="line">1 </span>
<span class="line">2 </span>
<span class="line">3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->[<!---->](https://javabetter.cn/array/array.html)<!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!---->[<!---->](https://javabetter.cn/collection/time-complexity.html)<!----><!---->`<!---->`<!----><!----><!---->**<!---->**<!----><!---->`<!---->`<!----><!----><!---->**<!---->**<!----><!---->`<!---->`<!----><!----><!----><!---->**<!---->**<!----><!----><h3 id="stack-类" tabindex="-1"><a class="header-anchor" href="#stack-类"><span><a href="https://javabetter.cn/collection/stack.html#stack-%E7%B1%BB" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!---->[<!---->](https://javabetter.cn/string/builder-buffer.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Stack&lt;String&gt; stack = new Stack&lt;&gt;();</span>
<span class="line">stack.push(&quot;沉默王二&quot;);</span>
<span class="line">stack.push(&quot;沉默王三&quot;);</span>
<span class="line">stack.push(&quot;一个文章真特么有趣的程序员&quot;);</span>
<span class="line"></span>
<span class="line">System.out.println(stack);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668277822-8555075c-4a39-4b45-ab42-1d5339466947.png"><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E push(E item) { </span>
<span class="line">     addElement(item); </span>
<span class="line">  </span>
<span class="line">     return item; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;push&lt;/font&gt;</code><!----><!----><!----><a href="https://javabetter.cn/thread/synchronized-1.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;Vector&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;addElement&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;synchronized&lt;/font&gt;</code><!----><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public synchronized void addElement(E obj) { </span>
<span class="line">     modCount++; </span>
<span class="line">     ensureCapacityHelper(elementCount + 1); </span>
<span class="line">     elementData[elementCount++] = obj; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public synchronized E pop() { </span>
<span class="line">     E obj; </span>
<span class="line">     int len = size(); </span>
<span class="line">  </span>
<span class="line">     obj = peek(); </span>
<span class="line">     removeElementAt(len - 1); </span>
<span class="line">  </span>
<span class="line">     return obj; </span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public synchronized E peek() {</span>
<span class="line">    int     len = size();</span>
<span class="line"></span>
<span class="line">    if (len == 0)</span>
<span class="line">        throw new EmptyStackException();</span>
<span class="line">    return elementAt(len - 1);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668276885-8ec447ce-c006-48ea-8670-91708fd6be9a.png"><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class Vector&lt;E&gt;</span>
<span class="line">    extends AbstractList&lt;E&gt;</span>
<span class="line">    implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span>
<span class="line">{</span>
<span class="line">    protected Object[] elementData;</span>
<span class="line">    protected int elementCount;</span>
<span class="line">    protected int capacityIncrement;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span><a href="https://javabetter.cn/collection/stack.html#%E5%B0%8F%E7%BB%93" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><!----><!----><!---->[<!---->](https://javabetter.cn/collection/arraydeque.html)<!----><!----><!----><p><a href="https://paicoding.com/column/7/20" target="_blank" rel="noopener noreferrer">020.有效的括号，用栈来解决的 Java 版 LeetCode 刷题笔记<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----></p><!----><h2 id="hashmap-详解-附源码" tabindex="-1"><a class="header-anchor" href="#hashmap-详解-附源码"><span><!----></span></a></h2><!----><!----><!----><!----><h3 id="hashmap-增删改查的简单例子" tabindex="-1"><a class="header-anchor" href="#hashmap-增删改查的简单例子"><span><!----></span></a></h3><p><strong><!----></strong><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">HashMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;();</span>
<span class="line">map.put(&quot;沉默&quot;, 20);</span>
<span class="line">map.put(&quot;王二&quot;, 25);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><!----></strong><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">map.remove(&quot;沉默&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong><!----></strong><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">map.put(&quot;沉默&quot;, 30);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><p><strong><!----></strong><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">int age = map.get(&quot;沉默&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!----><!----><h3 id="hash-方法的原理" tabindex="-1"><a class="header-anchor" href="#hash-方法的原理"><span><!----></span></a></h3><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static final int hash(Object key) {</span>
<span class="line">    int h;</span>
<span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><p><strong><!----></strong><!----></p><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();</span>
<span class="line">map.put(&quot;chenmo&quot;, &quot;沉默&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public V put(K key, V value) {</span>
<span class="line">    return putVal(hash(key), key, value, false, true);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h4 id="hash-方法的作用" tabindex="-1"><a class="header-anchor" href="#hash-方法的作用"><span><!----></span></a></h4><!---->**<!---->**<!----><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668349148-50ebc5af-8e15-46fa-8a13-8d155c40fc00.png"><!----><!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!----><!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668349291-326c2f19-1124-49ac-8b39-942760ffac68.png"><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static final int hash(Object key) {</span>
<span class="line">    int h;</span>
<span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;key == null ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;hashCode()&lt;/font&gt;</code><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;^&lt;/font&gt;</code><!----><!----></li><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;h &gt;&gt;&gt; 16&lt;/font&gt;</code><!----></li><li><!----></li></ul><!----><!----><!----><!----><!---->`<!---->`<!----><h4 id="取模运算-vs-取余运算-vs-与运算" tabindex="-1"><a class="header-anchor" href="#取模运算-vs-取余运算-vs-与运算"><span><!----></span></a></h4><!----><!----><!----><!---->`<!---->`<!----><!----><ul><li><!----></li><li><!----></li><li><strong><!----></strong><!----></li><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">int a = -7;</span>
<span class="line">int b = 3;</span>
<span class="line"></span>
<span class="line">// a 对 b 取余</span>
<span class="line">int remainder = a % b;</span>
<span class="line">// a 对 b 取模</span>
<span class="line">int modulus = Math.floorMod(a, b);</span>
<span class="line"></span>
<span class="line">System.out.println(&quot;数字: a = &quot; + a + &quot;, b = &quot; + b);</span>
<span class="line">System.out.println(&quot;取余 (%): &quot; + remainder);</span>
<span class="line">System.out.println(&quot;取模 (Math.floorMod): &quot; + modulus);</span>
<span class="line"></span>
<span class="line">// 改变 a 和 b 的正负情况</span>
<span class="line">a = 7;</span>
<span class="line">b = -3;</span>
<span class="line"></span>
<span class="line">remainder = a % b;</span>
<span class="line">modulus = Math.floorMod(a, b);</span>
<span class="line"></span>
<span class="line">System.out.println(&quot;\n数字: a = &quot; + a + &quot;, b = &quot; + b);</span>
<span class="line">System.out.println(&quot;取余 (%): &quot; + remainder);</span>
<span class="line">System.out.println(&quot;取模 (Math.floorMod): &quot; + modulus);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">数字: a = -7, b = 3</span>
<span class="line">取余 (%): -1</span>
<span class="line">取模 (Math.floorMod): 2</span>
<span class="line"></span>
<span class="line">数字: a = 7, b = -3</span>
<span class="line">取余 (%): 1</span>
<span class="line">取模 (Math.floorMod): -2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!---->[<!---->](https://www.cnblogs.com/doondo/p/14678204.html)<p><strong><!----></strong><!----></p><!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><p><strong><!----></strong><!----></p><!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!----><p><strong><!----></strong><!----></p><!----><!----><!---->**<!---->**<!----><!----><!---->`<!---->`<!----><!----><!----><!----><!----><!----><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><!----><!----><!----><!----><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;hash % length&lt;/font&gt;</code><!----></p><!----><!----><!----><!---->`<!---->`<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">1110 (hash = 14)</span>
<span class="line">&amp; 0111 (length - 1 = 7)</span>
<span class="line">  ----</span>
<span class="line">  0110 (结果 = 6)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) {</span>
<span class="line">    // 数组</span>
<span class="line">    HashMap.Node&lt;K,V&gt;[] tab;</span>
<span class="line">    // 元素</span>
<span class="line">    HashMap.Node&lt;K,V&gt; p;</span>
<span class="line"></span>
<span class="line">    // n 为数组的长度 i 为下标</span>
<span class="line">    int n, i;</span>
<span class="line">    // 数组为空的时候</span>
<span class="line">    if ((tab = table) == null || (n = tab.length) == 0)</span>
<span class="line">        // 第一次扩容后的数组长度</span>
<span class="line">        n = (tab = resize()).length;</span>
<span class="line">    // 计算节点的插入位置，如果该位置为空，则新建一个节点插入</span>
<span class="line">    if ((p = tab[i = (n - 1) &amp; hash]) == null)</span>
<span class="line">        tab[i] = newNode(hash, key, value, null);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">final Node&lt;K,V&gt; getNode(int hash, Object key) {</span>
<span class="line">    // 获取当前的数组和长度，以及当前节点链表的第一个节点（根据索引直接从数组中找）</span>
<span class="line">    Node&lt;K,V&gt;[] tab;</span>
<span class="line">    Node&lt;K,V&gt; first, e;</span>
<span class="line">    int n;</span>
<span class="line">    K k;</span>
<span class="line">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;</span>
<span class="line">            (first = tab[(n - 1) &amp; hash]) != null) {</span>
<span class="line">        // 如果第一个节点就是要查找的节点，则直接返回</span>
<span class="line">        if (first.hash == hash &amp;&amp; ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))</span>
<span class="line">            return first;</span>
<span class="line">        // 如果第一个节点不是要查找的节点，则遍历节点链表查找</span>
<span class="line">        if ((e = first.next) != null) {</span>
<span class="line">            do {</span>
<span class="line">                if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span>
<span class="line">                    return e;</span>
<span class="line">            } while ((e = e.next) != null);</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    // 如果节点链表中没有找到对应的节点，则返回 null</span>
<span class="line">    return null;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><h4 id="取模运算-和位运算" tabindex="-1"><a class="header-anchor" href="#取模运算-和位运算"><span><!----></span></a></h4><!---->**<!---->****<!---->**`**<!---->**`**<!---->****<!---->****<!---->**`**<!---->**`**<!---->****<!---->**<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><!----><!----><!----><!----><!---->`<!---->`<!----><sup><!----></sup><!---->`<!---->`<!----><sup><!----></sup><!----><!----><!----><!---->**<!---->**<!----><!----><!----><!----><!----><!---->`<!---->`<!----><!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">10100101 11000100 00100101</span>
<span class="line">&amp;	 00000000 00000000 00001111</span>
<span class="line">----------------------------------</span>
<span class="line">	 00000000 00000000 00000101</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><ul><li><!----></li><li><!----></li></ul><h4 id="为什么取模运算之前要调用-hash-方法呢" tabindex="-1"><a class="header-anchor" href="#为什么取模运算之前要调用-hash-方法呢"><span><!----></span></a></h4><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668343936-037cb272-88df-47f6-a8c6-48c91702a975.png"><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!---->`<!---->`<!---->`<!---->`<!----><!---->`<!---->`<!----><!---->**<!---->**<!----><!---->**<!---->**<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();</span>
<span class="line">map.put(&quot;chenmo&quot;, &quot;沉默&quot;);</span>
<span class="line">map.put(&quot;wanger&quot;, &quot;王二&quot;);</span>
<span class="line">map.put(&quot;chenqingyang&quot;, &quot;陈清扬&quot;);</span>
<span class="line">map.put(&quot;xiaozhuanling&quot;, &quot;小转铃&quot;);</span>
<span class="line">map.put(&quot;fangxiaowan&quot;, &quot;方小婉&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历 HashMap</span>
<span class="line">for (String key : map.keySet()) {</span>
<span class="line">    int h, n = 16;</span>
<span class="line">    int hash = (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span>
<span class="line">    int i = (n - 1) &amp; hash;</span>
<span class="line">    // 打印 key 的 hash 值 和 索引 i</span>
<span class="line">    System.out.println(key + &quot;的hash值 : &quot; + hash +&quot; 的索引 : &quot; + i);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">xiaozhuanling的hash值 : 14597045 的索引 : 5</span>
<span class="line">fangxiaowan的hash值 : -392727066 的索引 : 6</span>
<span class="line">chenmo的hash值 : -1361556696 的索引 : 8</span>
<span class="line">chenqingyang的hash值 : -613818743 的索引 : 9</span>
<span class="line">wanger的hash值 : -795084437 的索引 : 11</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h4 id="小结-1" tabindex="-1"><a class="header-anchor" href="#小结-1"><span><!----></span></a></h4><!----><!----><!----><!----><h3 id="hashmap-的扩容机制" tabindex="-1"><a class="header-anchor" href="#hashmap-的扩容机制"><span><!----></span></a></h3><!----><!----><!---->[<!---->](https://javabebetter.cn/collection/arraylist.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();</span>
<span class="line">map.put(&quot;chenmo&quot;, &quot;沉默&quot;);</span>
<span class="line">map.put(&quot;wanger&quot;, &quot;王二&quot;);</span>
<span class="line">map.put(&quot;chenqingyang&quot;, &quot;陈清扬&quot;);</span>
<span class="line">map.put(&quot;xiaozhuanling&quot;, &quot;小转铃&quot;);</span>
<span class="line">map.put(&quot;fangxiaowan&quot;, &quot;方小婉&quot;);</span>
<span class="line">map.put(&quot;yexin&quot;, &quot;叶辛&quot;);</span>
<span class="line">map.put(&quot;liuting&quot;,&quot;刘婷&quot;);</span>
<span class="line">map.put(&quot;yaoxiaojuan&quot;,&quot;姚小娟&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历 HashMap</span>
<span class="line">for (String key : map.keySet()) {</span>
<span class="line">    int h, n = 16;</span>
<span class="line">    int hash = (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span>
<span class="line">    int i = (n - 1) &amp; hash;</span>
<span class="line">    // 打印 key 的 hash 值 和 索引 i</span>
<span class="line">    System.out.println(key + &quot;的hash值 : &quot; + hash +&quot; 的索引 : &quot; + i);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">liuting的hash值 : 183821170 的索引 : 2</span>
<span class="line">xiaozhuanling的hash值 : 14597045 的索引 : 5</span>
<span class="line">fangxiaowan的hash值 : -392727066 的索引 : 6</span>
<span class="line">yaoxiaojuan的hash值 : 1231568918 的索引 : 6</span>
<span class="line">chenmo的hash值 : -1361556696 的索引 : 8</span>
<span class="line">chenqingyang的hash值 : -613818743 的索引 : 9</span>
<span class="line">yexin的hash值 : 114873289 的索引 : 9</span>
<span class="line">wanger的hash值 : -795084437 的索引 : 11</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li></ul><!---->[<!---->](https://javabebetter.cn/collection/time-complexity.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">liuting的hash值 : 183821170 的索引 : 18</span>
<span class="line">xiaozhuanling的hash值 : 14597045 的索引 : 21</span>
<span class="line">fangxiaowan的hash值 : -392727066 的索引 : 6</span>
<span class="line">yaoxiaojuan的hash值 : 1231568918 的索引 : 22</span>
<span class="line">chenmo的hash值 : -1361556696 的索引 : 8</span>
<span class="line">chenqingyang的hash值 : -613818743 的索引 : 9</span>
<span class="line">yexin的hash值 : 114873289 的索引 : 9</span>
<span class="line">wanger的hash值 : -795084437 的索引 : 11</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li></ul><!----><h4 id="resize-方法" tabindex="-1"><a class="header-anchor" href="#resize-方法"><span><!----></span></a></h4><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// newCapacity为新的容量</span>
<span class="line">void resize(int newCapacity) {</span>
<span class="line">    // 小数组，临时过度下</span>
<span class="line">    Entry[] oldTable = table;</span>
<span class="line">    // 扩容前的容量</span>
<span class="line">    int oldCapacity = oldTable.length;</span>
<span class="line">    // MAXIMUM_CAPACITY 为最大容量，2 的 30 次方 = 1&lt;&lt;30</span>
<span class="line">    if (oldCapacity == MAXIMUM_CAPACITY) {</span>
<span class="line">        // 容量调整为 Integer 的最大值 0x7fffffff（十六进制）=2 的 31 次方-1</span>
<span class="line">        threshold = Integer.MAX_VALUE;</span>
<span class="line">        return;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    // 初始化一个新的数组（大容量）</span>
<span class="line">    Entry[] newTable = new Entry[newCapacity];</span>
<span class="line">    // 把小数组的元素转移到大数组中</span>
<span class="line">    transfer(newTable, initHashSeedAsNeeded(newCapacity));</span>
<span class="line">    // 引用新的大数组</span>
<span class="line">    table = newTable;</span>
<span class="line">    // 重新计算阈值</span>
<span class="line">    threshold = (int)Math.min(newCapacity * loadFactor, MAXIMUM_CAPACITY + 1);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><!----><h4 id="新容量-newcapacity" tabindex="-1"><a class="header-anchor" href="#新容量-newcapacity"><span><!----></span></a></h4><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">int newCapacity = oldCapacity * 2;</span>
<span class="line">if (newCapacity &lt; 0 || newCapacity &gt;= MAXIMUM_CAPACITY) {</span>
<span class="line">    newCapacity = MAXIMUM_CAPACITY;</span>
<span class="line">} else if (newCapacity &lt; DEFAULT_INITIAL_CAPACITY) {</span>
<span class="line">    newCapacity = DEFAULT_INITIAL_CAPACITY;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">int newCapacity = oldCapacity &lt;&lt; 1;</span>
<span class="line">if (newCapacity &gt;= DEFAULT_INITIAL_CAPACITY &amp;&amp; oldCapacity &gt;= DEFAULT_INITIAL_CAPACITY) {</span>
<span class="line">    if (newCapacity &gt; MAXIMUM_CAPACITY)</span>
<span class="line">        newCapacity = MAXIMUM_CAPACITY;</span>
<span class="line">} else {</span>
<span class="line">    if (newCapacity &lt; DEFAULT_INITIAL_CAPACITY)</span>
<span class="line">        newCapacity = DEFAULT_INITIAL_CAPACITY;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->`<!---->`<!----><!----><!---->`<!---->`<!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">a=39</span>
<span class="line">b = a &lt;&lt; 2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><h4 id="transfer-方法" tabindex="-1"><a class="header-anchor" href="#transfer-方法"><span><!----></span></a></h4><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">void transfer(Entry[] newTable, boolean rehash) {</span>
<span class="line">    // 新的容量</span>
<span class="line">    int newCapacity = newTable.length;</span>
<span class="line">    // 遍历小数组</span>
<span class="line">    for (Entry&lt;K,V&gt; e : table) {</span>
<span class="line">        while(null != e) {</span>
<span class="line">            // 拉链法，相同 key 上的不同值</span>
<span class="line">            Entry&lt;K,V&gt; next = e.next;</span>
<span class="line">            // 是否需要重新计算 hash</span>
<span class="line">            if (rehash) {</span>
<span class="line">                e.hash = null == e.key ? 0 : hash(e.key);</span>
<span class="line">            }</span>
<span class="line">            // 根据大数组的容量，和键的 hash 计算元素在数组中的下标</span>
<span class="line">            int i = indexFor(e.hash, newCapacity);</span>
<span class="line"></span>
<span class="line">            // 同一位置上的新元素被放在链表的头部</span>
<span class="line">            e.next = newTable[i];</span>
<span class="line"></span>
<span class="line">            // 放在新的数组上</span>
<span class="line">            newTable[i] = e;</span>
<span class="line"></span>
<span class="line">            // 链表上的下一个元素</span>
<span class="line">            e = next;</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><h4 id="拉链法" tabindex="-1"><a class="header-anchor" href="#拉链法"><span><!----></span></a></h4><!---->`<!---->`<!---->**<!---->**<!----><!----><h4 id="java-8-扩容" tabindex="-1"><a class="header-anchor" href="#java-8-扩容"><span><!----></span></a></h4><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">final Node&lt;K,V&gt;[] resize() {</span>
<span class="line">    Node&lt;K,V&gt;[] oldTab = table; // 获取原来的数组 table</span>
<span class="line">    int oldCap = (oldTab == null) ? 0 : oldTab.length; // 获取数组长度 oldCap</span>
<span class="line">    int oldThr = threshold; // 获取阈值 oldThr</span>
<span class="line">    int newCap, newThr = 0;</span>
<span class="line">    if (oldCap &gt; 0) { // 如果原来的数组 table 不为空</span>
<span class="line">        if (oldCap &gt;= MAXIMUM_CAPACITY) { // 超过最大值就不再扩充了，就只好随你碰撞去吧</span>
<span class="line">            threshold = Integer.MAX_VALUE;</span>
<span class="line">            return oldTab;</span>
<span class="line">        }</span>
<span class="line">        else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; // 没超过最大值，就扩充为原来的2倍</span>
<span class="line">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span>
<span class="line">            newThr = oldThr &lt;&lt; 1; // double threshold</span>
<span class="line">    }</span>
<span class="line">    else if (oldThr &gt; 0) // initial capacity was placed in threshold</span>
<span class="line">        newCap = oldThr;</span>
<span class="line">    else { // zero initial threshold signifies using defaults</span>
<span class="line">        newCap = DEFAULT_INITIAL_CAPACITY;</span>
<span class="line">        newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span>
<span class="line">    }</span>
<span class="line">    // 计算新的 resize 上限</span>
<span class="line">    if (newThr == 0) {</span>
<span class="line">        float ft = (float)newCap * loadFactor;</span>
<span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ?</span>
<span class="line">                  (int)ft : Integer.MAX_VALUE);</span>
<span class="line">    }</span>
<span class="line">    threshold = newThr; // 将新阈值赋值给成员变量 threshold</span>
<span class="line">    @SuppressWarnings({&quot;rawtypes&quot;,&quot;unchecked&quot;})</span>
<span class="line">        Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; // 创建新数组 newTab</span>
<span class="line">    table = newTab; // 将新数组 newTab 赋值给成员变量 table</span>
<span class="line">    if (oldTab != null) { // 如果旧数组 oldTab 不为空</span>
<span class="line">        for (int j = 0; j &lt; oldCap; ++j) { // 遍历旧数组的每个元素</span>
<span class="line">            Node&lt;K,V&gt; e;</span>
<span class="line">            if ((e = oldTab[j]) != null) { // 如果该元素不为空</span>
<span class="line">                oldTab[j] = null; // 将旧数组中该位置的元素置为 null，以便垃圾回收</span>
<span class="line">                if (e.next == null) // 如果该元素没有冲突</span>
<span class="line">                    newTab[e.hash &amp; (newCap - 1)] = e; // 直接将该元素放入新数组</span>
<span class="line">                else if (e instanceof TreeNode) // 如果该元素是树节点</span>
<span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); // 将该树节点分裂成两个链表</span>
<span class="line">                else { // 如果该元素是链表</span>
<span class="line">                    Node&lt;K,V&gt; loHead = null, loTail = null; // 低位链表的头结点和尾结点</span>
<span class="line">                    Node&lt;K,V&gt; hiHead = null, hiTail = null; // 高位链表的头结点和尾结点</span>
<span class="line">                    Node&lt;K,V&gt; next;</span>
<span class="line">                    do { // 遍历该链表</span>
<span class="line">                        next = e.next;</span>
<span class="line">                        if ((e.hash &amp; oldCap) == 0) { // 如果该元素在低位链表中</span>
<span class="line">                            if (loTail == null) // 如果低位链表还没有结点</span>
<span class="line">                                loHead = e; // 将该元素作为低位链表的头结点</span>
<span class="line">                            else</span>
<span class="line">                                loTail.next = e; // 如果低位链表已经有结点，将该元素加入低位链表的尾部</span>
<span class="line">                            loTail = e; // 更新低位链表的尾结点</span>
<span class="line">                        }</span>
<span class="line">                        else { // 如果该元素在高位链表中</span>
<span class="line">                            if (hiTail == null) // 如果高位链表还没有结点</span>
<span class="line">                                hiHead = e; // 将该元素作为高位链表的头结点</span>
<span class="line">                            else</span>
<span class="line">                                hiTail.next = e; // 如果高位链表已经有结点，将该元素加入高位链表的尾部</span>
<span class="line">                            hiTail = e; // 更新高位链表的尾结点</span>
<span class="line">                        }</span>
<span class="line">                    } while ((e = next) != null); //</span>
<span class="line">                    if (loTail != null) { // 如果低位链表不为空</span>
<span class="line">                        loTail.next = null; // 将低位链表的尾结点指向 null，以便垃圾回收</span>
<span class="line">                        newTab[j] = loHead; // 将低位链表作为新数组对应位置的元素</span>
<span class="line">                    }</span>
<span class="line">                    if (hiTail != null) { // 如果高位链表不为空</span>
<span class="line">                        hiTail.next = null; // 将高位链表的尾结点指向 null，以便垃圾回收</span>
<span class="line">                        newTab[j + oldCap] = hiHead; // 将高位链表作为新数组对应位置的元素</span>
<span class="line">                    }</span>
<span class="line">                }</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    return newTab; // 返回新数组</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static int indexFor(int h, int length) {</span>
<span class="line">    // assert Integer.bitCount(length) == 1 : &quot;length must be a non-zero power of 2&quot;;</span>
<span class="line">    return h &amp; (length-1);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><ul><li><!----></li><li><!----></li></ul><!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668343020-04d1159a-ce25-4345-a646-0be97e9db864.png"><!----><!---->`<!---->`<!----><!----><!----><!----><ul><li><!----><!---->`<!---->`<!----><!----></li><li><!----><!---->`<!---->`<!----><!----></li><li><!----><!---->`<!---->`<!----><!----></li></ul><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668343514-109d9ab2-42e9-4174-9659-d5eba7be7ace.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">e.next = newTable[i];</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Node&lt;K,V&gt;[] newTab = new Node[newCapacity];</span>
<span class="line">for (int j = 0; j &lt; oldTab.length; j++) {</span>
<span class="line">    Node&lt;K,V&gt; e = oldTab[j];</span>
<span class="line">    if (e != null) {</span>
<span class="line">        int hash = e.hash;</span>
<span class="line">        int newIndex = hash &amp; (newCapacity - 1); // 计算在新数组中的位置</span>
<span class="line">        // 将节点移动到新数组的对应位置</span>
<span class="line">        newTab[newIndex] = e;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static final int hash(Object key) {</span>
<span class="line">    int h;</span>
<span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">final int hash(Object k) {</span>
<span class="line">    int h = hashSeed;</span>
<span class="line">    if (0 != h &amp;&amp; k instanceof String) {</span>
<span class="line">        return sun.misc.Hashing.stringHash32((String) k);</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    h ^= k.hashCode();</span>
<span class="line"></span>
<span class="line">    // This function ensures that hashCodes that differ only by</span>
<span class="line">    // constant multiples at each bit position have a bounded</span>
<span class="line">    // number of collisions (approximately 8 at default load factor).</span>
<span class="line">    h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);</span>
<span class="line">    return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><sup><!----></sup><!----><sup><!----></sup><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><sup><!----></sup><!----><sup><!----></sup><!----><ul><li><!----></li><li><!----></li></ul><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668344027-ba92d6c1-82e3-4871-acdc-719d0804672a.png"><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668344500-c9bb0109-fc99-4ff3-bab4-e90c3cecfe3e.png"><!----><!----><!---->`<!---->`<!----><h4 id="小结-2" tabindex="-1"><a class="header-anchor" href="#小结-2"><span><a href="https://javabetter.cn/collection/hashmap.html#%E5%B0%8F%E7%BB%93-1" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><!----><!----><!----><h3 id="加载因子为什么是-0-75" tabindex="-1"><a class="header-anchor" href="#加载因子为什么是-0-75"><span><!----></span></a></h3><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static final int hash(Object key) {</span>
<span class="line">    int h;</span>
<span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">i = (n - 1) &amp; hash</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li></ul><!----><!----><!----><ul><li><!----></li><li><!----></li></ul><!----><!---->**<!---->**<!---->**<!---->**<!----><!----><!---->**<!---->**<!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static final float DEFAULT_LOAD_FACTOR = 0.75f;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><p><strong><!----></strong><!----></p><!----><!----><!----><!----><!---->[<!---->](https://www.ruanyifeng.com/blog/2015/06/poisson-distribution.html)<!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668350984-686eaaca-54f5-441b-9c05-42157d04ed3f.png"><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Because TreeNodes are about twice the size of regular nodes, we</span>
<span class="line">use them only when bins contain enough nodes to warrant use</span>
<span class="line">(see TREEIFY_THRESHOLD). And when they become too small (due to</span>
<span class="line">removal or resizing) they are converted back to plain bins.  In</span>
<span class="line">usages with well-distributed user hashCodes, tree bins are</span>
<span class="line">rarely used.  Ideally, under random hashCodes, the frequency of</span>
<span class="line">nodes in bins follows a Poisson distribution</span>
<span class="line">(http://en.wikipedia.org/wiki/Poisson_distribution) with a</span>
<span class="line">parameter of about 0.5 on average for the default resizing</span>
<span class="line">threshold of 0.75, although with a large variance because of</span>
<span class="line">resizing granularity. Ignoring variance, the expected</span>
<span class="line">occurrences of list size k are (exp(-0.5) * pow(0.5, k) /</span>
<span class="line">factorial(k)). The first values are:</span>
<span class="line">0:    0.60653066</span>
<span class="line">1:    0.30326533</span>
<span class="line">2:    0.07581633</span>
<span class="line">3:    0.01263606</span>
<span class="line">4:    0.00157952</span>
<span class="line">5:    0.00015795</span>
<span class="line">6:    0.00001316</span>
<span class="line">7:    0.00000094</span>
<span class="line">8:    0.00000006</span>
<span class="line">more: less than 1 in ten million</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->[<!---->](https://javabebetter.cn/collection/linkedlist.html)<!----><!----><!---->[<!---->](https://javabebetter.cn/collection/treemap.html)<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">因为TreeNode（红黑树的节点）的大小大约是常规节点（链表的节点 Node）的两倍，所以只有当桶内包含足够多的节点时才使用红黑树（参见TREEIFY_THRESHOLD「阈值，值为8」，节点数量较多时，红黑树可以提高查询效率）。</span>
<span class="line"></span>
<span class="line">由于删除元素或者调整数组大小（扩容）时（再次散列），红黑树可能会被转换为链表（节点数量小于 8 时），节点数量较少时，链表的效率比红黑树更高，因为红黑树需要更多的内存空间来存储节点。</span>
<span class="line"></span>
<span class="line">在具有良好分布的hashCode使用中，很少使用红黑树。</span>
<span class="line"></span>
<span class="line">理想情况下，在随机hashCode下，节点在桶中的频率遵循泊松分布（https://zh.wikipedia.org/wiki/卜瓦松分布），平均缩放阈值为0.75，忽略方差，列表大小k的预期出现次数为（exp（-0.5）* pow（0.5，k）/ factorial（k））。</span>
<span class="line"></span>
<span class="line">前几个值是：</span>
<span class="line">0: 0.60653066</span>
<span class="line">1: 0.30326533</span>
<span class="line">2: 0.07581633</span>
<span class="line">3: 0.01263606</span>
<span class="line">4: 0.00157952</span>
<span class="line">5: 0.00015795</span>
<span class="line">6: 0.00001316</span>
<span class="line">7: 0.00000094</span>
<span class="line">8: 0.00000006</span>
<span class="line"></span>
<span class="line">更多：小于一千万分之一</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!---->[<!---->](https://segmentfault.com/a/1190000023308658)<!---->**<!---->**<!----><!----><!----><!----><!----><!----><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668350737-c1a96ffe-d119-4626-b732-d8707fae93ec.png"><!----><img referrerpolicy="no-referrer" src=""><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668349151-e0063cca-3b2d-4152-81d2-7d86416d1895.png"><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668350765-6d844351-468c-4081-965c-43fc05f30686.png"><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668350735-2244d036-7a45-4b1d-8edd-95617248bab9.png"><!----><!---->`<!---->`<!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668351015-e91c42f7-b499-46e8-970e-a76ae872ee15.png"><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668351224-a3d5f152-b32d-4d1a-88e9-79f5bda9f0ef.png"><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668351278-e6e8b168-f7c0-4828-8176-73ed5ac69e0d.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">16*0.75=12</span>
<span class="line">32*0.75=24</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><h4 id="小结-3" tabindex="-1"><a class="header-anchor" href="#小结-3"><span><a href="https://javabetter.cn/collection/hashmap.html#%E5%B0%8F%E7%BB%93-2" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><p><strong><!----></strong><!----></p><!----><!----><!----><h3 id="线程不安全" tabindex="-1"><a class="header-anchor" href="#线程不安全"><span><!----></span></a></h3><!----><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><h4 id="多线程下扩容会死循环" tabindex="-1"><a class="header-anchor" href="#多线程下扩容会死循环"><span><!----></span></a></h4><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// newCapacity为新的容量</span>
<span class="line">void resize(int newCapacity) {</span>
<span class="line">    // 小数组，临时过度下</span>
<span class="line">    Entry[] oldTable = table;</span>
<span class="line">    // 扩容前的容量</span>
<span class="line">    int oldCapacity = oldTable.length;</span>
<span class="line">    // MAXIMUM_CAPACITY 为最大容量，2 的 30 次方 = 1&lt;&lt;30</span>
<span class="line">    if (oldCapacity == MAXIMUM_CAPACITY) {</span>
<span class="line">        // 容量调整为 Integer 的最大值 0x7fffffff（十六进制）=2 的 31 次方-1</span>
<span class="line">        threshold = Integer.MAX_VALUE;</span>
<span class="line">        return;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    // 初始化一个新的数组（大容量）</span>
<span class="line">    Entry[] newTable = new Entry[newCapacity];</span>
<span class="line">    // 把小数组的元素转移到大数组中</span>
<span class="line">    transfer(newTable, initHashSeedAsNeeded(newCapacity));</span>
<span class="line">    // 引用新的大数组</span>
<span class="line">    table = newTable;</span>
<span class="line">    // 重新计算阈值</span>
<span class="line">    threshold = (int)Math.min(newCapacity * loadFactor, MAXIMUM_CAPACITY + 1);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">void transfer(Entry[] newTable, boolean rehash) {</span>
<span class="line">    // 新的容量</span>
<span class="line">    int newCapacity = newTable.length;</span>
<span class="line">    // 遍历小数组</span>
<span class="line">    for (Entry&lt;K,V&gt; e : table) {</span>
<span class="line">        while(null != e) {</span>
<span class="line">            // 拉链法，相同 key 上的不同值</span>
<span class="line">            Entry&lt;K,V&gt; next = e.next;</span>
<span class="line">            // 是否需要重新计算 hash</span>
<span class="line">            if (rehash) {</span>
<span class="line">                e.hash = null == e.key ? 0 : hash(e.key);</span>
<span class="line">            }</span>
<span class="line">            // 根据大数组的容量，和键的 hash 计算元素在数组中的下标</span>
<span class="line">            int i = indexFor(e.hash, newCapacity);</span>
<span class="line"></span>
<span class="line">            // 同一位置上的新元素被放在链表的头部</span>
<span class="line">            e.next = newTable[i];</span>
<span class="line"></span>
<span class="line">            // 放在新的数组上</span>
<span class="line">            newTable[i] = e;</span>
<span class="line"></span>
<span class="line">            // 链表上的下一个元素</span>
<span class="line">            e = next;</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668351269-ec1f9beb-ea4f-408b-a65f-64b701e1d2e5.png"><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668352480-1da760d4-956f-47b4-918e-6be55e93e318.png"><!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668352473-19e6d34f-17ae-438e-8023-1da06599b29e.png"><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668352414-03ada39d-d1d7-4f62-9c60-53d3a2b64138.png"><!----><!----><!---->`<!---->`<!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668352422-7a192a16-4888-4a58-9bf6-01403aecdbd7.png"><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668352427-3cc4b546-4c9b-4890-9e9d-6bc7ae01a435.png"><!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668353534-3109b309-dcda-4b22-b165-ca35f531f5bf.png"><!----><!----><h4 id="多线程下-put-会导致元素丢失" tabindex="-1"><a class="header-anchor" href="#多线程下-put-会导致元素丢失"><span><!----></span></a></h4><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668353540-e3fd38e6-e47f-4d71-b4b3-0b5b92755634.png"><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">final V putVal(int hash, K key, V value, boolean onlyIfAbsent,</span>
<span class="line">               boolean evict) {</span>
<span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;</span>
<span class="line"></span>
<span class="line">    // 步骤①：tab为空则创建</span>
<span class="line">    if ((tab = table) == null || (n = tab.length) == 0)</span>
<span class="line">        n = (tab = resize()).length;</span>
<span class="line"></span>
<span class="line">    // 步骤②：计算index，并对null做处理</span>
<span class="line">    if ((p = tab[i = (n - 1) &amp; hash]) == null)</span>
<span class="line">        tab[i] = newNode(hash, key, value, null);</span>
<span class="line">    else {</span>
<span class="line">        Node&lt;K,V&gt; e; K k;</span>
<span class="line"></span>
<span class="line">        // 步骤③：节点key存在，直接覆盖value</span>
<span class="line">        if (p.hash == hash &amp;&amp;</span>
<span class="line">            ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span>
<span class="line">            e = p;</span>
<span class="line"></span>
<span class="line">        // 步骤④：判断该链为红黑树</span>
<span class="line">        else if (p instanceof TreeNode)</span>
<span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</span>
<span class="line"></span>
<span class="line">        // 步骤⑤：该链为链表</span>
<span class="line">        else {</span>
<span class="line">            for (int binCount = 0; ; ++binCount) {</span>
<span class="line">                if ((e = p.next) == null) {</span>
<span class="line">                    p.next = newNode(hash, key, value, null);</span>
<span class="line"></span>
<span class="line">                    //链表长度大于8转换为红黑树进行处理</span>
<span class="line">                    if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span>
<span class="line">                        treeifyBin(tab, hash);</span>
<span class="line">                    break;</span>
<span class="line">                }</span>
<span class="line"></span>
<span class="line">                // key已经存在直接覆盖value</span>
<span class="line">                if (e.hash == hash &amp;&amp;</span>
<span class="line">                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span>
<span class="line">                    break;</span>
<span class="line">                p = e;</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line"></span>
<span class="line">        // 步骤⑥、直接覆盖</span>
<span class="line">        if (e != null) { // existing mapping for key</span>
<span class="line">            V oldValue = e.value;</span>
<span class="line">            if (!onlyIfAbsent || oldValue == null)</span>
<span class="line">                e.value = value;</span>
<span class="line">            afterNodeAccess(e);</span>
<span class="line">            return oldValue;</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    ++modCount;</span>
<span class="line"></span>
<span class="line">    // 步骤⑦：超过最大容量 就扩容</span>
<span class="line">    if (++size &gt; threshold)</span>
<span class="line">        resize();</span>
<span class="line">    afterNodeInsertion(evict);</span>
<span class="line">    return null;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">if ((p = tab[i = (n - 1) &amp; hash]) == null)</span>
<span class="line">    tab[i] = newNode(hash, key, value, null);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668353545-44ee78b3-7c0a-4353-b63f-912ab1b9eddc.png"><!----><!---->`<!---->`<!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668353540-173fd000-14f1-402b-bf66-5771a11320c3.png"><!----><h4 id="put-和-get-并发时会导致-get-到-null" tabindex="-1"><a class="header-anchor" href="#put-和-get-并发时会导致-get-到-null"><span><!----></span></a></h4><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668355421-ab4a229a-f89f-41e2-bb6f-c14c9a1704fd.png"><!----><!----><ul><li><a href="https://blog.csdn.net/lonyw/article/details/80519652" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zhuanlan.zhihu.com/p/91636401" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.zhihu.com/question/20733617" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zhuanlan.zhihu.com/p/21673805" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h4 id="小结-4" tabindex="-1"><a class="header-anchor" href="#小结-4"><span><!----></span></a></h4><!----><!----><!---->[<!---->](https://javabebetter.cn/thread/ConcurrentHashMap.html)<!----><h3 id="小结-5" tabindex="-1"><a class="header-anchor" href="#小结-5"><span><!----></span></a></h3><!----><ul><li><!----></li><li><!---->[<!---->](https://javabebetter.cn/thread/ConcurrentHashMap.html)<!----></li><li><!----></li><li><!----></li><li><!----></li><li><!----></li><li><!---->[<!---->](https://javabebetter.cn/collection/treemap.html)<!----></li></ul><!----><!----><ul><li><a href="https://paicoding.com/column/7/1" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://paicoding.com/column/7/13" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><!----><h2 id="linkedhashmap-详解" tabindex="-1"><a class="header-anchor" href="#linkedhashmap-详解"><span>LinkedHashMap 详解</span></a></h2><!----><!----><!---->[<!---->](https://javabetter.cn/collection/hashmap.html)<!----><!----><!----><!----><!---->[<!---->](https://javabetter.cn/collection/hashmap.html)<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">final V putVal(int hash, K key, V value, boolean onlyIfAbsent,</span>
<span class="line"></span>
<span class="line">               boolean evict) {</span>
<span class="line">    HashMap.Node&lt;K,V&gt;[] tab; HashMap.Node&lt;K,V&gt; p; int n, i;</span>
<span class="line">    // ①、数组 table 为 null 时，调用 resize 方法创建默认大小的数组</span>
<span class="line">    if ((tab = table) == null || (n = tab.length) == 0)</span>
<span class="line">        n = (tab = resize()).length;</span>
<span class="line">    // ②、计算下标，如果该位置上没有值，则填充</span>
<span class="line">    if ((p = tab[i = (n - 1) &amp; hash]) == null)</span>
<span class="line">        tab[i] = newNode(hash, key, value, null);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建 HashMap 对象，键类型为 String，值类型为 String</span>
<span class="line">Map&lt;String, String&gt; map = new HashMap&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 使用 put() 方法向 HashMap 中添加数据</span>
<span class="line">map.put(&quot;chenmo&quot;, &quot;沉默&quot;);</span>
<span class="line">map.put(&quot;wanger&quot;, &quot;王二&quot;);</span>
<span class="line">map.put(&quot;chenqingyang&quot;, &quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历 HashMap，输出所有键值对</span>
<span class="line">for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {</span>
<span class="line">    String key = entry.getKey();</span>
<span class="line">    String value = entry.getValue();</span>
<span class="line">    System.out.println(&quot;Key: &quot; + key + &quot;, Value: &quot; + value);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Key: chenmo, Value: 沉默</span>
<span class="line">Key: chenqingyang, Value: 陈清扬</span>
<span class="line">Key: wanger, Value: 王二</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class LinkedHashMap&lt;K,V&gt;</span>
<span class="line"></span>
<span class="line">    extends HashMap&lt;K,V&gt;</span>
<span class="line"></span>
<span class="line">    implements Map&lt;K,V&gt;{}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; {</span>
<span class="line">    Entry&lt;K,V&gt; before, after;</span>
<span class="line">    Entry(int hash, K key, V value, Node&lt;K,V&gt; next) {</span>
<span class="line">        super(hash, key, value, next);</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->[<!---->](https://javabetter.cn/collection/linkedlist.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建 LinkedHashMap 对象，键类型为 String，值类型为 String</span>
<span class="line">Map&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 使用 put() 方法向 LinkedHashMap 中添加数据</span>
<span class="line">map.put(&quot;chenmo&quot;, &quot;沉默&quot;);</span>
<span class="line">map.put(&quot;wanger&quot;, &quot;王二&quot;);</span>
<span class="line">map.put(&quot;chenqingyang&quot;, &quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 遍历 LinkedHashMap，输出所有键值对</span>
<span class="line">for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {</span>
<span class="line">    String key = entry.getKey();</span>
<span class="line">    String value = entry.getValue();</span>
<span class="line">    System.out.println(&quot;Key: &quot; + key + &quot;, Value: &quot; + value);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Key: chenmo, Value: 沉默</span>
<span class="line">Key: wanger, Value: 王二</span>
<span class="line">Key: chenqingyang, Value: 陈清扬</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h3 id="插入顺序" tabindex="-1"><a class="header-anchor" href="#插入顺序"><span><!----></span></a></h3><!----><!---->[<!---->](https://javabetter.cn/collection/hashmap.html)<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Map&lt;String, String&gt; hashMap = new HashMap&lt;&gt;();</span>
<span class="line">hashMap.put(&quot;沉&quot;, &quot;沉默王二&quot;);</span>
<span class="line">hashMap.put(&quot;默&quot;, &quot;沉默王二&quot;);</span>
<span class="line">hashMap.put(&quot;王&quot;, &quot;沉默王二&quot;);</span>
<span class="line">hashMap.put(&quot;二&quot;, &quot;沉默王二&quot;);</span>
<span class="line">hashMap.put(null, null);</span>
<span class="line"></span>
<span class="line">for (String key : hashMap.keySet()) {</span>
<span class="line">    System.out.println(key + &quot; : &quot; + hashMap.get(key));</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">null : null</span>
<span class="line">默 : 沉默王二</span>
<span class="line">沉 : 沉默王二</span>
<span class="line">王 : 沉默王二</span>
<span class="line">二 : 沉默王二</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Map&lt;String, String&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();</span>
<span class="line">linkedHashMap.put(&quot;沉&quot;, &quot;沉默王二&quot;);</span>
<span class="line">linkedHashMap.put(&quot;默&quot;, &quot;沉默王二&quot;);</span>
<span class="line">linkedHashMap.put(&quot;王&quot;, &quot;沉默王二&quot;);</span>
<span class="line">linkedHashMap.put(&quot;二&quot;, &quot;沉默王二&quot;);</span>
<span class="line">linkedHashMap.put(null, null);</span>
<span class="line"></span>
<span class="line">for (String key : linkedHashMap.keySet()) {</span>
<span class="line">    System.out.println(key + &quot; : &quot; + linkedHashMap.get(key));</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">沉 : 沉默王二</span>
<span class="line">默 : 沉默王二</span>
<span class="line">王 : 沉默王二</span>
<span class="line">二 : 沉默王二</span>
<span class="line">null : null</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->**<!---->**<!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Node&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; next) {</span>
<span class="line">    return new Node&lt;&gt;(hash, key, value, next);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">HashMap.Node&lt;K,V&gt; newNode(int hash, K key, V value, HashMap.Node&lt;K,V&gt; e) {</span>
<span class="line">    LinkedHashMap.Entry&lt;K,V&gt; p =</span>
<span class="line">            new LinkedHashMap.Entry&lt;&gt;(hash, key, value, e);</span>
<span class="line">    linkNodeLast(p);</span>
<span class="line">    return p;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; {</span>
<span class="line">    Entry&lt;K,V&gt; before, after;</span>
<span class="line">    Entry(int hash, K key, V value, Node&lt;K,V&gt; next) {</span>
<span class="line">        super(hash, key, value, next);</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 将指定节点插入到链表的尾部</span>
<span class="line"> *</span>
<span class="line"> * @param p 要插入的节点</span>
<span class="line"> */</span>
<span class="line">private void linkNodeLast(LinkedHashMap.Entry&lt;K,V&gt; p) {</span>
<span class="line">    LinkedHashMap.Entry&lt;K,V&gt; last = tail; // 获取链表的尾节点</span>
<span class="line">    tail = p; // 将 p 设为尾节点</span>
<span class="line">    if (last == null)</span>
<span class="line">        head = p; // 如果链表为空，则将 p 设为头节点</span>
<span class="line">    else {</span>
<span class="line">        p.before = last; // 将 p 的前驱节点设为链表的尾节点</span>
<span class="line">        last.after = p; // 将链表的尾节点的后继节点设为 p</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><h3 id="访问顺序" tabindex="-1"><a class="header-anchor" href="#访问顺序"><span><!----></span></a></h3><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;(16, .75f, true);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!---->[<!---->](https://javabetter.cn/collection/hashmap.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Map&lt;String, String&gt; linkedHashMap = new LinkedHashMap&lt;&gt;(16, .75f, true);</span>
<span class="line">linkedHashMap.put(&quot;沉&quot;, &quot;沉默王二&quot;);</span>
<span class="line">linkedHashMap.put(&quot;默&quot;, &quot;沉默王二&quot;);</span>
<span class="line">linkedHashMap.put(&quot;王&quot;, &quot;沉默王二&quot;);</span>
<span class="line">linkedHashMap.put(&quot;二&quot;, &quot;沉默王二&quot;);</span>
<span class="line"></span>
<span class="line">System.out.println(linkedHashMap);</span>
<span class="line"></span>
<span class="line">linkedHashMap.get(&quot;默&quot;);</span>
<span class="line">System.out.println(linkedHashMap);</span>
<span class="line"></span>
<span class="line">linkedHashMap.get(&quot;王&quot;);</span>
<span class="line">System.out.println(linkedHashMap);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">{沉=沉默王二, 默=沉默王二, 王=沉默王二, 二=沉默王二}</span>
<span class="line">{沉=沉默王二, 王=沉默王二, 二=沉默王二, 默=沉默王二}</span>
<span class="line">{沉=沉默王二, 二=沉默王二, 默=沉默王二, 王=沉默王二}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!----><h3 id="lru-缓存" tabindex="-1"><a class="header-anchor" href="#lru-缓存"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 自定义的 MyLinkedHashMap 类，继承了 Java 中内置的 LinkedHashMap&lt;K, V&gt; 类。</span>
<span class="line"> * 用于实现一个具有固定大小的缓存，当缓存达到最大容量时，会自动移除最早加入的元素，以腾出空间给新的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param &lt;K&gt; 键的类型</span>
<span class="line"> * @param &lt;V&gt; 值的类型</span>
<span class="line"> */</span>
<span class="line">public class MyLinkedHashMap&lt;K, V&gt; extends LinkedHashMap&lt;K, V&gt; {</span>
<span class="line"></span>
<span class="line">    private static final int MAX_ENTRIES = 5; // 表示 MyLinkedHashMap 中最多存储的键值对数量</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 构造方法，使用 super() 调用了父类的构造函数，并传递了三个参数：initialCapacity、loadFactor 和 accessOrder。</span>
<span class="line">     *</span>
<span class="line">     * @param initialCapacity 初始容量</span>
<span class="line">     * @param loadFactor      负载因子</span>
<span class="line">     * @param accessOrder     访问顺序</span>
<span class="line">     */</span>
<span class="line">    public MyLinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) {</span>
<span class="line">        super(initialCapacity, loadFactor, accessOrder);</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 重写父类的 removeEldestEntry() 方法，用于指示是否应该移除最早加入的元素。</span>
<span class="line">     * 如果返回 true，那么将删除最早加入的元素。</span>
<span class="line">     *</span>
<span class="line">     * @param eldest 最早加入的元素</span>
<span class="line">     * @return 如果当前 MyLinkedHashMap 中元素的数量大于 MAX_ENTRIES，返回 true，否则返回 false。</span>
<span class="line">     */</span>
<span class="line">    @Override</span>
<span class="line">    protected boolean removeEldestEntry(Map.Entry eldest) {</span>
<span class="line">        return size() &gt; MAX_ENTRIES;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">MyLinkedHashMap&lt;String,String&gt; map = new MyLinkedHashMap&lt;&gt;(16,0.75f,true);</span>
<span class="line">map.put(&quot;沉&quot;, &quot;沉默王二&quot;);</span>
<span class="line">map.put(&quot;默&quot;, &quot;沉默王二&quot;);</span>
<span class="line">map.put(&quot;王&quot;, &quot;沉默王二&quot;);</span>
<span class="line">map.put(&quot;二&quot;, &quot;沉默王二&quot;);</span>
<span class="line">map.put(&quot;一枚有趣的程序员&quot;, &quot;一枚有趣的程序员&quot;);</span>
<span class="line"></span>
<span class="line">System.out.println(map);</span>
<span class="line"></span>
<span class="line">map.put(&quot;一枚有颜值的程序员&quot;, &quot;一枚有颜值的程序员&quot;);</span>
<span class="line">System.out.println(map);</span>
<span class="line"></span>
<span class="line">map.put(&quot;一枚有才华的程序员&quot;,&quot;一枚有才华的程序员&quot;);</span>
<span class="line">System.out.println(map);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">{沉=沉默王二, 默=沉默王二, 王=沉默王二, 二=沉默王二, 一枚有趣的程序员=一枚有趣的程序员}</span>
<span class="line">{默=沉默王二, 王=沉默王二, 二=沉默王二, 一枚有趣的程序员=一枚有趣的程序员, 一枚有颜值的程序员=一枚有颜值的程序员}</span>
<span class="line">{王=沉默王二, 二=沉默王二, 一枚有趣的程序员=一枚有趣的程序员, 一枚有颜值的程序员=一枚有颜值的程序员, 一枚有才华的程序员=一枚有才华的程序员}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;沉=沉默王二&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;默=沉默王二&lt;/font&gt;</code><!----><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">MyLinkedHashMap&lt;String,String&gt; map = new MyLinkedHashMap&lt;&gt;(16,0.75f,true);</span>
<span class="line">map.put(&quot;沉&quot;, &quot;沉默王二&quot;);</span>
<span class="line">map.put(&quot;默&quot;, &quot;沉默王二&quot;);</span>
<span class="line">map.put(&quot;王&quot;, &quot;沉默王二&quot;);</span>
<span class="line">map.put(&quot;二&quot;, &quot;沉默王二&quot;);</span>
<span class="line">map.put(&quot;一枚有趣的程序员&quot;, &quot;一枚有趣的程序员&quot;);</span>
<span class="line"></span>
<span class="line">System.out.println(map);</span>
<span class="line"></span>
<span class="line">map.put(&quot;一枚有颜值的程序员&quot;, &quot;一枚有颜值的程序员&quot;);</span>
<span class="line">System.out.println(map);</span>
<span class="line"></span>
<span class="line">map.get(&quot;默&quot;);</span>
<span class="line">map.put(&quot;一枚有才华的程序员&quot;,&quot;一枚有才华的程序员&quot;);</span>
<span class="line">System.out.println(map);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">{沉=沉默王二, 默=沉默王二, 王=沉默王二, 二=沉默王二, 一枚有趣的程序员=一枚有趣的程序员}</span>
<span class="line">{默=沉默王二, 王=沉默王二, 二=沉默王二, 一枚有趣的程序员=一枚有趣的程序员, 一枚有颜值的程序员=一枚有颜值的程序员}</span>
<span class="line">{二=沉默王二, 一枚有趣的程序员=一枚有趣的程序员, 一枚有颜值的程序员=一枚有颜值的程序员, 默=沉默王二, 一枚有才华的程序员=一枚有才华的程序员}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;沉=沉默王二&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;王=沉默王二&lt;/font&gt;</code><!----><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">void afterNodeAccess(Node&lt;K,V&gt; p) { }</span>
<span class="line">void afterNodeInsertion(boolean evict) { }</span>
<span class="line">void afterNodeRemoval(Node&lt;K,V&gt; p) { }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;afterNodeAccess()&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;get()&lt;/font&gt;</code><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;afterNodeInsertion()&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;put()&lt;/font&gt;</code><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;afterNodeRemoval()&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove()&lt;/font&gt;</code><!----><!----></p><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 在访问节点后，将节点移动到链表的尾部</span>
<span class="line"> *</span>
<span class="line"> * @param e 要移动的节点</span>
<span class="line"> */</span>
<span class="line">void afterNodeAccess(HashMap.Node&lt;K,V&gt; e) { // move node to last</span>
<span class="line">    LinkedHashMap.Entry&lt;K,V&gt; last;</span>
<span class="line">    if (accessOrder &amp;&amp; (last = tail) != e) { // 如果按访问顺序排序，并且访问的节点不是尾节点</span>
<span class="line">        LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;</span>
<span class="line">        p.after = null; // 将要移动的节点的后继节点设为 null</span>
<span class="line">        if (b == null)</span>
<span class="line">            head = a; // 如果要移动的节点没有前驱节点，则将要移动的节点设为头节点</span>
<span class="line">        else</span>
<span class="line">            b.after = a; // 将要移动的节点的前驱节点的后继节点设为要移动的节点的后继节点</span>
<span class="line">        if (a != null)</span>
<span class="line">            a.before = b; // 如果要移动的节点有后继节点，则将要移动的节点的后继节点的前驱节点设为要移动的节点的前驱节点</span>
<span class="line">        else</span>
<span class="line">            last = b; // 如果要移动的节点没有后继节点，则将要移动的节点的前驱节点设为尾节点</span>
<span class="line">        if (last == null)</span>
<span class="line">            head = p; // 如果尾节点为空，则将要移动的节点设为头节点</span>
<span class="line">        else {</span>
<span class="line">            p.before = last; // 将要移动的节点的前驱节点设为尾节点</span>
<span class="line">            last.after = p; // 将尾节点的后继节点设为要移动的节点</span>
<span class="line">        }</span>
<span class="line">        tail = p; // 将要移动的节点设为尾节点</span>
<span class="line">        ++modCount; // 修改计数器</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 在插入节点后，如果需要，可能会删除最早加入的元素</span>
<span class="line"> *</span>
<span class="line"> * @param evict 是否需要删除最早加入的元素</span>
<span class="line"> */</span>
<span class="line">void afterNodeInsertion(boolean evict) { // possibly remove eldest</span>
<span class="line">    LinkedHashMap.Entry&lt;K,V&gt; first;</span>
<span class="line">    if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) { // 如果需要删除最早加入的元素</span>
<span class="line">        K key = first.key; // 获取要删除元素的键</span>
<span class="line">        removeNode(hash(key), key, null, false, true); // 调用 removeNode() 方法删除元素</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;removeEldestEntry()&lt;/font&gt;</code><!----><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;removeNode()&lt;/font&gt;</code><!----><!----></p><h3 id="小结-6" tabindex="-1"><a class="header-anchor" href="#小结-6"><span><!----></span></a></h3><!----><!----><!----><!----><!----><!----><!----><!----><h2 id="treemap-详解" tabindex="-1"><a class="header-anchor" href="#treemap-详解"><span><!----></span></a></h2><!----><!---->[<!---->](https://javabetter.cn/collection/linkedhashmap.html)<!----><!----><!----><!----><!---->[<!---->](https://javabetter.cn/collection/time-complexity.html)<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">        8</span>
<span class="line">      /   \</span>
<span class="line">     3     10</span>
<span class="line">    / \      \</span>
<span class="line">   1   6     14</span>
<span class="line">      / \    /</span>
<span class="line">     4   7  13</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li><li><!----></li><li><!----></li><li><!----></li></ul><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><!----><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">        6</span>
<span class="line">      /   \</span>
<span class="line">     4     8</span>
<span class="line">    /     / \</span>
<span class="line">   3     7   9</span>
<span class="line">  /</span>
<span class="line"> 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">    1</span>
<span class="line">     \</span>
<span class="line">      2</span>
<span class="line">       \</span>
<span class="line">        3</span>
<span class="line">         \</span>
<span class="line">          4</span>
<span class="line">           \</span>
<span class="line">            5</span>
<span class="line">             \</span>
<span class="line">              6</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!---->[<!---->](https://javabetter.cn/collection/time-complexity.html)<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">        8</span>
<span class="line">      /   \</span>
<span class="line">     4     12</span>
<span class="line">    / \    / \</span>
<span class="line">   2   6  10  14</span>
<span class="line">      / \    / \</span>
<span class="line">     5   7  13  15</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">8</span>
<span class="line">         /   \</span>
<span class="line">        4     12</span>
<span class="line">       / \   /  \</span>
<span class="line">      2   6 10  14</span>
<span class="line">         / \</span>
<span class="line">        5   7</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">8B</span>
<span class="line">         /   \</span>
<span class="line">        4R    12R</span>
<span class="line">       / \   /  \</span>
<span class="line">      2B 6B 10B 14B</span>
<span class="line">         / \</span>
<span class="line">        5R 7R</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li><li><!----></li><li><!----></li><li><!----></li></ul><!----><!----><h3 id="自然顺序" tabindex="-1"><a class="header-anchor" href="#自然顺序"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">TreeMap&lt;Integer,String&gt; mapInt = new TreeMap&lt;&gt;();</span>
<span class="line">mapInt.put(3, &quot;沉默王二&quot;);</span>
<span class="line">mapInt.put(2, &quot;沉默王二&quot;);</span>
<span class="line">mapInt.put(1, &quot;沉默王二&quot;);</span>
<span class="line">mapInt.put(5, &quot;沉默王二&quot;);</span>
<span class="line">mapInt.put(4, &quot;沉默王二&quot;);</span>
<span class="line"></span>
<span class="line">System.out.println(mapInt);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">{1=沉默王二, 2=沉默王二, 3=沉默王二, 4=沉默王二, 5=沉默王二}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public V put(K key, V value) {</span>
<span class="line">    Entry&lt;K,V&gt; t = root; // 将根节点赋值给变量t</span>
<span class="line">    if (t == null) { // 如果根节点为null，说明TreeMap为空</span>
<span class="line">        compare(key, key); // type (and possibly null) check，检查key的类型是否合法</span>
<span class="line">        root = new Entry&lt;&gt;(key, value, null); // 创建一个新节点作为根节点</span>
<span class="line">        size = 1; // size设置为1</span>
<span class="line">        return null; // 返回null，表示插入成功</span>
<span class="line">    }</span>
<span class="line">    int cmp;</span>
<span class="line">    Entry&lt;K,V&gt; parent;</span>
<span class="line">    // split comparator and comparable paths，根据使用的比较方法进行查找</span>
<span class="line">    Comparator&lt;? super K&gt; cpr = comparator; // 获取比较器</span>
<span class="line">    if (cpr != null) { // 如果使用了Comparator</span>
<span class="line">        do {</span>
<span class="line">            parent = t; // 将当前节点赋值给parent</span>
<span class="line">            cmp = cpr.compare(key, t.key); // 使用Comparator比较key和t的键的大小</span>
<span class="line">            if (cmp &lt; 0) // 如果key小于t的键</span>
<span class="line">                t = t.left; // 在t的左子树中查找</span>
<span class="line">            else if (cmp &gt; 0) // 如果key大于t的键</span>
<span class="line">                t = t.right; // 在t的右子树中查找</span>
<span class="line">            else // 如果key等于t的键</span>
<span class="line">                return t.setValue(value); // 直接更新t的值</span>
<span class="line">        } while (t != null);</span>
<span class="line">    }</span>
<span class="line">    else { // 如果没有使用Comparator</span>
<span class="line">        if (key == null) // 如果key为null</span>
<span class="line">            throw new NullPointerException(); // 抛出NullPointerException异常</span>
<span class="line">            Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key; // 将key强制转换为Comparable类型</span>
<span class="line">        do {</span>
<span class="line">            parent = t; // 将当前节点赋值给parent</span>
<span class="line">            cmp = k.compareTo(t.key); // 使用Comparable比较key和t的键的大小</span>
<span class="line">            if (cmp &lt; 0) // 如果key小于t的键</span>
<span class="line">                t = t.left; // 在t的左子树中查找</span>
<span class="line">            else if (cmp &gt; 0) // 如果key大于t的键</span>
<span class="line">                t = t.right; // 在t的右子树中查找</span>
<span class="line">            else // 如果key等于t的键</span>
<span class="line">                return t.setValue(value); // 直接更新t的值</span>
<span class="line">        } while (t != null);</span>
<span class="line">    }</span>
<span class="line">    // 如果没有找到相同的键，需要创建一个新节点插入到TreeMap中</span>
<span class="line">    Entry&lt;K,V&gt; e = new Entry&lt;&gt;(key, value, parent); // 创建一个新节点</span>
<span class="line">    if (cmp &lt; 0) // 如果key小于parent的键</span>
<span class="line">        parent.left = e; // 将e作为parent的左子节点</span>
<span class="line">    else</span>
<span class="line">        parent.right = e; // 将e作为parent的右子节点</span>
<span class="line">    fixAfterInsertion(e); // 插入节点后需要进行平衡操作</span>
<span class="line">    size++; // size加1</span>
<span class="line">    return null; // 返回null，表示插入成功</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><!----></li><li><!----></li><li><!----></li><li><!----></li><li><!----></li><li><!----></li></ul><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public int compareTo(String anotherString) {</span>
<span class="line">    // 获取当前字符串和另一个字符串的长度</span>
<span class="line">    int len1 = value.length;</span>
<span class="line">    int len2 = anotherString.value.length;</span>
<span class="line">    // 取两个字符串长度的较短者作为比较的上限</span>
<span class="line">    int lim = Math.min(len1, len2);</span>
<span class="line">    // 获取当前字符串和另一个字符串的字符数组</span>
<span class="line">    char v1[] = value;</span>
<span class="line">    char v2[] = anotherString.value;</span>
<span class="line"></span>
<span class="line">    int k = 0;</span>
<span class="line">    // 对两个字符串的每个字符进行比较</span>
<span class="line">    while (k &lt; lim) {</span>
<span class="line">        char c1 = v1[k];</span>
<span class="line">        char c2 = v2[k];</span>
<span class="line">        // 如果两个字符不相等，返回它们的差值</span>
<span class="line">        if (c1 != c2) {</span>
<span class="line">            return c1 - c2;</span>
<span class="line">        }</span>
<span class="line">        k++;</span>
<span class="line">    }</span>
<span class="line">    // 如果两个字符串前面的字符都相等，返回它们长度的差值</span>
<span class="line">    return len1 - len2;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">TreeMap&lt;String,String&gt; mapString = new TreeMap&lt;&gt;();</span>
<span class="line">mapString.put(&quot;c&quot;, &quot;沉默王二&quot;);</span>
<span class="line">mapString.put(&quot;b&quot;, &quot;沉默王二&quot;);</span>
<span class="line">mapString.put(&quot;a&quot;, &quot;沉默王二&quot;);</span>
<span class="line">mapString.put(&quot;e&quot;, &quot;沉默王二&quot;);</span>
<span class="line">mapString.put(&quot;d&quot;, &quot;沉默王二&quot;);</span>
<span class="line"></span>
<span class="line">System.out.println(mapString);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">{a=沉默王二, b=沉默王二, c=沉默王二, d=沉默王二, e=沉默王二}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><h3 id="自定义排序" tabindex="-1"><a class="header-anchor" href="#自定义排序"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">TreeMap&lt;Integer,String&gt; mapIntReverse = new TreeMap&lt;&gt;(Comparator.reverseOrder());</span>
<span class="line">mapIntReverse.put(3, &quot;沉默王二&quot;);</span>
<span class="line">mapIntReverse.put(2, &quot;沉默王二&quot;);</span>
<span class="line">mapIntReverse.put(1, &quot;沉默王二&quot;);</span>
<span class="line">mapIntReverse.put(5, &quot;沉默王二&quot;);</span>
<span class="line">mapIntReverse.put(4, &quot;沉默王二&quot;);</span>
<span class="line"></span>
<span class="line">System.out.println(mapIntReverse);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public TreeMap(Comparator&lt;? super K&gt; comparator) {</span>
<span class="line">    this.comparator = comparator;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;Comparator.reverseOrder()&lt;/font&gt;</code><!----><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private static class ReverseComparator</span>
<span class="line">        implements Comparator&lt;Comparable&lt;Object&gt;&gt;, Serializable {</span>
<span class="line">    // 单例模式，用于表示逆序比较器</span>
<span class="line">    static final ReverseComparator REVERSE_ORDER</span>
<span class="line">            = new ReverseComparator();</span>
<span class="line"></span>
<span class="line">    // 实现比较方法，对两个实现了Comparable接口的对象进行逆序比较</span>
<span class="line">    public int compare(Comparable&lt;Object&gt; c1, Comparable&lt;Object&gt; c2) {</span>
<span class="line">        return c2.compareTo(c1); // 调用c2的compareTo()方法，以c1为参数，实现逆序比较</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    // 反序列化时，返回Collections.reverseOrder()，保证单例模式</span>
<span class="line">    private Object readResolve() {</span>
<span class="line">        return Collections.reverseOrder();</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    // 返回正序比较器</span>
<span class="line">    @Override</span>
<span class="line">    public Comparator&lt;Comparable&lt;Object&gt;&gt; reversed() {</span>
<span class="line">        return Comparator.naturalOrder();</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">{5=沉默王二, 4=沉默王二, 3=沉默王二, 2=沉默王二, 1=沉默王二}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><h3 id="排序的好处" tabindex="-1"><a class="header-anchor" href="#排序的好处"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Integer highestKey = mapInt.lastKey();</span>
<span class="line">Integer lowestKey = mapInt.firstKey();</span>
<span class="line">Set&lt;Integer&gt; keysLessThan3 = mapInt.headMap(3).keySet();</span>
<span class="line">Set&lt;Integer&gt; keysGreaterThanEqTo3 = mapInt.tailMap(3).keySet();</span>
<span class="line"></span>
<span class="line">System.out.println(highestKey);</span>
<span class="line">System.out.println(lowestKey);</span>
<span class="line"></span>
<span class="line">System.out.println(keysLessThan3);</span>
<span class="line">System.out.println(keysGreaterThanEqTo3);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!---->`<!---->`<!----><!----><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;headMap()&lt;/font&gt;</code><!----><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;tailMap()&lt;/font&gt;</code><!----><!----></p><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">5</span>
<span class="line">1</span>
<span class="line">[1, 2]</span>
<span class="line">[3, 4, 5]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">TreeMap&lt;Integer, String&gt; treeMap = new TreeMap&lt;&gt;();</span>
<span class="line">treeMap.put(1, &quot;value1&quot;);</span>
<span class="line">treeMap.put(2, &quot;value2&quot;);</span>
<span class="line">treeMap.put(3, &quot;value3&quot;);</span>
<span class="line">treeMap.put(4, &quot;value4&quot;);</span>
<span class="line">treeMap.put(5, &quot;value5&quot;);</span>
<span class="line"></span>
<span class="line">// headMap示例，获取小于3的键值对</span>
<span class="line">Map&lt;Integer, String&gt; headMap = treeMap.headMap(3);</span>
<span class="line">System.out.println(headMap); // 输出 {1=value1, 2=value2}</span>
<span class="line"></span>
<span class="line">// tailMap示例，获取大于等于4的键值对</span>
<span class="line">Map&lt;Integer, String&gt; tailMap = treeMap.tailMap(4);</span>
<span class="line">System.out.println(tailMap); // 输出 {4=value4, 5=value5}</span>
<span class="line"></span>
<span class="line">// subMap示例，获取大于等于2且小于4的键值对</span>
<span class="line">Map&lt;Integer, String&gt; subMap = treeMap.subMap(2, 4);</span>
<span class="line">System.out.println(subMap); // 输出 {2=value2, 3=value3}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h3 id="如何选择-map" tabindex="-1"><a class="header-anchor" href="#如何选择-map"><span><!----></span></a></h3><!----><!---->[<!---->](https://javabetter.cn/collection/hashmap.html)<!----><!----><!---->[<!---->](https://javabetter.cn/collection/linkedhashmap.html)<!----><!----><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><!----><table><thead><tr><th><!----></th><th><!----></th><th><!----></th><th><!----></th></tr></thead><tbody><tr><td><!----></td><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----></td><td><!----></td></tr></tbody></table><!----><!----><h2 id="双端队列-arraydeque" tabindex="-1"><a class="header-anchor" href="#双端队列-arraydeque"><span><!----></span></a></h2><!---->_<!---->_<!---->_<!---->_<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public interface Queue&lt;E&gt; extends Collection&lt;E&gt; {}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!---->_<!---->_<!---->_<!---->_<!---->[<!---->](https://javabetter.cn/collection/gailan.html)<!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668480227-bac445de-bf46-46cf-85a9-ff1b7363165f.png"><!---->_<!---->_<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 声明一个双端队列</span>
<span class="line">ArrayDeque&lt;String&gt; stack = new ArrayDeque&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 增加元素</span>
<span class="line">stack.push(&quot;沉默&quot;);</span>
<span class="line">stack.push(&quot;王二&quot;);</span>
<span class="line">stack.push(&quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 获取栈顶元素</span>
<span class="line">String top = stack.peek();</span>
<span class="line">System.out.println(&quot;栈顶元素为：&quot; + top); // 陈清扬</span>
<span class="line"></span>
<span class="line">// 弹出栈顶元素</span>
<span class="line">String pop = stack.pop();</span>
<span class="line">System.out.println(&quot;弹出的元素为：&quot; + pop); // 陈清扬</span>
<span class="line"></span>
<span class="line">// 修改栈顶元素</span>
<span class="line">stack.pop();</span>
<span class="line">stack.push(&quot;小明&quot;);</span>
<span class="line">System.out.println(&quot;修改后的栈为：&quot; + stack); // [小明, 沉默]</span>
<span class="line"></span>
<span class="line">// 遍历队列查找元素</span>
<span class="line">Iterator&lt;String&gt; iterator = stack.iterator();</span>
<span class="line">int index = -1;</span>
<span class="line">String target = &quot;王二&quot;;</span>
<span class="line">while (iterator.hasNext()) {</span>
<span class="line">    String element = iterator.next();</span>
<span class="line">    index++;</span>
<span class="line">    if (element.equals(target)) {</span>
<span class="line">        break;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">if (index == -1) {</span>
<span class="line">    System.out.println(&quot;元素 &quot; + target + &quot; 不存在于队列中&quot;);</span>
<span class="line">} else {</span>
<span class="line">    System.out.println(&quot;元素 &quot; + target + &quot; 在队列中的位置为：&quot; + index);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class ArrayDeque&lt;E&gt; extends AbstractCollection&lt;E&gt;</span>
<span class="line">                           implements Deque&lt;E&gt;, Cloneable, Serializable</span>
<span class="line">{}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">ArrayDeque&lt;String&gt; queue = new ArrayDeque&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 增加元素</span>
<span class="line">queue.offer(&quot;沉默&quot;);</span>
<span class="line">queue.offer(&quot;王二&quot;);</span>
<span class="line">queue.offer(&quot;陈清扬&quot;);</span>
<span class="line"></span>
<span class="line">// 获取队首元素</span>
<span class="line">String front = queue.peek();</span>
<span class="line">System.out.println(&quot;队首元素为：&quot; + front); // 沉默</span>
<span class="line"></span>
<span class="line">// 弹出队首元素</span>
<span class="line">String poll = queue.poll();</span>
<span class="line">System.out.println(&quot;弹出的元素为：&quot; + poll); // 沉默</span>
<span class="line"></span>
<span class="line">// 修改队列中的元素</span>
<span class="line">queue.poll();</span>
<span class="line">queue.offer(&quot;小明&quot;);</span>
<span class="line">System.out.println(&quot;修改后的队列为：&quot; + queue); // [陈清扬, 小明]</span>
<span class="line"></span>
<span class="line">// 查找元素</span>
<span class="line">Iterator&lt;String&gt; iterator = queue.iterator();</span>
<span class="line">int index = 0;</span>
<span class="line">while (iterator.hasNext()) {</span>
<span class="line">    String element = iterator.next();</span>
<span class="line">    if (element.equals(&quot;王二&quot;)) {</span>
<span class="line">        System.out.println(&quot;元素在队列中的位置为：&quot; + index); // 0</span>
<span class="line">        break;</span>
<span class="line">    }</span>
<span class="line">    index++;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><p><a href="https://javabetter.cn/collection/gailan.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class LinkedList&lt;E&gt;</span>
<span class="line">    extends AbstractSequentialList&lt;E&gt;</span>
<span class="line">    implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</span>
<span class="line">{}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->[<!---->](https://javabetter.cn/collection/linkedlist.html)<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建一个 LinkedList 对象</span>
<span class="line">LinkedList&lt;String&gt; queue = new LinkedList&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素</span>
<span class="line">queue.offer(&quot;沉默&quot;);</span>
<span class="line">queue.offer(&quot;王二&quot;);</span>
<span class="line">queue.offer(&quot;陈清扬&quot;);</span>
<span class="line">System.out.println(queue); // 输出 [沉默, 王二, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 删除元素</span>
<span class="line">queue.poll();</span>
<span class="line">System.out.println(queue); // 输出 [王二, 陈清扬]</span>
<span class="line"></span>
<span class="line">// 修改元素：LinkedList 中的元素不支持直接修改，需要先删除再添加</span>
<span class="line">String first = queue.poll();</span>
<span class="line">queue.offer(&quot;王大二&quot;);</span>
<span class="line">System.out.println(queue); // 输出 [陈清扬, 王大二]</span>
<span class="line"></span>
<span class="line">// 查找元素：LinkedList 中的元素可以使用 get() 方法进行查找</span>
<span class="line">System.out.println(queue.get(0)); // 输出 陈清扬</span>
<span class="line">System.out.println(queue.contains(&quot;沉默&quot;)); // 输出 false</span>
<span class="line"></span>
<span class="line">// 查找元素：使用迭代器的方式查找陈清扬</span>
<span class="line">// 使用迭代器依次遍历元素并查找</span>
<span class="line">Iterator&lt;String&gt; iterator = queue.iterator();</span>
<span class="line">while (iterator.hasNext()) {</span>
<span class="line">    String element = iterator.next();</span>
<span class="line">    if (element.equals(&quot;陈清扬&quot;)) {</span>
<span class="line">        System.out.println(&quot;找到了：&quot; + element);</span>
<span class="line">        break;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h3 id="栈和队列" tabindex="-1"><a class="header-anchor" href="#栈和队列"><span><!----></span></a></h3><!---->_<!---->_<!---->_<!---->_<!---->_<!---->_<!---->_<!---->_<!----><table><thead><tr><th><!----></th><th><!----></th><th><!----></th></tr></thead><tbody><tr><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;false&lt;/font&gt;</code></td></tr><tr><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;</code></td></tr><tr><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;</code></td></tr></tbody></table><!---->_<!---->_<!---->_<!---->_<!----><table><thead><tr><th><!----></th><th><!----></th><th><!----></th></tr></thead><tbody><tr><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;false&lt;/font&gt;</code></td></tr><tr><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;</code></td></tr><tr><td><!----></td><td><!----></td><td><!----></td></tr><tr><td><!----></td><td><!----></td><td><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;</code></td></tr></tbody></table><!---->_<!---->_<!----><!----><p><strong><!----></strong><code>**&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;false&lt;/font&gt;**</code><strong><!----></strong><code>**&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;**</code><strong><!----></strong><!----></p><p><strong><!----></strong><em><strong><!----></strong></em><strong><!----></strong><!----></p><p><em><!----></em><!----><em><!----></em><!----><em><!----></em><!----><em><!----></em><!----><a href="https://javabetter.cn/collection/linkedlist.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><!----><em><!----></em><!----></p><!---->_<!---->_<!---->**<!---->**<!----><p><em><!----></em><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;</code><!----></p><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668480195-c11fe70f-2751-4043-88b5-d5a3714db12d.png"><!---->`**<!---->**`**<!---->**`**<!---->**`**<!---->**<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><h3 id="方法剖析" tabindex="-1"><a class="header-anchor" href="#方法剖析"><span><!----></span></a></h3><h4 id="addfirst" tabindex="-1"><a class="header-anchor" href="#addfirst"><span><!----></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;addFirst(E e)&lt;/font&gt;</code><!----><em><!----></em><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;head&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;elements[--head] = e&lt;/font&gt;</code><!----></p><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668479766-7d580989-f25c-4d2c-a1f3-ddbee3b1059c.png"><!----><ol><li><!----></li><li><!----></li></ol><!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">//addFirst(E e)</span>
<span class="line">public void addFirst(E e) {</span>
<span class="line">    if (e == null)//不允许放入null</span>
<span class="line">        throw new NullPointerException();</span>
<span class="line">    elements[head = (head - 1) &amp; (elements.length - 1)] = e;//2.下标是否越界</span>
<span class="line">    if (head == tail)//1.空间是否够用</span>
<span class="line">        doubleCapacity();//扩容</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->**<!---->**<!---->`<!---->`<!---->`<!---->`<!----><!---->`<!---->`<!---->**<!---->**`**<!---->**`**<!---->**<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><!---->`<!---->`<!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668480134-9e5b1d69-1af2-44af-89de-159f63a59457.png"><!---->`<!---->`<!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">//doubleCapacity()</span>
<span class="line">private void doubleCapacity() {</span>
<span class="line">    assert head == tail;</span>
<span class="line">    int p = head;</span>
<span class="line">    int n = elements.length;</span>
<span class="line">    int r = n - p; // head右边元素的个数</span>
<span class="line">    int newCapacity = n &lt;&lt; 1;//原空间的2倍</span>
<span class="line">    if (newCapacity &lt; 0)</span>
<span class="line">        throw new IllegalStateException(&quot;Sorry, deque too big&quot;);</span>
<span class="line">    Object[] a = new Object[newCapacity];</span>
<span class="line">    System.arraycopy(elements, p, a, 0, r);//复制右半部分，对应上图中绿色部分</span>
<span class="line">    System.arraycopy(elements, 0, a, r, p);//复制左半部分，对应上图中灰色部分</span>
<span class="line">    elements = (E[])a;</span>
<span class="line">    head = 0;</span>
<span class="line">    tail = n;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><h4 id="addlast" tabindex="-1"><a class="header-anchor" href="#addlast"><span><!----></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;addLast(E e)&lt;/font&gt;</code><!----><em><!----></em><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;tail&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;tail&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;elements[tail] = e;&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;doubleCapacity()&lt;/font&gt;</code><!----></p><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668479754-96c7520a-17ab-430b-8a47-03d3c1adf4a7.png"><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public void addLast(E e) {</span>
<span class="line">    if (e == null)//不允许放入null</span>
<span class="line">        throw new NullPointerException();</span>
<span class="line">    elements[tail] = e;//赋值</span>
<span class="line">    if ( (tail = (tail + 1) &amp; (elements.length - 1)) == head)//下标越界处理</span>
<span class="line">        doubleCapacity();//扩容</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->`<!---->`<!----><h4 id="pollfirst" tabindex="-1"><a class="header-anchor" href="#pollfirst"><span><!----></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;pollFirst()&lt;/font&gt;</code><!----><em><!----></em><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;head&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;elements[head]&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;ArrayDeque&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;elements[head] == null&lt;/font&gt;</code><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E pollFirst() {</span>
<span class="line">    E result = elements[head];</span>
<span class="line">    if (result == null)//null值意味着deque为空</span>
<span class="line">        return null;</span>
<span class="line">    elements[h] = null;//let GC work</span>
<span class="line">    head = (head + 1) &amp; (elements.length - 1);//下标越界处理</span>
<span class="line">    return result;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="polllast" tabindex="-1"><a class="header-anchor" href="#polllast"><span><!----></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;pollLast()&lt;/font&gt;</code><!----><em><!----></em><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;tail&lt;/font&gt;</code><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E pollLast() {</span>
<span class="line">    int t = (tail - 1) &amp; (elements.length - 1);//tail的上一个位置是最后一个元素</span>
<span class="line">    E result = elements[t];</span>
<span class="line">    if (result == null)//null值意味着deque为空</span>
<span class="line">        return null;</span>
<span class="line">    elements[t] = null;//let GC work</span>
<span class="line">    tail = t;</span>
<span class="line">    return result;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="peekfirst" tabindex="-1"><a class="header-anchor" href="#peekfirst"><span><!----></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;peekFirst()&lt;/font&gt;</code><!----><em><!----></em><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;head&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;elements[head]&lt;/font&gt;</code><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E peekFirst() {</span>
<span class="line">    return elements[head]; // elements[head] is null if deque empty</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="peeklast" tabindex="-1"><a class="header-anchor" href="#peeklast"><span><!----></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;peekLast()&lt;/font&gt;</code><!----><em><!----></em><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;tail&lt;/font&gt;</code><!----></p><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E peekLast() {</span>
<span class="line">    return elements[(tail - 1) &amp; (elements.length - 1)];</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小结-7" tabindex="-1"><a class="header-anchor" href="#小结-7"><span><a href="https://javabetter.cn/collection/arraydeque.html#%E5%B0%8F%E7%BB%93" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><!----><ul><li><!----></li><li><!----></li><li><!----></li><li><!----></li></ul><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><h2 id="优先队列-priorityqueue" tabindex="-1"><a class="header-anchor" href="#优先队列-priorityqueue"><span><!----></span></a></h2><!----><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建 PriorityQueue 对象</span>
<span class="line">PriorityQueue&lt;String&gt; priorityQueue = new PriorityQueue&lt;&gt;();</span>
<span class="line"></span>
<span class="line">// 添加元素到 PriorityQueue</span>
<span class="line">priorityQueue.offer(&quot;沉默王二&quot;);</span>
<span class="line">priorityQueue.offer(&quot;陈清扬&quot;);</span>
<span class="line">priorityQueue.offer(&quot;小转铃&quot;);</span>
<span class="line"></span>
<span class="line">// 打印 PriorityQueue 中的元素</span>
<span class="line">System.out.println(&quot;PriorityQueue 中的元素：&quot;);</span>
<span class="line">while (!priorityQueue.isEmpty()) {</span>
<span class="line">    System.out.print(priorityQueue.poll() + &quot; &quot;);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">PriorityQueue 中的元素：</span>
<span class="line">小转铃 沉默王二 陈清扬</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">// 创建 PriorityQueue 对象，并指定优先级顺序</span>
<span class="line">PriorityQueue&lt;String&gt; priorityQueue = new PriorityQueue&lt;&gt;(Comparator.reverseOrder());</span>
<span class="line"></span>
<span class="line">// 添加元素到 PriorityQueue</span>
<span class="line">priorityQueue.offer(&quot;沉默王二&quot;);</span>
<span class="line">priorityQueue.offer(&quot;陈清扬&quot;);</span>
<span class="line">priorityQueue.offer(&quot;小转铃&quot;);</span>
<span class="line"></span>
<span class="line">// 打印 PriorityQueue 中的元素</span>
<span class="line">System.out.println(&quot;PriorityQueue 中的元素：&quot;);</span>
<span class="line">while (!priorityQueue.isEmpty()) {</span>
<span class="line">    System.out.print(priorityQueue.poll() + &quot; &quot;);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">PriorityQueue 中的元素：</span>
<span class="line">陈清扬 沉默王二 小转铃</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><h3 id="priorityqueue的作用" tabindex="-1"><a class="header-anchor" href="#priorityqueue的作用"><span><a href="https://javabetter.cn/collection/PriorityQueue.html#priorityqueue%E7%9A%84%E4%BD%9C%E7%94%A8" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><!----><!----><!----><!----><!----><!----><!---->**<!---->**_**<!---->**_**<!---->**<!---->_<!---->_<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">        1</span>
<span class="line">      /   \</span>
<span class="line">     2     3</span>
<span class="line">    / \   /</span>
<span class="line">   4   5 6</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">      1</span>
<span class="line">     / \</span>
<span class="line">    2   3</span>
<span class="line">   / \ / \</span>
<span class="line">  4  5 6  7</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">            8</span>
<span class="line">          /   \</span>
<span class="line">         7     5</span>
<span class="line">        / \   / \</span>
<span class="line">       6   4 2   1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">10</span>
<span class="line">     /  \</span>
<span class="line">   20    15</span>
<span class="line">  /  \</span>
<span class="line">30   40</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">1</span>
<span class="line">     / \</span>
<span class="line">    2   3</span>
<span class="line">   / \</span>
<span class="line">  4   5</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668513861-e74cb5f3-8a89-4ee5-bffa-22c9b35b41f7.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">leftNo = parentNo\*2+1</span>
<span class="line">rightNo = parentNo\*2+2</span>
<span class="line">parentNo = (nodeNo-1)/2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h3 id="方法剖析-1" tabindex="-1"><a class="header-anchor" href="#方法剖析-1"><span><a href="https://javabetter.cn/collection/PriorityQueue.html#%E6%96%B9%E6%B3%95%E5%89%96%E6%9E%90" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><h4 id="add-和-offer" tabindex="-1"><a class="header-anchor" href="#add-和-offer"><span><a href="https://javabetter.cn/collection/PriorityQueue.html#add-%E5%92%8C-offer" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;add(E e)&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;offer(E e)&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;Queue&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;false&lt;/font&gt;</code><!----><em><!----></em><!----></p><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668512395-92a0efd2-7c1d-468e-ab99-fa93a36f5eb5.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">//offer(E e)</span>
<span class="line">public boolean offer(E e) {</span>
<span class="line">    if (e == null)//不允许放入null元素</span>
<span class="line">        throw new NullPointerException();</span>
<span class="line">    modCount++;</span>
<span class="line">    int i = size;</span>
<span class="line">    if (i &gt;= queue.length)</span>
<span class="line">        grow(i + 1);//自动扩容</span>
<span class="line">    size = i + 1;</span>
<span class="line">    if (i == 0)//队列原来为空，这是插入的第一个元素</span>
<span class="line">        queue[0] = e;</span>
<span class="line">    else</span>
<span class="line">        siftUp(i, e);//调整</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">//siftUp()</span>
<span class="line">private void siftUp(int k, E x) {</span>
<span class="line">    while (k &gt; 0) {</span>
<span class="line">        int parent = (k - 1) &gt;&gt;&gt; 1;//parentNo = (nodeNo-1)/2</span>
<span class="line">        Object e = queue[parent];</span>
<span class="line">        if (comparator.compare(x, (E) e) &gt;= 0)//调用比较器的比较方法</span>
<span class="line">            break;</span>
<span class="line">        queue[k] = e;</span>
<span class="line">        k = parent;</span>
<span class="line">    }</span>
<span class="line">    queue[k] = x;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->**<!---->**`**<!---->**`**<!---->**`**<!---->**`**<!---->**`**<!---->**`**<!---->**`**<!---->**`**<!---->**<!----><h4 id="element-和-peek" tabindex="-1"><a class="header-anchor" href="#element-和-peek"><span><a href="https://javabetter.cn/collection/PriorityQueue.html#element-%E5%92%8C-peek" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;element()&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;peek()&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;0&lt;/font&gt;</code><!----><strong><!----></strong><code>**&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;0&lt;/font&gt;**</code><strong><!----></strong><!----></p><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668512169-a2c1feb4-1012-4f54-a200-4397704ac7c0.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">//peek()</span>
<span class="line">public E peek() {</span>
<span class="line">    if (size == 0)</span>
<span class="line">        return null;</span>
<span class="line">    return (E) queue[0];//0下标处的那个元素就是最小的那个</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="remove-和-poll" tabindex="-1"><a class="header-anchor" href="#remove-和-poll"><span><a href="https://javabetter.cn/collection/PriorityQueue.html#remove-%E5%92%8C-poll" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove()&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;poll()&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;null&lt;/font&gt;</code><!----></p><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668513799-571599eb-febb-4e7a-adee-8de7704a7c76.png"><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E poll() {</span>
<span class="line">    if (size == 0)</span>
<span class="line">        return null;</span>
<span class="line">    int s = --size;</span>
<span class="line">    modCount++;</span>
<span class="line">    E result = (E) queue[0];//0下标处的那个元素就是最小的那个</span>
<span class="line">    E x = (E) queue[s];</span>
<span class="line">    queue[s] = null;</span>
<span class="line">    if (s != 0)</span>
<span class="line">        siftDown(0, x);//调整</span>
<span class="line">    return result;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!---->**<!---->**`**<!---->**`**<!---->**`**<!---->**`**<!---->**`**<!---->**`**<!---->**<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">//siftDown()</span>
<span class="line">private void siftDown(int k, E x) {</span>
<span class="line">    int half = size &gt;&gt;&gt; 1;</span>
<span class="line">    while (k &lt; half) {</span>
<span class="line">      //首先找到左右孩子中较小的那个，记录到c里，并用child记录其下标</span>
<span class="line">        int child = (k &lt;&lt; 1) + 1;//leftNo = parentNo*2+1</span>
<span class="line">        Object c = queue[child];</span>
<span class="line">        int right = child + 1;</span>
<span class="line">        if (right &lt; size &amp;&amp;</span>
<span class="line">            comparator.compare((E) c, (E) queue[right]) &gt; 0)</span>
<span class="line">            c = queue[child = right];</span>
<span class="line">        if (comparator.compare(x, (E) c) &lt;= 0)</span>
<span class="line">            break;</span>
<span class="line">        queue[k] = c;//然后用c取代原来的值</span>
<span class="line">        k = child;</span>
<span class="line">    }</span>
<span class="line">    queue[k] = x;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="remove-object-o" tabindex="-1"><a class="header-anchor" href="#remove-object-o"><span><a href="https://javabetter.cn/collection/PriorityQueue.html#remove-object-o" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><p><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove(Object o)&lt;/font&gt;</code><!----><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;o&lt;/font&gt;</code><!----><em><!----></em><!----><em><!----></em><!----></p><!---->`<!---->`<!----><ol><li><!----></li><li><!---->`<!---->`<!----></li></ol><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726668513553-7343d786-ac22-4d73-b30b-5832abd279d8.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">//remove(Object o)</span>
<span class="line">public boolean remove(Object o) {</span>
<span class="line">  //通过遍历数组的方式找到第一个满足o.equals(queue[i])元素的下标</span>
<span class="line">    int i = indexOf(o);</span>
<span class="line">    if (i == -1)</span>
<span class="line">        return false;</span>
<span class="line">    int s = --size;</span>
<span class="line">    if (s == i) //情况1</span>
<span class="line">        queue[i] = null;</span>
<span class="line">    else {</span>
<span class="line">        E moved = (E) queue[s];</span>
<span class="line">        queue[s] = null;</span>
<span class="line">        siftDown(i, moved);//情况2</span>
<span class="line">        ......</span>
<span class="line">    }</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小结-8" tabindex="-1"><a class="header-anchor" href="#小结-8"><span><a href="https://javabetter.cn/collection/PriorityQueue.html#%E5%B0%8F%E7%BB%93" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><!---->[<!---->](https://leetcode-cn.com/problems/merge-k-sorted-lists/)<!----><!----><!----><p><a href="https://paicoding.com/column/7/23" target="_blank" rel="noopener noreferrer">023.合并 K 个升序链表，通过优先级队列和最小堆优雅解决<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><!----><h2 id="arraylist-和-linkedlist-区别" tabindex="-1"><a class="header-anchor" href="#arraylist-和-linkedlist-区别"><span><!----></span></a></h2><h3 id="arraylist-是如何实现的" tabindex="-1"><a class="header-anchor" href="#arraylist-是如何实现的"><span><!----></span></a></h3><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726671668219-03ce28e6-a654-4358-b371-714c2b3cc1e2.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span>
<span class="line">        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span>
<span class="line">{</span>
<span class="line">    private static final int DEFAULT_CAPACITY = 10; // 默认容量为 10</span>
<span class="line">    transient Object[] elementData; // 存储元素的数组，数组类型为 Object</span>
<span class="line">    private int size; // 列表的大小，即列表中元素的个数</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token comment">// RandomAccess是一个标记接口，官方解释是只要List实现这个接口，就能支持快速随机访问。</span></span>
<span class="line"><span class="token comment">// 而什么是随机访问呢？接下来我们来举例说明</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RandomAccess</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 返回列表中指定位置的元素。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要返回的元素的索引</span>
<span class="line"> * @return 列表中指定位置的元素</span>
<span class="line"> * @throws IndexOutOfBoundsException 如果索引越界（index &lt; 0 || index &gt;= size()）</span>
<span class="line"> */</span>
<span class="line">public E get(int index) {</span>
<span class="line">    Objects.checkIndex(index, size); // 检查索引是否越界</span>
<span class="line">    return elementData(index); // 调用 elementData 方法获取元素</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">/**</span>
<span class="line"> * 返回列表中指定位置的元素。</span>
<span class="line"> * 注意：该方法并没有检查索引是否越界，调用该方法前需要先检查索引是否越界。</span>
<span class="line"> *</span>
<span class="line"> * @param index 要返回的元素的索引</span>
<span class="line"> * @return 列表中指定位置的元素</span>
<span class="line"> */</span>
<span class="line">E elementData(int index) {</span>
<span class="line">    return (E) elementData[index]; // 强制类型转换，将 Object 类型转换为 E 类型</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->[<!---->](https://javabetter.cn/basic-extra-meal/deep-copy.html)<!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 返回该列表的浅表副本。</span>
<span class="line"> * （元素本身不会被复制。）</span>
<span class="line"> *</span>
<span class="line"> * @return 该列表的副本</span>
<span class="line"> */</span>
<span class="line">public Object clone() {</span>
<span class="line">    try {</span>
<span class="line">        ArrayList&lt;?&gt; v = (ArrayList&lt;?&gt;) super.clone(); // 调用 Object 类的 clone 方法，得到一个浅表副本</span>
<span class="line">        v.elementData = Arrays.copyOf(elementData, size); // 复制 elementData 数组，创建一个新数组作为副本</span>
<span class="line">        v.modCount = 0; // 将 modCount 置为 0</span>
<span class="line">        return v; // 返回副本</span>
<span class="line">    } catch (CloneNotSupportedException e) {</span>
<span class="line">        // this shouldn&#39;t happen, since we are Cloneable</span>
<span class="line">        throw new InternalError(e);</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->[<!---->](https://javabetter.cn/io/Serializbale.html)<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public interface Serializable {</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!---->[<!---->](https://javabetter.cn/io/transient.html)<!----><!----><!----><!----><!---->`<!---->`<!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!---->[<!---->](https://javabetter.cn/collection/arraylist.html)<!----><!----><!----><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 将此列表实例的状态序列写入指定的 ObjectOutputStream。</span>
<span class="line"> * （即，保存这个列表实例到一个流中。）</span>
<span class="line"> *</span>
<span class="line"> * @param s 要写入的流</span>
<span class="line"> * @throws java.io.IOException 如果写入流时发生异常</span>
<span class="line"> */</span>
<span class="line">private void writeObject(java.io.ObjectOutputStream s)</span>
<span class="line">        throws java.io.IOException {</span>
<span class="line">    s.defaultWriteObject(); // 写出对象的默认字段</span>
<span class="line">    // Write out size as capacity for behavioral compatibility with clone()</span>
<span class="line">    s.writeInt(size); // 写出 size</span>
<span class="line">    // Write out all elements in the proper order.</span>
<span class="line">    for (int i=0; i&lt;size; i++) {</span>
<span class="line">        s.writeObject(elementData[i]); // 依次写出 elementData 数组中的元素</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!---->`<!---->`<!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * 从指定的 ObjectInputStream 中读取此列表实例的状态序列。</span>
<span class="line"> * （即，从流中恢复这个列表实例。）</span>
<span class="line"> *</span>
<span class="line"> * @param s 从中读取此列表实例的状态序列的流</span>
<span class="line"> * @throws java.io.IOException 如果读取流时发生异常</span>
<span class="line"> * @throws ClassNotFoundException 如果在读取流时找不到类</span>
<span class="line"> */</span>
<span class="line">private void readObject(java.io.ObjectInputStream s)</span>
<span class="line">        throws java.io.IOException, ClassNotFoundException {</span>
<span class="line">    elementData = EMPTY_ELEMENTDATA; // 初始化 elementData 数组为空数组</span>
<span class="line"></span>
<span class="line">    // 读取默认字段</span>
<span class="line">    s.defaultReadObject();</span>
<span class="line"></span>
<span class="line">    // 读取容量，这个值被忽略，因为在 ArrayList 中，容量和长度是两个不同的概念</span>
<span class="line">    s.readInt();</span>
<span class="line"></span>
<span class="line">    if (size &gt; 0) {</span>
<span class="line">        // 分配一个新的 elementData 数组，大小为 size</span>
<span class="line">        ensureCapacityInternal(size);</span>
<span class="line"></span>
<span class="line">        Object[] a = elementData;</span>
<span class="line">        // 依次从输入流中读取元素，并将其存储在数组中</span>
<span class="line">        for (int i=0; i&lt;size; i++) {</span>
<span class="line">            a[i] = s.readObject(); // 读取对象并存储在 elementData 数组中</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="linkedlist-是如何实现的" tabindex="-1"><a class="header-anchor" href="#linkedlist-是如何实现的"><span><!----></span></a></h3><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726671667982-09221819-3aae-47d7-b98b-5d79c12f7394.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class LinkedList&lt;E&gt;</span>
<span class="line">    extends AbstractSequentialList&lt;E&gt;</span>
<span class="line">    implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</span>
<span class="line">{</span>
<span class="line">    transient int size = 0; // 非序列化字段，表示链表中的节点个数</span>
<span class="line">    transient Node&lt;E&gt; first; // 非序列化字段，指向链表中的第一个节点</span>
<span class="line">    transient Node&lt;E&gt; last; // 非序列化字段，指向链表中的最后一个节点</span>
<span class="line"></span>
<span class="line">    // ...</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->[<!---->](https://javabetter.cn/collection/linkedlist.html)<!----><!----><!----><!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private void writeObject(java.io.ObjectOutputStream s)</span>
<span class="line">        throws java.io.IOException {</span>
<span class="line">    // 写入默认的序列化标记</span>
<span class="line">    s.defaultWriteObject();</span>
<span class="line"></span>
<span class="line">    // 写入链表的节点个数</span>
<span class="line">    s.writeInt(size);</span>
<span class="line"></span>
<span class="line">    // 按正确的顺序写入所有元素</span>
<span class="line">    for (LinkedList.Node&lt;E&gt; x = first; x != null; x = x.next)</span>
<span class="line">        s.writeObject(x.item);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private void readObject(java.io.ObjectInputStream s)</span>
<span class="line">        throws java.io.IOException, ClassNotFoundException {</span>
<span class="line">    // 读取默认的序列化标记</span>
<span class="line">    s.defaultReadObject();</span>
<span class="line"></span>
<span class="line">    // 读取链表的节点个数</span>
<span class="line">    int size = s.readInt();</span>
<span class="line"></span>
<span class="line">    // 按正确的顺序读取所有元素</span>
<span class="line">    for (int i = 0; i &lt; size; i++)</span>
<span class="line">        linkLast((E)s.readObject()); // 读取元素并将其添加到链表末尾</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">void linkLast(E e) {</span>
<span class="line">    final LinkedList.Node&lt;E&gt; l = last;</span>
<span class="line">    final LinkedList.Node&lt;E&gt; newNode = new LinkedList.Node&lt;&gt;(l, e, null);</span>
<span class="line">    last = newNode; // 将新节点作为链表尾节点</span>
<span class="line">    if (l == null)</span>
<span class="line">        first = newNode; // 如果链表为空，将新节点作为链表头节点</span>
<span class="line">    else</span>
<span class="line">        l.next = newNode; // 否则将新节点链接到链表尾部</span>
<span class="line">    size++; // 增加节点个数</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><h3 id="新增元素时究竟谁快" tabindex="-1"><a class="header-anchor" href="#新增元素时究竟谁快"><span><!----></span></a></h3><!----><h4 id="arraylist-1" tabindex="-1"><a class="header-anchor" href="#arraylist-1"><span><!----></span></a></h4><!----><!----><!---->[<!---->](https://javabetter.cn/collection/arraylist.html)<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public boolean add(E e) {</span>
<span class="line">    add(e, elementData, size);</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">private void add(E e, Object[] elementData, int s) {</span>
<span class="line">    if (s == elementData.length)</span>
<span class="line">        elementData = grow(); // 扩容数组</span>
<span class="line">    elementData[s] = e; // 将元素添加到数组末尾</span>
<span class="line">    size = s + 1; // 增加元素个数</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public void add(int index, E element) {</span>
<span class="line">    rangeCheckForAdd(index); // 检查插入位置是否越界</span>
<span class="line">    final int s; // 当前元素个数</span>
<span class="line">    Object[] elementData; // 元素数组</span>
<span class="line">    if ((s = size) == (elementData = this.elementData).length) // 如果数组已满，则扩容</span>
<span class="line">        elementData = grow();</span>
<span class="line">    System.arraycopy(elementData, index,</span>
<span class="line">            elementData, index + 1,</span>
<span class="line">            s - index); // 将插入位置后的元素向右移动一位</span>
<span class="line">    elementData[index] = element; // 将新元素插入到指定位置</span>
<span class="line">    size = s + 1; // 增加元素个数</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h4 id="linkedlist-3" tabindex="-1"><a class="header-anchor" href="#linkedlist-3"><span><!----></span></a></h4><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public boolean add(E e) {</span>
<span class="line">    linkLast(e); // 将元素添加到链表末尾</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">void linkLast(E e) {</span>
<span class="line">    final LinkedList.Node&lt;E&gt; l = last; // 获取链表的尾节点</span>
<span class="line">    final LinkedList.Node&lt;E&gt; newNode = new LinkedList.Node&lt;&gt;(l, e, null); // 创建新节点</span>
<span class="line">    last = newNode; // 将新节点作为链表的尾节点</span>
<span class="line">    if (l == null)</span>
<span class="line">        first = newNode; // 如果链表为空，则将新节点作为链表的头节点</span>
<span class="line">    else</span>
<span class="line">        l.next = newNode; // 否则将新节点链接到链表的尾部</span>
<span class="line">    size++; // 增加节点个数</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public void add(int index, E element) {</span>
<span class="line">    checkPositionIndex(index); // 检查插入位置是否越界</span>
<span class="line"></span>
<span class="line">    if (index == size)</span>
<span class="line">        linkLast(element); // 如果插入位置为链表末尾，则将元素添加到链表末尾</span>
<span class="line">    else</span>
<span class="line">        linkBefore(element, node(index)); // 否则将元素插入到指定位置的前面的节点后面</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">LinkedList.Node&lt;E&gt; node(int index) {</span>
<span class="line">    if (index &lt; (size &gt;&gt; 1)) { // 如果插入位置在链表前半部分，则从头节点开始查找</span>
<span class="line">        LinkedList.Node&lt;E&gt; x = first;</span>
<span class="line">        for (int i = 0; i &lt; index; i++)</span>
<span class="line">            x = x.next;</span>
<span class="line">        return x;</span>
<span class="line">    } else { // 否则从尾节点开始查找</span>
<span class="line">        LinkedList.Node&lt;E&gt; x = last;</span>
<span class="line">        for (int i = size - 1; i &gt; index; i--)</span>
<span class="line">            x = x.prev;</span>
<span class="line">        return x;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">void linkBefore(E e, LinkedList.Node&lt;E&gt; succ) {</span>
<span class="line">    final LinkedList.Node&lt;E&gt; pred = succ.prev; // 获取插入位置的前驱节点</span>
<span class="line">    final LinkedList.Node&lt;E&gt; newNode = new LinkedList.Node&lt;&gt;(pred, e, succ); // 创建新节点</span>
<span class="line">    succ.prev = newNode; // 将新节点链接到后继节点</span>
<span class="line">    if (pred == null)</span>
<span class="line">        first = newNode; // 如果前驱节点为空，则将新节点作为头节点</span>
<span class="line">    else</span>
<span class="line">        pred.next = newNode; // 否则将新节点链接到前驱节点</span>
<span class="line">    size++; // 增加节点个数</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726671668657-31e33f21-e180-4d97-8347-a75cf82727ee.png"><!----><!----><ul><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class ArrayListTest {</span>
<span class="line">    public static void addFromHeaderTest(int num) {</span>
<span class="line">        ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(num);</span>
<span class="line">        int i = 0;</span>
<span class="line"></span>
<span class="line">        long timeStart = System.currentTimeMillis();</span>
<span class="line"></span>
<span class="line">        while (i &lt; num) {</span>
<span class="line">            list.add(0, i + &quot;沉默王二&quot;);</span>
<span class="line">            i++;</span>
<span class="line">        }</span>
<span class="line">        long timeEnd = System.currentTimeMillis();</span>
<span class="line"></span>
<span class="line">        System.out.println(&quot;ArrayList从集合头部位置新增元素花费的时间&quot; + (timeEnd - timeStart));</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">/**</span>
<span class="line"> * @author 微信搜「沉默王二」，回复关键字 PDF</span>
<span class="line"> */</span>
<span class="line">public class LinkedListTest {</span>
<span class="line">    public static void addFromHeaderTest(int num) {</span>
<span class="line">        LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();</span>
<span class="line">        int i = 0;</span>
<span class="line">        long timeStart = System.currentTimeMillis();</span>
<span class="line">        while (i &lt; num) {</span>
<span class="line">            list.addFirst(i + &quot;沉默王二&quot;);</span>
<span class="line">            i++;</span>
<span class="line">        }</span>
<span class="line">        long timeEnd = System.currentTimeMillis();</span>
<span class="line"></span>
<span class="line">        System.out.println(&quot;LinkedList从集合头部位置新增元素花费的时间&quot; + (timeEnd - timeStart));</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">ArrayList从集合头部位置新增元素花费的时间595</span>
<span class="line">LinkedList从集合头部位置新增元素花费的时间15</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class ArrayListTest {</span>
<span class="line">    public static void addFromMidTest(int num) {</span>
<span class="line">        ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(num);</span>
<span class="line">        int i = 0;</span>
<span class="line"></span>
<span class="line">        long timeStart = System.currentTimeMillis();</span>
<span class="line">        while (i &lt; num) {</span>
<span class="line">            int temp = list.size();</span>
<span class="line">            list.add(temp / 2, i + &quot;沉默王二&quot;);</span>
<span class="line">            i++;</span>
<span class="line">        }</span>
<span class="line">        long timeEnd = System.currentTimeMillis();</span>
<span class="line"></span>
<span class="line">        System.out.println(&quot;ArrayList从集合中间位置新增元素花费的时间&quot; + (timeEnd - timeStart));</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">public class LinkedListTest {</span>
<span class="line">    public static void addFromMidTest(int num) {</span>
<span class="line">        LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();</span>
<span class="line">        int i = 0;</span>
<span class="line">        long timeStart = System.currentTimeMillis();</span>
<span class="line">        while (i &lt; num) {</span>
<span class="line">            int temp = list.size();</span>
<span class="line">            list.add(temp / 2, i + &quot;沉默王二&quot;);</span>
<span class="line">            i++;</span>
<span class="line">        }</span>
<span class="line">        long timeEnd = System.currentTimeMillis();</span>
<span class="line"></span>
<span class="line">        System.out.println(&quot;LinkedList从集合中间位置新增元素花费的时间&quot; + (timeEnd - timeStart));</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">ArrayList从集合中间位置新增元素花费的时间16</span>
<span class="line">LinkedList从集合中间位置新增元素花费的时间114</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class ArrayListTest {</span>
<span class="line">    public static void addFromTailTest(int num) {</span>
<span class="line">        ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(num);</span>
<span class="line">        int i = 0;</span>
<span class="line"></span>
<span class="line">        long timeStart = System.currentTimeMillis();</span>
<span class="line"></span>
<span class="line">        while (i &lt; num) {</span>
<span class="line">            list.add(i + &quot;沉默王二&quot;);</span>
<span class="line">            i++;</span>
<span class="line">        }</span>
<span class="line"></span>
<span class="line">        long timeEnd = System.currentTimeMillis();</span>
<span class="line"></span>
<span class="line">        System.out.println(&quot;ArrayList从集合尾部位置新增元素花费的时间&quot; + (timeEnd - timeStart));</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">public class LinkedListTest {</span>
<span class="line">    public static void addFromTailTest(int num) {</span>
<span class="line">        LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();</span>
<span class="line">        int i = 0;</span>
<span class="line">        long timeStart = System.currentTimeMillis();</span>
<span class="line">        while (i &lt; num) {</span>
<span class="line">            list.add(i + &quot;沉默王二&quot;);</span>
<span class="line">            i++;</span>
<span class="line">        }</span>
<span class="line">        long timeEnd = System.currentTimeMillis();</span>
<span class="line"></span>
<span class="line">        System.out.println(&quot;LinkedList从集合尾部位置新增元素花费的时间&quot; + (timeEnd - timeStart));</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">ArrayList从集合尾部位置新增元素花费的时间69</span>
<span class="line">LinkedList从集合尾部位置新增元素花费的时间193</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><h3 id="删除元素时究竟谁快" tabindex="-1"><a class="header-anchor" href="#删除元素时究竟谁快"><span><!----></span></a></h3><h4 id="arraylist-2" tabindex="-1"><a class="header-anchor" href="#arraylist-2"><span><!----></span></a></h4><!---->`<!---->`<!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public boolean remove(Object o) {</span>
<span class="line">    final Object[] es = elementData; // 获取数组元素</span>
<span class="line">    final int size = this.size; // 获取数组大小</span>
<span class="line">    int i = 0;</span>
<span class="line">    found: {</span>
<span class="line">        if (o == null) {</span>
<span class="line">            for (; i &lt; size; i++)</span>
<span class="line">                if (es[i] == null)</span>
<span class="line">                    break found;</span>
<span class="line">        } else {</span>
<span class="line">            for (; i &lt; size; i++)</span>
<span class="line">                if (o.equals(es[i]))</span>
<span class="line">                    break found;</span>
<span class="line">        }</span>
<span class="line">        return false;</span>
<span class="line">    }</span>
<span class="line">    fastRemove(es, i); // 调用 fastRemove 方法快速移除元素</span>
<span class="line">    return true;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">public E remove(int index) {</span>
<span class="line">    Objects.checkIndex(index, size); // 检查索引是否越界</span>
<span class="line">    final Object[] es = elementData; // 获取数组元素</span>
<span class="line"></span>
<span class="line">    oldValue = (E) es[index]; // 获取要删除的元素</span>
<span class="line">    fastRemove(es, index); // 调用 fastRemove 方法快速移除元素</span>
<span class="line"></span>
<span class="line">    return oldValue; // 返回被删除的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private void fastRemove(Object[] es, int i) {</span>
<span class="line">    final int newSize;</span>
<span class="line">    if ((newSize = size - 1) &gt; i) // 如果要删除的不是最后一个元素</span>
<span class="line">        System.arraycopy(es, i + 1, es, i, newSize - i); // 将要删除元素后面的元素向前移动一位</span>
<span class="line">    es[size = newSize] = null; // 将最后一个元素置为 null，帮助垃圾回收</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h4 id="linkedlist-4" tabindex="-1"><a class="header-anchor" href="#linkedlist-4"><span><!----></span></a></h4><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove(int)&lt;/font&gt;</code><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E remove(int index) {</span>
<span class="line">    checkElementIndex(index);</span>
<span class="line">    return unlink(node(index));</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">E unlink(Node&lt;E&gt; x) {</span>
<span class="line">    final E element = x.item; // 获取要删除的节点的元素</span>
<span class="line">    final Node&lt;E&gt; next = x.next; // 获取要删除的节点的后继节点</span>
<span class="line">    final Node&lt;E&gt; prev = x.prev; // 获取要删除的节点的前驱节点</span>
<span class="line"></span>
<span class="line">    if (prev == null) { // 如果要删除的节点是第一个节点</span>
<span class="line">        first = next; // 将头节点更新为要删除的节点的后继节点</span>
<span class="line">    } else {</span>
<span class="line">        prev.next = next; // 将要删除的节点的前驱节点的后继节点指向要删除的节点的后继节点</span>
<span class="line">        x.prev = null; // 将要删除的节点的前驱节点置为 null，帮助垃圾回收</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    if (next == null) { // 如果要删除的节点是最后一个节点</span>
<span class="line">        last = prev; // 将尾节点更新为要删除的节点的前驱节点</span>
<span class="line">    } else {</span>
<span class="line">        next.prev = prev; // 将要删除的节点的后继节点的前驱节点指向要删除的节点的前驱节点</span>
<span class="line">        x.next = null; // 将要删除的节点的后继节点置为 null，帮助垃圾回收</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    x.item = null; // 将要删除的节点的元素置为 null，帮助垃圾回收</span>
<span class="line">    size--; // 将链表的长度减一</span>
<span class="line">    return element; // 返回被删除的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;remove(Object)&lt;/font&gt;</code><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public boolean remove(Object o) {</span>
<span class="line">    if (o == null) { // 如果要删除的元素为 null</span>
<span class="line">        for (LinkedList.Node&lt;E&gt; x = first; x != null; x = x.next) {</span>
<span class="line">            if (x.item == null) { // 如果找到了要删除的节点</span>
<span class="line">                unlink(x); // 调用 unlink 方法删除指定节点</span>
<span class="line">                return true; // 返回删除成功</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    } else {</span>
<span class="line">        for (LinkedList.Node&lt;E&gt; x = first; x != null; x = x.next) {</span>
<span class="line">            if (o.equals(x.item)) { // 如果找到了要删除的节点</span>
<span class="line">                unlink(x); // 调用 unlink 方法删除指定节点</span>
<span class="line">                return true; // 返回删除成功</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    return false; // 没有找到要删除的节点，返回删除失败</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;removeFirst()&lt;/font&gt;</code><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E removeFirst() {</span>
<span class="line">    final LinkedList.Node&lt;E&gt; f = first;</span>
<span class="line">    if (f == null)</span>
<span class="line">        throw new NoSuchElementException();</span>
<span class="line">    return unlinkFirst(f);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">private E unlinkFirst(LinkedList.Node&lt;E&gt; f) {</span>
<span class="line">    final E element = f.item; // 获取要删除的节点的元素</span>
<span class="line">    final LinkedList.Node&lt;E&gt; next = f.next; // 获取要删除的节点的后继节点</span>
<span class="line">    f.item = null; // 将要删除的节点的元素置为 null，帮助垃圾回收</span>
<span class="line">    f.next = null; // 将要删除的节点的后继节点置为 null，帮助垃圾回收</span>
<span class="line">    first = next; // 将头节点更新为要删除的节点的后继节点</span>
<span class="line">    if (next == null) // 如果链表已经为空</span>
<span class="line">        last = null; // 将尾节点置为 null</span>
<span class="line">    else</span>
<span class="line">        next.prev = null; // 将要删除的节点的后继节点的前驱节点置为 null，帮助垃圾回收</span>
<span class="line">    size--; // 将链表的长度减一</span>
<span class="line">    return element; // 返回被删除的元素</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;removeLast()&lt;/font&gt;</code><!----></li></ul><!----><!----><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">ArrayList从集合头部位置删除元素花费的时间380</span>
<span class="line">LinkedList从集合头部位置删除元素花费的时间4</span>
<span class="line">ArrayList从集合中间位置删除元素花费的时间381</span>
<span class="line">LinkedList从集合中间位置删除元素花费的时间5922</span>
<span class="line">ArrayList从集合尾部位置删除元素花费的时间8</span>
<span class="line">LinkedList从集合尾部位置删除元素花费的时间12</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="遍历元素时究竟谁快" tabindex="-1"><a class="header-anchor" href="#遍历元素时究竟谁快"><span><!----></span></a></h3><h4 id="arraylist-3" tabindex="-1"><a class="header-anchor" href="#arraylist-3"><span><!----></span></a></h4><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;get(int)&lt;/font&gt;</code><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E get(int index) {</span>
<span class="line">    Objects.checkIndex(index, size);</span>
<span class="line">    return elementData(index);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;indexOf(Object)&lt;/font&gt;</code><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public int indexOf(Object o) {</span>
<span class="line">    return indexOfRange(o, 0, size);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">int indexOfRange(Object o, int start, int end) {</span>
<span class="line">    Object[] es = elementData; // 获取 ArrayList 中的元素数组</span>
<span class="line">    if (o == null) { // 如果要查找的元素为 null</span>
<span class="line">        for (int i = start; i &lt; end; i++) {</span>
<span class="line">            if (es[i] == null) { // 如果找到了要查找的元素</span>
<span class="line">                return i; // 返回元素在 ArrayList 中的索引</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    } else {</span>
<span class="line">        for (int i = start; i &lt; end; i++) {</span>
<span class="line">            if (o.equals(es[i])) { // 如果找到了要查找的元素</span>
<span class="line">                return i; // 返回元素在 ArrayList 中的索引</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    return -1; // 没有找到要查找的元素，返回 -1</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h4 id="linkedlist-5" tabindex="-1"><a class="header-anchor" href="#linkedlist-5"><span><!----></span></a></h4><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;get(int)&lt;/font&gt;</code><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public E get(int index) {</span>
<span class="line">    checkElementIndex(index);</span>
<span class="line">    return node(index).item;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><ul><li><code>&lt;font style=&quot;color:rgb(44, 62, 80);&quot;&gt;indexOf(Object)&lt;/font&gt;</code><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public int indexOf(Object o) {</span>
<span class="line">    int index = 0; // 初始化索引为 0</span>
<span class="line">    if (o == null) { // 如果要查找的元素为 null</span>
<span class="line">        for (LinkedList.Node&lt;E&gt; x = first; x != null; x = x.next) { // 从头节点开始遍历链表</span>
<span class="line">            if (x.item == null) // 如果找到了要查找的元素</span>
<span class="line">                return index; // 返回元素在 LinkedList 中的索引</span>
<span class="line">            index++; // 索引加一</span>
<span class="line">        }</span>
<span class="line">    } else {</span>
<span class="line">        for (LinkedList.Node&lt;E&gt; x = first; x != null; x = x.next) { // 从头节点开始遍历链表</span>
<span class="line">            if (o.equals(x.item)) // 如果找到了要查找的元素</span>
<span class="line">                return index; // 返回元素在 LinkedList 中的索引</span>
<span class="line">            index++; // 索引加一</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    return -1; // 没有找到要查找的元素，返回 -1</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->[<!---->](https://javabetter.cn/collection/iterator-iterable.html)<!----><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">LinkedList.Node&lt;E&gt; node(int index) {</span>
<span class="line">    // assert isElementIndex(index);</span>
<span class="line"></span>
<span class="line">    if (index &lt; (size &gt;&gt; 1)) { // 如果要查找的元素在链表的前半部分</span>
<span class="line">        LinkedList.Node&lt;E&gt; x = first; // 从头节点开始遍历链表</span>
<span class="line">        for (int i = 0; i &lt; index; i++) // 循环查找元素</span>
<span class="line">            x = x.next;</span>
<span class="line">        return x; // 返回要查找的元素节点</span>
<span class="line">    } else { // 如果要查找的元素在链表的后半部分</span>
<span class="line">        LinkedList.Node&lt;E&gt; x = last; // 从尾节点开始遍历链表</span>
<span class="line">        for (int i = size - 1; i &gt; index; i--) // 循环查找元素</span>
<span class="line">            x = x.prev;</span>
<span class="line">        return x; // 返回要查找的元素节点</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();</span>
<span class="line">for (Iterator&lt;String&gt; it = list.iterator(); it.hasNext();) {</span>
<span class="line">    it.next();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726671668215-9777399f-05a6-445c-9498-2d57279e5373.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public ListIterator&lt;E&gt; listIterator(int index) {</span>
<span class="line">    checkPositionIndex(index); // 检查索引是否在有效范围内</span>
<span class="line">    return new LinkedList.ListItr(index); // 创建一个新的 ListItr 对象并返回</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">private class ListItr implements ListIterator&lt;E&gt; {</span>
<span class="line">    private LinkedList.Node&lt;E&gt; lastReturned; // 上一个已返回的节点</span>
<span class="line">    private LinkedList.Node&lt;E&gt; next; // 下一个节点</span>
<span class="line">    private int nextIndex; // 下一个节点的索引</span>
<span class="line">    private int expectedModCount = modCount; // 链表被修改的次数</span>
<span class="line"></span>
<span class="line">    ListItr(int index) {</span>
<span class="line">        // assert isPositionIndex(index);</span>
<span class="line">        next = (index == size) ? null : node(index); // 如果 index 等于 size，next 为 null，否则返回 node(index)</span>
<span class="line">        nextIndex = index; // 设置 nextIndex 为 index</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    public boolean hasNext() {</span>
<span class="line">        return nextIndex &lt; size; // 如果下一个节点的索引小于链表的长度，返回 true，否则返回 false</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    public E next() {</span>
<span class="line">        checkForComodification(); // 检查链表是否已经被修改</span>
<span class="line">        if (!hasNext()) // 如果没有下一个节点，抛出 NoSuchElementException 异常</span>
<span class="line">            throw new NoSuchElementException();</span>
<span class="line"></span>
<span class="line">        lastReturned = next; // 将下一个节点设置为上一个已返回节点</span>
<span class="line">        next = next.next; // 将下一个节点设置为当前节点的下一个节点</span>
<span class="line">        nextIndex++; // 将下一个节点的索引增加 1</span>
<span class="line">        return lastReturned.item; // 返回上一个已返回节点的元素</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->**<!---->**<!----><h3 id="两者的使用场景" tabindex="-1"><a class="header-anchor" href="#两者的使用场景"><span><!----></span></a></h3><!----><!----><!----><h2 id="iterator-和-iterable-区别" tabindex="-1"><a class="header-anchor" href="#iterator-和-iterable-区别"><span>Iterator 和 Iterable 区别</span></a></h2><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">for (int i = 0; i &lt; list.size(); i++) {</span>
<span class="line">    System.out.print(list.get(i) + &quot;，&quot;);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Iterator it = list.iterator();</span>
<span class="line">while (it.hasNext()) {</span>
<span class="line">    System.out.print(it.next() + &quot;，&quot;);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">for (String str : list) {</span>
<span class="line">    System.out.print(str + &quot;，&quot;);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Iterator var3 = list.iterator();</span>
<span class="line"></span>
<span class="line">while(var3.hasNext()) {</span>
<span class="line">    String str = (String)var3.next();</span>
<span class="line">    System.out.print(str + &quot;，&quot;);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><ul><li><!----></li><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public interface Iterator&lt;E&gt; {</span>
<span class="line">    // 判断集合中是否存在下一个对象</span>
<span class="line">    boolean hasNext();</span>
<span class="line">    // 返回集合中的下一个对象，并将访问指针移动一位</span>
<span class="line">    E next();</span>
<span class="line">    // 删除集合中调用next()方法返回的对象</span>
<span class="line">    default void remove() {</span>
<span class="line">        throw new UnsupportedOperationException(&quot;remove&quot;);</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">default void forEach(Consumer&lt;? super T&gt; action) {</span>
<span class="line">    Objects.requireNonNull(action);</span>
<span class="line">    for (T t : this) {</span>
<span class="line">        action.accept(t);</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;Integer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3));</span>
<span class="line">list.forEach(integer -&gt; System.out.println(integer));</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;Integer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3));</span>
<span class="line">list.forEach(new Consumer&lt;Integer&gt;() {</span>
<span class="line">    @Override</span>
<span class="line">    public void accept(Integer integer) {</span>
<span class="line">        System.out.println(integer);</span>
<span class="line">    }</span>
<span class="line">});</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726671705549-01c1cf64-0a34-4149-8408-e25d70421481.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public interface Iterable&lt;T&gt; {</span>
<span class="line">    Iterator&lt;T&gt; iterator();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Iterator it = list.iterator();</span>
<span class="line">while (it.hasNext()) {</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public Iterator&lt;E&gt; iterator() {</span>
<span class="line">    return new Itr();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * ArrayList 迭代器的实现，内部类。</span>
<span class="line"> */</span>
<span class="line">private class Itr implements Iterator&lt;E&gt; {</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 游标位置，即下一个元素的索引。</span>
<span class="line">     */</span>
<span class="line">    int cursor;</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 上一个元素的索引。</span>
<span class="line">     */</span>
<span class="line">    int lastRet = -1;</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 预期的结构性修改次数。</span>
<span class="line">     */</span>
<span class="line">    int expectedModCount = modCount;</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 判断是否还有下一个元素。</span>
<span class="line">     *</span>
<span class="line">     * @return 如果还有下一个元素，则返回 true，否则返回 false。</span>
<span class="line">     */</span>
<span class="line">    public boolean hasNext() {</span>
<span class="line">        return cursor != size;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 获取下一个元素。</span>
<span class="line">     *</span>
<span class="line">     * @return 列表中的下一个元素。</span>
<span class="line">     * @throws NoSuchElementException 如果没有下一个元素，则抛出 NoSuchElementException 异常。</span>
<span class="line">     */</span>
<span class="line">    @SuppressWarnings(&quot;unchecked&quot;)</span>
<span class="line">    public E next() {</span>
<span class="line">        // 获取 ArrayList 对象的内部数组</span>
<span class="line">        Object[] elementData = ArrayList.this.elementData;</span>
<span class="line">        // 记录当前迭代器的位置</span>
<span class="line">        int i = cursor;</span>
<span class="line">        if (i &gt;= size) {</span>
<span class="line">            throw new NoSuchElementException();</span>
<span class="line">        }</span>
<span class="line">        // 将游标位置加 1，为下一次迭代做准备</span>
<span class="line">        cursor = i + 1;</span>
<span class="line">        // 记录上一个元素的索引</span>
<span class="line">        return (E) elementData[lastRet = i];</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 删除最后一个返回的元素。</span>
<span class="line">     * 迭代器只能删除最后一次调用 next 方法返回的元素。</span>
<span class="line">     *</span>
<span class="line">     * @throws ConcurrentModificationException 如果在最后一次调用 next 方法之后列表结构被修改，则抛出 ConcurrentModificationException 异常。</span>
<span class="line">     * @throws IllegalStateException         如果在调用 next 方法之前没有调用 remove 方法，或者在同一次迭代中多次调用 remove 方法，则抛出 IllegalStateException 异常。</span>
<span class="line">     */</span>
<span class="line">    public void remove() {</span>
<span class="line">        // 检查在最后一次调用 next 方法之后是否进行了结构性修改</span>
<span class="line">        if (expectedModCount != modCount) {</span>
<span class="line">            throw new ConcurrentModificationException();</span>
<span class="line">        }</span>
<span class="line">        // 如果上一次调用 next 方法之前没有调用 remove 方法，则抛出 IllegalStateException 异常</span>
<span class="line">        if (lastRet &lt; 0) {</span>
<span class="line">            throw new IllegalStateException();</span>
<span class="line">        }</span>
<span class="line">        try {</span>
<span class="line">            // 调用 ArrayList 对象的 remove(int index) 方法删除上一个元素</span>
<span class="line">            ArrayList.this.remove(lastRet);</span>
<span class="line">            // 将游标位置设置为上一个元素的位置</span>
<span class="line">            cursor = lastRet;</span>
<span class="line">            // 将上一个元素的索引设置为 -1，表示没有上一个元素</span>
<span class="line">            lastRet = -1;</span>
<span class="line">            // 更新预期的结构性修改次数</span>
<span class="line">            expectedModCount = modCount;</span>
<span class="line">        } catch (IndexOutOfBoundsException ex) {</span>
<span class="line">            throw new ConcurrentModificationException();</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Iterable it = list.iterator();</span>
<span class="line">while (it.hasNext()) {</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><!----><!---->`<!---->`<!---->`<!---->`<!---->`<!---->`<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public Iterator&lt;E&gt; iterator() {</span>
<span class="line">    return listIterator();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public ListIterator&lt;E&gt; listIterator(int index) {</span>
<span class="line">    checkPositionIndex(index);</span>
<span class="line">    return new ListItr(index);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public interface ListIterator&lt;E&gt; extends Iterator&lt;E&gt; {</span>
<span class="line">    boolean hasNext();</span>
<span class="line">    E next();</span>
<span class="line">    boolean hasPrevious();</span>
<span class="line">    E previous();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">/**</span>
<span class="line"> * ArrayList 逆向迭代器的实现，内部类。</span>
<span class="line"> */</span>
<span class="line">private class DescendingIterator implements Iterator&lt;E&gt; {</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 使用 ListItr 对象进行逆向遍历。</span>
<span class="line">     */</span>
<span class="line">    private final ListItr itr = new ListItr(size());</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 判断是否还有下一个元素。</span>
<span class="line">     *</span>
<span class="line">     * @return 如果还有下一个元素，则返回 true，否则返回 false。</span>
<span class="line">     */</span>
<span class="line">    public boolean hasNext() {</span>
<span class="line">        return itr.hasPrevious();</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 获取下一个元素。</span>
<span class="line">     *</span>
<span class="line">     * @return 列表中的下一个元素。</span>
<span class="line">     * @throws NoSuchElementException 如果没有下一个元素，则抛出 NoSuchElementException 异常。</span>
<span class="line">     */</span>
<span class="line">    public E next() {</span>
<span class="line">        return itr.previous();</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 删除最后一个返回的元素。</span>
<span class="line">     * 迭代器只能删除最后一次调用 next 方法返回的元素。</span>
<span class="line">     *</span>
<span class="line">     * @throws UnsupportedOperationException 如果列表不支持删除操作，则抛出 UnsupportedOperationException 异常。</span>
<span class="line">     * @throws IllegalStateException         如果在调用 next 方法之前没有调用 remove 方法，或者在同一次迭代中多次调用 remove 方法，则抛出 IllegalStateException 异常。</span>
<span class="line">     */</span>
<span class="line">    public void remove() {</span>
<span class="line">        itr.remove();</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Iterator it = list.descendingIterator();</span>
<span class="line">while (it.hasNext()) {</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li></ul><h2 id="foreach-循环陷阱" tabindex="-1"><a class="header-anchor" href="#foreach-循环陷阱"><span>foreach 循环陷阱</span></a></h2><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726671720267-e0403a0f-5e13-448b-ad54-76d8c736016e.png"><!---->[<!---->](https://github.com/itwanger/toBeBetterJavaer)<!----><!----><h4 id="关于fail-fast" tabindex="-1"><a class="header-anchor" href="#关于fail-fast"><span><a href="https://javabetter.cn/collection/fail-fast.html#%E5%85%B3%E4%BA%8Efail-fast" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public void test(Wanger wanger) {   </span>
<span class="line">    if (wanger == null) {</span>
<span class="line">        throw new RuntimeException(&quot;wanger 不能为空&quot;);</span>
<span class="line">    }</span>
<span class="line">    </span>
<span class="line">    System.out.println(wanger.toString());</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><h4 id="for-each-删除元素报错" tabindex="-1"><a class="header-anchor" href="#for-each-删除元素报错"><span><a href="https://javabetter.cn/collection/fail-fast.html#for-each-%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%E6%8A%A5%E9%94%99" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span>
<span class="line">list.add(&quot;沉默王二&quot;);</span>
<span class="line">list.add(&quot;沉默王三&quot;);</span>
<span class="line">list.add(&quot;一个文章真特么有趣的程序员&quot;);</span>
<span class="line"></span>
<span class="line">for (String str : list) {</span>
<span class="line">	if (&quot;沉默王二&quot;.equals(str)) {</span>
<span class="line">		list.remove(str);</span>
<span class="line">	}</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">System.out.println(list);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726671720852-27f4738a-a6da-4cf9-8b49-a3fbe5dcdd27.png"><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">final void checkForComodification() {</span>
<span class="line">    if (modCount != expectedModCount)</span>
<span class="line">        throw new ConcurrentModificationException();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!---->[<!---->](https://javabetter.cn/collection/iterator-iterable.html)<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; list = new ArrayList();</span>
<span class="line">list.add(&quot;沉默王二&quot;);</span>
<span class="line">list.add(&quot;沉默王三&quot;);</span>
<span class="line">list.add(&quot;一个文章真特么有趣的程序员&quot;);</span>
<span class="line">Iterator var2 = list.iterator();</span>
<span class="line"></span>
<span class="line">while(var2.hasNext()) {</span>
<span class="line">    String str = (String)var2.next();</span>
<span class="line">    if (&quot;沉默王二&quot;.equals(str)) {</span>
<span class="line">        list.remove(str);</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">System.out.println(list);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public Iterator&lt;E&gt; iterator() {</span>
<span class="line">    return new Itr();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private class Itr implements Iterator&lt;E&gt; {</span>
<span class="line">    int cursor;             // 下一个元素的索引</span>
<span class="line">    int lastRet = -1;       // 上一个返回元素的索引；如果没有则为 -1</span>
<span class="line">    int expectedModCount = modCount; // ArrayList 的修改次数</span>
<span class="line"></span>
<span class="line">    Itr() { }  // 构造函数</span>
<span class="line"></span>
<span class="line">    public boolean hasNext() { // 判断是否还有下一个元素</span>
<span class="line">        return cursor != size;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    @SuppressWarnings(&quot;unchecked&quot;)</span>
<span class="line">    public E next() { // 返回下一个元素</span>
<span class="line">        checkForComodification(); // 检查 ArrayList 是否被修改过</span>
<span class="line">        int i = cursor; // 当前索引</span>
<span class="line">        Object[] elementData = ArrayList.this.elementData; // ArrayList 中的元素数组</span>
<span class="line">        if (i &gt;= elementData.length) // 超出数组范围</span>
<span class="line">            throw new ConcurrentModificationException(); // 抛出异常</span>
<span class="line">        cursor = i + 1; // 更新下一个元素的索引</span>
<span class="line">        return (E) elementData[lastRet = i]; // 返回下一个元素</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">protected transient int modCount = 0;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="分析代码执行的逻辑" tabindex="-1"><a class="header-anchor" href="#分析代码执行的逻辑"><span><a href="https://javabetter.cn/collection/fail-fast.html#%E5%88%86%E6%9E%90%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E7%9A%84%E9%80%BB%E8%BE%91" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span>
<span class="line">list.add(&quot;沉默王二&quot;);</span>
<span class="line">list.add(&quot;沉默王三&quot;);</span>
<span class="line">list.add(&quot;一个文章真特么有趣的程序员&quot;);</span>
<span class="line"></span>
<span class="line">for (String str : list) {</span>
<span class="line">	if (&quot;沉默王二&quot;.equals(str)) {</span>
<span class="line">		list.remove(str);</span>
<span class="line">	}</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">System.out.println(list);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li><li><!----><!---->`<!---->`</li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private void ensureExplicitCapacity(int minCapacity) {</span>
<span class="line">    modCount++;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><!----><!---->`<!---->`<!----><ul><li><!----></li><li><!----><!---->`<!---->`</li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private void fastRemove(int index) {</span>
<span class="line">    modCount++;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">final void checkForComodification() {</span>
<span class="line">    if (modCount != expectedModCount)</span>
<span class="line">        throw new ConcurrentModificationException();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1726671722206-16c4a913-7c33-415a-aa4b-24da5750bcdc.png"><!----><h4 id="那该如何正确地删除元素呢" tabindex="-1"><a class="header-anchor" href="#那该如何正确地删除元素呢"><span><a href="https://javabetter.cn/collection/fail-fast.html#%E9%82%A3%E8%AF%A5%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E5%9C%B0%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%E5%91%A2" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><h5 id="_1-remove-后-break" tabindex="-1"><a class="header-anchor" href="#_1-remove-后-break"><span><a href="https://javabetter.cn/collection/fail-fast.html#_1-remove-%E5%90%8E-break" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h5><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span>
<span class="line">list.add(&quot;沉默王二&quot;);</span>
<span class="line">list.add(&quot;沉默王三&quot;);</span>
<span class="line">list.add(&quot;一个文章真特么有趣的程序员&quot;);</span>
<span class="line"></span>
<span class="line">for (String str : list) {</span>
<span class="line">	if (&quot;沉默王二&quot;.equals(str)) {</span>
<span class="line">		list.remove(str);</span>
<span class="line">		break;</span>
<span class="line">	}</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><h5 id="_2-for-循环" tabindex="-1"><a class="header-anchor" href="#_2-for-循环"><span><a href="https://javabetter.cn/collection/fail-fast.html#_2-for-%E5%BE%AA%E7%8E%AF" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h5><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span>
<span class="line">list.add(&quot;沉默王二&quot;);</span>
<span class="line">list.add(&quot;沉默王三&quot;);</span>
<span class="line">list.add(&quot;一个文章真特么有趣的程序员&quot;);</span>
<span class="line">for (int i = 0; i &lt; list.size(); i++) {</span>
<span class="line">	String str = list.get(i);</span>
<span class="line">	if (&quot;沉默王二&quot;.equals(str)) {</span>
<span class="line">		list.remove(str);</span>
<span class="line">	}</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><h5 id="_3-使用-iterator" tabindex="-1"><a class="header-anchor" href="#_3-使用-iterator"><span><a href="https://javabetter.cn/collection/fail-fast.html#_3-%E4%BD%BF%E7%94%A8-iterator" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h5><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span>
<span class="line">list.add(&quot;沉默王二&quot;);</span>
<span class="line">list.add(&quot;沉默王三&quot;);</span>
<span class="line">list.add(&quot;一个文章真特么有趣的程序员&quot;);</span>
<span class="line"></span>
<span class="line">Iterator&lt;String&gt; itr = list.iterator();</span>
<span class="line"></span>
<span class="line">while (itr.hasNext()) {</span>
<span class="line">	String str = itr.next();</span>
<span class="line">	if (&quot;沉默王二&quot;.equals(str)) {</span>
<span class="line">		itr.remove();</span>
<span class="line">	}</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public void remove() {</span>
<span class="line">    if (lastRet &lt; 0) // 如果没有上一个返回元素的索引，则抛出异常</span>
<span class="line">        throw new IllegalStateException();</span>
<span class="line">    checkForComodification(); // 检查 ArrayList 是否被修改过</span>
<span class="line"></span>
<span class="line">    try {</span>
<span class="line">        ArrayList.this.remove(lastRet); // 删除上一个返回元素</span>
<span class="line">        cursor = lastRet; // 更新下一个元素的索引</span>
<span class="line">        lastRet = -1; // 清空上一个返回元素的索引</span>
<span class="line">        expectedModCount = modCount; // 更新 ArrayList 的修改次数</span>
<span class="line">    } catch (IndexOutOfBoundsException ex) {</span>
<span class="line">        throw new ConcurrentModificationException(); // 抛出异常</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><h4 id="小结-9" tabindex="-1"><a class="header-anchor" href="#小结-9"><span><a href="https://javabetter.cn/collection/fail-fast.html#%E5%B0%8F%E7%BB%93" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h4><!----><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span>
<span class="line">list.add(&quot;沉默王二&quot;);</span>
<span class="line">list.add(&quot;沉默王三&quot;);</span>
<span class="line">list.add(&quot;一个文章真特么有趣的程序员&quot;);</span>
<span class="line"></span>
<span class="line">Iterator&lt;String&gt; itr = list.iterator();</span>
<span class="line"></span>
<span class="line">while (itr.hasNext()) {</span>
<span class="line">	String str = itr.next();</span>
<span class="line">	if (&quot;沉默王二&quot;.equals(str)) {</span>
<span class="line">		itr.remove();</span>
<span class="line">	}</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->[<!---->](https://javabetter.cn/java8/stream.html)<!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(&quot;沉默&quot;, &quot;王二&quot;, &quot;陈清扬&quot;));</span>
<span class="line">list = list.stream().filter(s -&gt; !s.equals(&quot;陈清扬&quot;)).collect(Collectors.toList());</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!----><h2 id="comparable-和-comparator" tabindex="-1"><a class="header-anchor" href="#comparable-和-comparator"><span><!----></span></a></h2><!----><!----><h3 id="comparable" tabindex="-1"><a class="header-anchor" href="#comparable"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public interface Comparable&lt;T&gt; {</span>
<span class="line">    int compareTo(T t);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class Cmower implements Comparable&lt;Cmower&gt; {</span>
<span class="line">    private int age;</span>
<span class="line">    private String name;</span>
<span class="line"></span>
<span class="line">    public Cmower(int age, String name) {</span>
<span class="line">        this.age = age;</span>
<span class="line">        this.name = name;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    @Override</span>
<span class="line">    public int compareTo(Cmower o) {</span>
<span class="line">        return this.getAge() - o.getAge();</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    public static void main(String[] args) {</span>
<span class="line">        Cmower wanger = new Cmower(19,&quot;沉默王二&quot;);</span>
<span class="line">        Cmower wangsan = new Cmower(16,&quot;沉默王三&quot;);</span>
<span class="line"></span>
<span class="line">        if (wanger.compareTo(wangsan) &lt; 0) {</span>
<span class="line">            System.out.println(wanger.getName() + &quot;比较年轻有为&quot;);</span>
<span class="line">        } else {</span>
<span class="line">            System.out.println(wangsan.getName() + &quot;比较年轻有为&quot;);</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!---->[<!---->](https://javabetter.cn/basic-extra-meal/generic.html)<!----><h3 id="comparator" tabindex="-1"><a class="header-anchor" href="#comparator"><span><!----></span></a></h3><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public interface Comparator&lt;T&gt; {</span>
<span class="line">    int compare(T o1, T o2);</span>
<span class="line">    boolean equals(Object obj);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><!----><!---->`<!---->`<!----><!----><!----><!----><h4 id="原封不动的-cmower-类。" tabindex="-1"><a class="header-anchor" href="#原封不动的-cmower-类。"><span><!----></span></a></h4><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class Cmower  {</span>
<span class="line">    private int age;</span>
<span class="line">    private String name;</span>
<span class="line"></span>
<span class="line">    public Cmower(int age, String name) {</span>
<span class="line">        this.age = age;</span>
<span class="line">        this.name = name;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><h4 id="再来看-comparator-接口的实现类。" tabindex="-1"><a class="header-anchor" href="#再来看-comparator-接口的实现类。"><span><!----></span></a></h4><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class CmowerComparator implements Comparator&lt;Cmower&gt; {</span>
<span class="line">    @Override</span>
<span class="line">    public int compare(Cmower o1, Cmower o2) {</span>
<span class="line">        return o1.getAge() - o2.getAge();</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public class CmowerNameComparator implements Comparator&lt;Cmower&gt; {</span>
<span class="line">    @Override</span>
<span class="line">    public int compare(Cmower o1, Cmower o2) {</span>
<span class="line">        if (o1.getName().hashCode() &lt; o2.getName().hashCode()) {</span>
<span class="line">            return -1;</span>
<span class="line">        } else if (o1.getName().hashCode() == o2.getName().hashCode()) {</span>
<span class="line">            return 0;</span>
<span class="line">        }</span>
<span class="line">        return 1;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="再来看测试类。" tabindex="-1"><a class="header-anchor" href="#再来看测试类。"><span><!----></span></a></h4><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">Cmower wanger = new Cmower(19,&quot;沉默王二&quot;);</span>
<span class="line">Cmower wangsan = new Cmower(16,&quot;沉默王三&quot;);</span>
<span class="line">Cmower wangyi = new Cmower(28,&quot;沉默王一&quot;);</span>
<span class="line"></span>
<span class="line">List&lt;Cmower&gt; list = new ArrayList&lt;&gt;();</span>
<span class="line">list.add(wanger);</span>
<span class="line">list.add(wangsan);</span>
<span class="line">list.add(wangyi);</span>
<span class="line"></span>
<span class="line">list.sort(new CmowerComparator());</span>
<span class="line"></span>
<span class="line">for (Cmower c : list) {</span>
<span class="line">    System.out.println(c.getName());</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->`<!---->`<!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">沉默王三</span>
<span class="line">沉默王二</span>
<span class="line">沉默王一</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">public void sort(Comparator&lt;? super E&gt; c) {</span>
<span class="line">    // 保存当前队列的 modCount 值，用于检测 sort 操作是否非法</span>
<span class="line">    final int expectedModCount = modCount;</span>
<span class="line">    // 调用 Arrays.sort 对 elementData 数组进行排序，使用传入的比较器 c</span>
<span class="line">    Arrays.sort((E[]) elementData, 0, size, c);</span>
<span class="line">    // 检查操作期间 modCount 是否被修改，如果被修改则抛出并发修改异常</span>
<span class="line">    if (modCount != expectedModCount) {</span>
<span class="line">        throw new ConcurrentModificationException();</span>
<span class="line">    }</span>
<span class="line">    // 增加 modCount 值，表示队列已经被修改过</span>
<span class="line">    modCount++;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><p><a href="https://javabetter.cn/basic-extra-meal/generic.html" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><!----><p><code>Comparator&lt;? super E&gt; c</code></p><!----><h3 id="到底该用哪一个" tabindex="-1"><a class="header-anchor" href="#到底该用哪一个"><span><!----></span></a></h3><!----><ul><li><!----></li><li><!----></li><li><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----><!---->`<!---->`<!----><!----></li></ul><!----><!----><!---->`<!---->`<!---->`<!---->`<!----><h2 id="weakhashmap-详解" tabindex="-1"><a class="header-anchor" href="#weakhashmap-详解"><span>WeakHashMap 详解</span></a></h2><!---->[<!---->](https://javabetter.cn/collection/hashmap.html)<!----><!----><!----><!----><ul><li><!----></li><li><!----></li><li><!----></li><li><!----></li></ul><!----><ul><li><!----></li><li><!----></li></ul><h3 id="weakhashmap如何不阻止对象回收呢" tabindex="-1"><a class="header-anchor" href="#weakhashmap如何不阻止对象回收呢"><span><a href="https://javabetter.cn/collection/WeakHashMap.html#weakhashmap%E5%A6%82%E4%BD%95%E4%B8%8D%E9%98%BB%E6%AD%A2%E5%AF%B9%E8%B1%A1%E5%9B%9E%E6%94%B6%E5%91%A2" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private static final class Entry&lt;K, V&gt; extends WeakReference&lt;K&gt; implements</span>
<span class="line">  Map.Entry&lt;K, V&gt; {</span>
<span class="line">  int hash;</span>
<span class="line">  boolean isNull;</span>
<span class="line">  V value;</span>
<span class="line">  Entry&lt;K, V&gt; next;</span>
<span class="line">  interface Type&lt;R, K, V&gt; {</span>
<span class="line">  R get(Map.Entry&lt;K, V&gt; entry);</span>
<span class="line">  }</span>
<span class="line">  Entry(K key, V object, ReferenceQueue&lt;K&gt; queue) {</span>
<span class="line">  super(key, queue);</span>
<span class="line">  isNull = key == null;</span>
<span class="line">  hash = isNull ? 0 : key.hashCode();</span>
<span class="line">  value = object;</span>
<span class="line">  }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li><li><!----></li></ul><h3 id="如何删除被回收的key数据呢" tabindex="-1"><a class="header-anchor" href="#如何删除被回收的key数据呢"><span><a href="https://javabetter.cn/collection/WeakHashMap.html#%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4%E8%A2%AB%E5%9B%9E%E6%94%B6%E7%9A%84key%E6%95%B0%E6%8D%AE%E5%91%A2" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><!----><!----><ul><li><!----></li><li><!----></li></ul><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">void poll() {</span>
<span class="line">  Entry&lt;K, V&gt; toRemove;</span>
<span class="line">  while ((toRemove = (Entry&lt;K, V&gt;) referenceQueue.poll()) != null) {</span>
<span class="line">  removeEntry(toRemove);</span>
<span class="line">  Log.d(LOGTAG, &quot;removeEntry=&quot; + toRemove.value);</span>
<span class="line">  }</span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">class MyObject(val id: String) : Any() {</span>
<span class="line">  protected fun finalize() {</span>
<span class="line">  Log.i(&quot;MainActivity&quot;, &quot;Object($id) finalize method is called&quot;)</span>
<span class="line">  }</span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">private val weakHashMap = WeakHashMap&lt;Any, Int&gt;()</span>
<span class="line"> var count : Int = 0</span>
<span class="line"> override fun onCreate(savedInstanceState: Bundle?) {</span>
<span class="line">  super.onCreate(savedInstanceState)</span>
<span class="line">  setContentView(R.layout.activity_main)</span>
<span class="line">  setSupportActionBar(toolbar)</span>
<span class="line">  dumpWeakInfo()</span>
<span class="line">  fab.setOnClickListener { view -&gt;</span>
<span class="line">  //System.gc()// this seldom works use Android studio force gc stop</span>
<span class="line">  weakHashMap.put(MyObject(count.toString()), count)</span>
<span class="line">  count ++</span>
<span class="line">  dumpWeakInfo()</span>
<span class="line">  Snackbar.make(view, &quot;Replace with your own action&quot;, Snackbar.LENGTH_LONG)</span>
<span class="line">  .setAction(&quot;Action&quot;, null).show()</span>
<span class="line">  }</span>
<span class="line"> }</span>
<span class="line">  fun dumpWeakInfo() {</span>
<span class="line">  Log.i(&quot;MainActivity&quot;, &quot;dumpWeakInfo weakInfo.size=${weakHashMap.size}&quot;)</span>
<span class="line"> }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><ul><li><!----></li><li><!----></li><li><!----></li><li><!----></li><li><!----></li></ul><div class="language-plain line-numbers-mode" data-highlighter="prismjs" data-ext="plain" data-title="plain"><pre class="language-plain"><code><span class="line">I/MainActivity(10202): dumpWeakInfo weakInfo.size=1</span>
<span class="line"> I/MainActivity(10202): dumpWeakInfo weakInfo.size=2</span>
<span class="line"> I/MainActivity(10202): dumpWeakInfo weakInfo.size=3</span>
<span class="line"> I/MainActivity(10202): Object(2) finalize method is called</span>
<span class="line"> I/MainActivity(10202): Object(1) finalize method is called</span>
<span class="line"> I/MainActivity(10202): Object(0) finalize method is called</span>
<span class="line"> I/WeakHashMap(10202): removeEntry=2</span>
<span class="line"> I/WeakHashMap(10202): removeEntry=0</span>
<span class="line"> I/WeakHashMap(10202): removeEntry=1</span>
<span class="line"> I/MainActivity(10202): dumpWeakInfo weakInfo.size=1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!---->[<!---->](https://github.com/androidyue/WeakHashMapSample)<h2 id="-1" tabindex="-1"><a class="header-anchor" href="#-1"><span></span></a></h2><p>打开idea 按ctrl+n 输入ArrayList</p><p>点All places</p><p>代码有点多 可以把源码大纲罗列出来：</p><p>alt + 7</p><p>ctrl + F12</p><h2 id="compute-简介-java-8-新增" tabindex="-1"><a class="header-anchor" href="#compute-简介-java-8-新增"><span><!----><!----><!----></span></a></h2><!---->**<!---->**<!----><!----><!---->**<!---->**<!----><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1716687683469-661c0e36-465a-475a-9e9b-fbdb5a94ce96.png"><img referrerpolicy="no-referrer" src="https://cdn.nlark.com/yuque/0/2024/png/35376129/1716687683472-0bc80f7e-5baf-4132-b9c4-fb04bee3dc91.png"><p><strong><!----></strong></p><ul><li><!----></li><li><!----></li><li><!----></li></ul><h3 id="compute有啥用" tabindex="-1"><a class="header-anchor" href="#compute有啥用"><span><!----></span></a></h3><!----><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">preJava8</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> animals <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dog&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fish&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Integer<span class="token operator">&gt;</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap<span class="token operator">&lt;</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span>String animal <span class="token operator">:</span> animals<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        Integer count <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>animal<span class="token punctuation">,</span> count <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">++</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><p><strong><!----></strong></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">inJava8</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> animals <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dog&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fish&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Integer<span class="token operator">&gt;</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap<span class="token operator">&lt;</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span>String animal <span class="token operator">:</span> animals<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        map<span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span>animal<span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> v <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">++</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><!----><!----><!----><h3 id="compute-源码分析" tabindex="-1"><a class="header-anchor" href="#compute-源码分析"><span><!----></span></a></h3><!----><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">default</span> <span class="token class-name">V</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span></span>
<span class="line">        <span class="token class-name">BiFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> remappingFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token comment">// 函数式接口不能为空    </span></span>
<span class="line">    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>remappingFunction<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 获取旧值</span></span>
<span class="line">    <span class="token class-name">V</span> oldValue <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 获取计算的新值</span></span>
<span class="line">    <span class="token class-name">V</span> newValue <span class="token operator">=</span> remappingFunction<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 新值为空</span></span>
<span class="line">        <span class="token comment">// delete mapping</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldValue <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 旧值存在时</span></span>
<span class="line">            <span class="token comment">// 移除该键值</span></span>
<span class="line">            <span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// nothing to do. Leave things as they were.</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 新值不为空</span></span>
<span class="line">        <span class="token comment">// 添加或者覆盖旧值</span></span>
<span class="line">        <span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> newValue<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><h5 id="方法定义" tabindex="-1"><a class="header-anchor" href="#方法定义"><span><!----></span></a></h5><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token comment">/* </span>
<span class="line">    * @since 1.8</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">default</span> <span class="token class-name">V</span> <span class="token function">computeIfAbsent</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span></span>
<span class="line">            <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> mappingFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>mappingFunction<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">V</span> v<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>v <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">V</span> newValue<span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>newValue <span class="token operator">=</span> mappingFunction<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">return</span> newValue<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> v<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><!----><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComputeIfAbsentTest01</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token class-name">Maps</span><span class="token punctuation">.</span><span class="token function">newHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">//java8 之前操作</span></span>
<span class="line">        list <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComputeIfAbsentTest02</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token class-name">Maps</span><span class="token punctuation">.</span><span class="token function">newHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">//java8 之后的骚操作</span></span>
<span class="line">        list <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-Java line-numbers-mode" data-highlighter="prismjs" data-ext="Java" data-title="Java"><pre class="language-Java"><code><span class="line">If the specified key is not already associated with a value (or is mapped to null, attempts to compute its value using the given mapping function and enters it into this map unless null.</span>
<span class="line"></span>
<span class="line">如果指定的key 不存在关联的值或者返回 Null,那么就会试着去执行传入的mappingFunction。</span>
<span class="line"></span>
<span class="line">对照上面的例子就是，如果从map中获取对应键值 list ，获取不到则执行Function, Function 的结果放入map中，并将该结果返回。</span>
<span class="line"></span>
<span class="line">default V computeIfAbsent(K key,Function&lt;? super K, ? extends V&gt; mappingFunction) {</span>
<span class="line">        Objects.requireNonNull(mappingFunction);</span>
<span class="line">        V v;</span>
<span class="line">        //获取的的value不存在</span>
<span class="line">        if ((v = get(key)) == null) {</span>
<span class="line">            V newValue;</span>
<span class="line">            //对传入key 应用 Function</span>
<span class="line">            if ((newValue = mappingFunction.apply(key)) != null) {</span>
<span class="line">                //新value放入map</span>
<span class="line">                put(key, newValue);</span>
<span class="line">                //返回新的value</span>
<span class="line">                return newValue;</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">        //map中存在则直接返回</span>
<span class="line">        return v;</span>
<span class="line">    }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComputeIfAbsentTest03</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">//java8 实现计算功能统计字符串出现次数</span></span>
<span class="line">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">&gt;</span></span> countMap <span class="token operator">=</span> <span class="token class-name">Maps</span><span class="token punctuation">.</span><span class="token function">newHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> source <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;welcome&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;welcome&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;simon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            countMap<span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> key <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>countMap<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->编辑当前页面<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->上次更新时间 9/30/2024, 3:17:48 PM<!--]--></span></span></div></footer><!----><div class="reco-giscus-wrapper"><!----></div></div><div class="page-catalog-container"><h5 class="tip">页面导航</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#集合体系结构" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="集合体系结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->集合体系结构<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#list" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="List"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->List<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#arraylist" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="ArrayList"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ArrayList<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedlist" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedList"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedList<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#vector-和-stack" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Vector 和 Stack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Vector 和 Stack<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#set" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Set"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Set<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#hashset" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="HashSet"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->HashSet<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedhashset" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedHashSet"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedHashSet<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#treeset" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="TreeSet"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->TreeSet<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#queue" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Queue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Queue<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#arraydeque" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="ArrayDeque"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ArrayDeque<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedlist-1" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedList"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedList<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#priorityqueue" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="PriorityQueue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->PriorityQueue<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#map" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Map"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Map<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#hashmap" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="HashMap"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->HashMap<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedhashmap" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedHashMap"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedHashMap<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#treemap" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="TreeMap"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->TreeMap<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#arraylist-详解-附源码" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="ArrayList 详解（附源码）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ArrayList 详解（附源码）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#创建-arraylist" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="创建 ArrayList"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->创建 ArrayList<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#向-arraylist-中添加元素" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="向 ArrayList 中添加元素"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->向 ArrayList 中添加元素<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#右移操作符" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="右移操作符"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->右移操作符<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#向指定-arraylist-位置添加元素" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="向指定 ArrayList 位置添加元素"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->向指定 ArrayList 位置添加元素<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#更新-arraylist-中的元素" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="更新 ArrayList 中的元素"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->更新 ArrayList 中的元素<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#删除-arraylist-中的元素" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="删除 ArrayList 中的元素"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->删除 ArrayList 中的元素<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#查找-arraylist-中的元素" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="查找 ArrayList 中的元素"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->查找 ArrayList 中的元素<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#二分查找法" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="二分查找法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->二分查找法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#arraylist增删改查时的时间复杂度" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="ArrayList增删改查时的时间复杂度"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ArrayList增删改查时的时间复杂度<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#总结" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->总结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedlist-2" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedList"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedList<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#招式一-增" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="招式一：增"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->招式一：增<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#招式二-删" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="招式二：删"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->招式二：删<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#招式三-改" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="招式三：改"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->招式三：改<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#招式四-查" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="招式四：查"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->招式四：查<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedlist-的挑战" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedList 的挑战"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedList 的挑战<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedlist-的应用" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedList 的应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedList 的应用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#栈-stack-详解" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="栈 Stack 详解"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->栈 Stack 详解<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#栈数据结构" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="栈数据结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->栈数据结构<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#自定义栈" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="自定义栈"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->自定义栈<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#stack-类" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Stack 类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Stack 类<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#小结" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="小结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->小结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#hashmap-详解-附源码" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="HashMap 详解（附源码）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->HashMap 详解（附源码）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#hashmap-增删改查的简单例子" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="HashMap 增删改查的简单例子"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->HashMap 增删改查的简单例子<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#hash-方法的原理" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="hash 方法的原理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->hash 方法的原理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#hashmap-的扩容机制" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="HashMap 的扩容机制"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->HashMap 的扩容机制<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#加载因子为什么是-0-75" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="加载因子为什么是 0.75"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->加载因子为什么是 0.75<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#线程不安全" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="线程不安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->线程不安全<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#小结-5" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="小结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->小结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedhashmap-详解" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedHashMap 详解"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedHashMap 详解<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#插入顺序" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="插入顺序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->插入顺序<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#访问顺序" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="访问顺序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->访问顺序<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#lru-缓存" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LRU 缓存"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LRU 缓存<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#小结-6" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="小结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->小结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#treemap-详解" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="TreeMap 详解"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->TreeMap 详解<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#自然顺序" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="自然顺序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->自然顺序<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#自定义排序" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="自定义排序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->自定义排序<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#排序的好处" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="排序的好处"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->排序的好处<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#如何选择-map" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="如何选择 Map"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->如何选择 Map<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#双端队列-arraydeque" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="双端队列 ArrayDeque"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->双端队列 ArrayDeque<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#栈和队列" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="栈和队列"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->栈和队列<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#方法剖析" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="方法剖析"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->方法剖析<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#小结-7" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="小结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->小结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#优先队列-priorityqueue" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="优先队列 PriorityQueue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->优先队列 PriorityQueue<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#priorityqueue的作用" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="PriorityQueue的作用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->PriorityQueue的作用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#方法剖析-1" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="方法剖析"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->方法剖析<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#小结-8" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="小结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->小结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#arraylist-和-linkedlist-区别" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="ArrayList 和 LinkedList 区别"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ArrayList 和 LinkedList 区别<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#arraylist-是如何实现的" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="ArrayList 是如何实现的？"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ArrayList 是如何实现的？<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#linkedlist-是如何实现的" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="LinkedList 是如何实现的？"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->LinkedList 是如何实现的？<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#新增元素时究竟谁快" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="新增元素时究竟谁快？"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->新增元素时究竟谁快？<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#删除元素时究竟谁快" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="删除元素时究竟谁快？"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->删除元素时究竟谁快？<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#遍历元素时究竟谁快" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="遍历元素时究竟谁快？"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->遍历元素时究竟谁快？<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#两者的使用场景" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="两者的使用场景"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->两者的使用场景<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#iterator-和-iterable-区别" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Iterator 和 Iterable 区别"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Iterator 和 Iterable 区别<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#foreach-循环陷阱" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="foreach 循环陷阱"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->foreach 循环陷阱<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#comparable-和-comparator" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Comparable 和 Comparator"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Comparable 和 Comparator<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#comparable" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Comparable"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Comparable<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#comparator" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Comparator"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Comparator<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#到底该用哪一个" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="到底该用哪一个？"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->到底该用哪一个？<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#weakhashmap-详解" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="WeakHashMap 详解"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->WeakHashMap 详解<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#weakhashmap如何不阻止对象回收呢" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="WeakHashMap如何不阻止对象回收呢"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->WeakHashMap如何不阻止对象回收呢<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#如何删除被回收的key数据呢" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="如何删除被回收的key数据呢"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->如何删除被回收的key数据呢<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#-1" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label><!--[--><!--]--><span class="xicon-container"><!----></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#compute-简介-java-8-新增" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="compute 简介(Java 8 新增)"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->compute 简介(Java 8 新增)<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#compute有啥用" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="compute有啥用?"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->compute有啥用?<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/java_blog/blogs/docs/Java/collections/base08.html#compute-源码分析" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="compute 源码分析"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->compute 源码分析<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/java_blog/assets/app-CUeFR5CM.js" defer></script>
  </body>
</html>
